# –†–æ–∑–¥—ñ–ª 35: –ö–∞–Ω–∞–ª–∏ (Channels) ‚Äî –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏

---

## üìã –ê–Ω–æ—Ç–∞—Ü—ñ—è

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö –≤–∏ –æ–ø–∞–Ω—É–≤–∞–ª–∏ –¥–≤–∞ –ø—ñ–¥—Ö–æ–¥–∏ –¥–æ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ—Å—Ç—ñ: —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ –ø–æ—Ç–æ–∫–∏, –¥–µ –∫–æ–∂–µ–Ω –ø—Ä–∞—Ü—é—î –∑—ñ —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏ –±–µ–∑ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —ñ–Ω—à–∏–º–∏, —Ç–∞ —Å–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω —á–µ—Ä–µ–∑ `Arc<Mutex<T>>`, –¥–µ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –∫–æ–Ω–∫—É—Ä—É—é—Ç—å –∑–∞ –¥–æ—Å—Ç—É–ø –¥–æ –æ–¥–Ω–∏—Ö —ñ —Ç–∏—Ö —Å–∞–º–∏—Ö –¥–∞–Ω–∏—Ö. –û–±–∏–¥–≤–∞ –ø—ñ–¥—Ö–æ–¥–∏ –º–∞—é—Ç—å —Å–≤–æ—ó –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è, –∞–ª–µ —ñ—Å–Ω—É—î —Ç—Ä–µ—Ç—ñ–π —à–ª—è—Ö ‚Äî —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–∏ —ñ–Ω—à–∏–π —ñ –≤–æ–¥–Ω–æ—á–∞—Å –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –µ–ª–µ–≥–∞–Ω—Ç–Ω–∏–π: **–ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** (message passing).

–Ü–¥–µ—è –ø—Ä–æ—Å—Ç–∞ —ñ –≤–æ–¥–Ω–æ—á–∞—Å —Ä–µ–≤–æ–ª—é—Ü—ñ–π–Ω–∞. –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –∑–º—ñ–Ω—é–≤–∞–ª–∏ —Å–ø—ñ–ª—å–Ω—ñ –¥–∞–Ω—ñ —ñ –∑–º–∞–≥–∞–ª–∏—Å—è –∑–∞ –ø—Ä–∞–≤–æ –¥–æ—Å—Ç—É–ø—É —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –≤–æ–Ω–∏ **–Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** –æ–¥–∏–Ω –æ–¥–Ω–æ–º—É —á–µ—Ä–µ–∑ –∑–∞—Ö–∏—â–µ–Ω—ñ –∫–∞–Ω–∞–ª–∏. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –≤–æ–ª–æ–¥—ñ—î —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏ –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ ‚Äî –Ω—ñ—Ö—Ç–æ —ñ–Ω—à–∏–π –Ω–µ –º–æ–∂–µ —ó—Ö –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ —á–∏ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–ø—Ä—è–º—É. –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —ñ–Ω—à–æ–º—É –ø–æ—Ç–æ–∫—É, –¥–∞–Ω—ñ –±—É–∫–≤–∞–ª—å–Ω–æ –ø–µ—Ä–µ–º—ñ—â—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª, —ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–ª–∞—Å–Ω–∏–∫ –≤—Ç—Ä–∞—á–∞—î –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É–ø. –¶–µ –Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑ –ø–æ–¥–∞–ª—å—à–æ—é —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é ‚Äî —Ü–µ —Å–ø—Ä–∞–≤–∂–Ω—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è.

–¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ –≤–∏—Ä—ñ—à—É—î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É –ø—Ä–æ–±–ª–µ–º—É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è: —è–∫—â–æ –Ω–µ–º–∞—î —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É, —Ç–æ –Ω–µ–º–∞—î –π –≥–æ–Ω–æ–∫ –¥–∞–Ω–∏—Ö. –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –≤ —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ö–µ–º–∞—Ö –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –Ω–µ–º–∞—î —Ä–∏–∑–∏–∫—É –≤–∑–∞—î–º–Ω–∏—Ö –±–ª–æ–∫—É–≤–∞–Ω—å, –Ω–µ–º–∞—î –Ω–µ–æ—á–µ–≤–∏–¥–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–Ω–æ–º–Ω–æ, –∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —á—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ, —Ç–∏–ø–æ–±–µ–∑–ø–µ—á–Ω—ñ –∫–∞–Ω–∞–ª–∏.

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –Ω–∞–π–∫—Ä–∞—â–µ —Å—Ñ–æ—Ä–º—É–ª—å–æ–≤–∞–Ω–∏–π —É –≤—ñ–¥–æ–º–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—ñ –º–æ–≤–∏ Go: *"Don't communicate by sharing memory; share memory by communicating"* ‚Äî "–ù–µ —Å–ø—ñ–ª–∫—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω—É –ø–∞–º'—è—Ç—å; –¥—ñ–ª—ñ—Ç—å—Å—è –ø–∞–º'—è—Ç—Ç—é —á–µ—Ä–µ–∑ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è". Rust –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ü—é –ø–∞—Ä–∞–¥–∏–≥–º—É —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `std::sync::mpsc`, —ñ –≤ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ, —è–∫ —ó—ó –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ.

---

## üéØ –¶—ñ–ª—ñ –Ω–∞–≤—á–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ü—å–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É –≤–∏ –∑–º–æ–∂–µ—Ç–µ:

1. **–ü–æ—è—Å–Ω–∏—Ç–∏** —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫—ñ —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –º—ñ–∂ –ø–µ—Ä–µ–¥–∞—á–µ—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ —Å–ø—ñ–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º
2. **–û–±“ë—Ä—É–Ω—Ç—É–≤–∞—Ç–∏** –≤–∏–±—ñ—Ä –ø—ñ–¥—Ö–æ–¥—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
3. **–°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏** –∫–∞–Ω–∞–ª–∏ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
4. **–†–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏** –ø–∞—Ç–µ—Ä–Ω–∏ producer-consumer, fan-in, fan-out —Ç–∞ pipeline
5. **–ü—Ä–æ—î–∫—Ç—É–≤–∞—Ç–∏** —Å–∏—Å—Ç–µ–º–∏ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –¥–ª—è —Ä–æ—é –∞–≥–µ–Ω—Ç—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–µ—Ä–µ–¥–∞—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
6. **–î—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏** —Ç–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫–∞–Ω–∞–ª–∞–º–∏ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏ —ó—Ö

---

## üìö –ö–ª—é—á–æ–≤—ñ —Ç–µ—Ä–º—ñ–Ω–∏

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **–∫–∞–Ω–∞–ª (channel)** | –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–∞—Ö–∏—â–µ–Ω–∏–π —à–ª—è—Ö –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏, —â–æ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—á–∞ |
| **MPSC** | Multiple Producer, Single Consumer ‚Äî –º–æ–¥–µ–ª—å –∫–∞–Ω–∞–ª—É, –¥–µ –±–∞–≥–∞—Ç–æ –ø–æ—Ç–æ–∫—ñ–≤ –º–æ–∂—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏, –∞–ª–µ –ª–∏—à–µ –æ–¥–∏–Ω –æ—Ç—Ä–∏–º—É—î |
| **Sender\<T\>** | –ö—ñ–Ω–µ—Ü—å –∫–∞–Ω–∞–ª—É –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∏–ø—É T; –º–æ–∂–Ω–∞ –∫–ª–æ–Ω—É–≤–∞—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—ñ–≤ |
| **Receiver\<T\>** | –ö—ñ–Ω–µ—Ü—å –∫–∞–Ω–∞–ª—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∏–ø—É T; –Ω–µ –º–æ–∂–Ω–∞ –∫–ª–æ–Ω—É–≤–∞—Ç–∏ ‚Äî –∑–∞–≤–∂–¥–∏ –æ–¥–∏–Ω –æ—Ç—Ä–∏–º—É–≤–∞—á |
| **ownership transfer** | –ú–µ—Ö–∞–Ω—ñ–∑–º, –ø—Ä–∏ —è–∫–æ–º—É –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞—î –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –¥–∞–Ω–∏–º–∏ –≤—ñ–¥ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ –¥–æ –æ—Ç—Ä–∏–º—É–≤–∞—á–∞ |
| **blocking receive** | –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ –æ—Ç—Ä–∏–º—É–≤–∞—á–∞, –∫–æ–ª–∏ –≤—ñ–Ω –ø—Ä–∏–∑—É–ø–∏–Ω—è—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É –¥–æ –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è |
| **bounded channel** | –ö–∞–Ω–∞–ª –∑ –æ–±–º–µ–∂–µ–Ω–æ—é —î–º–Ω—ñ—Å—Ç—é —á–µ—Ä–≥–∏, —â–æ —Å—Ç–≤–æ—Ä—é—î –∑–≤–æ—Ä–æ—Ç–Ω–∏–π —Ç–∏—Å–∫ –Ω–∞ —à–≤–∏–¥–∫–∏—Ö –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤ |
| **unbounded channel** | –ö–∞–Ω–∞–ª –∑ –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ—é —á–µ—Ä–≥–æ—é, –¥–µ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è |

---

## üí° –ú–æ—Ç–∏–≤–∞—Ü—ñ–π–Ω–∏–π –∫–µ–π—Å: –ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –≤ —Ä–æ—ó –ë–ü–õ–ê

–£—è–≤—ñ—Ç—å —Å–æ–±—ñ —Ü–µ–Ω—Ç—Ä –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ—î–º –±–µ–∑–ø—ñ–ª–æ—Ç–Ω–∏—Ö –ª—ñ—Ç–∞–ª—å–Ω–∏—Ö –∞–ø–∞—Ä–∞—Ç—ñ–≤. –ö–æ–∂–µ–Ω –¥—Ä–æ–Ω ‚Äî —Ü–µ –æ–∫—Ä–µ–º–∏–π –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–∏–π –ø—Ä–æ—Ü–µ—Å (—É –Ω–∞—à—ñ–π –º–æ–¥–µ–ª—ñ ‚Äî –ø–æ—Ç—ñ–∫), —â–æ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –≤–∏–∫–æ–Ω—É—î —Å–≤–æ—é –º—ñ—Å—ñ—é: –ø–∞—Ç—Ä—É–ª—é—î —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—é, –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ —Å–µ–Ω—Å–æ—Ä—ñ–≤, –ø—Ä–∏–π–º–∞—î —Ç–∞–∫—Ç–∏—á–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è. –ê–ª–µ –¥—Ä–æ–Ω–∏ –Ω–µ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ ‚Äî –≤–æ–Ω–∏ –º–∞—é—Ç—å –∫–æ–æ—Ä–¥–∏–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó, –æ–±–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è —Ä–æ–∑–≤—ñ–¥–¥–∞–Ω–∏–º–∏, –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –≤—ñ–¥ —Ü–µ–Ω—Ç—Ä—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è.

–Ø–∫ –æ—Ä–≥–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞–∫—É –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é? –†–æ–∑–≥–ª—è–Ω–µ–º–æ –¥–≤–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤–æ —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥–∏.

**–ü—ñ–¥—Ö—ñ–¥ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É** –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ –≤—Å—ñ –¥—Ä–æ–Ω–∏ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ —î–¥–∏–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–ø—ñ–ª—å–Ω–æ—ó –∫–∞—Ä—Ç–∏ —Å–≤—ñ—Ç—É –∞–±–æ –∂—É—Ä–Ω–∞–ª—É –ø–æ–¥—ñ–π:

```text
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-1" ‚îÄ‚îÄ‚îê
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-2" ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫ [Mutex<SharedState>] ‚óÑ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ –î—Ä–æ–Ω "–®—Ç—É—Ä–º–æ–≤–∏–∫-1"
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-3" ‚îÄ‚îÄ‚îò                            ‚îî‚îÄ‚îÄ –î—Ä–æ–Ω "–®—Ç—É—Ä–º–æ–≤–∏–∫-2"
```

–£ —Ü—ñ–π –º–æ–¥–µ–ª—ñ –≤—Å—ñ –¥—Ä–æ–Ω–∏ –∑–º–∞–≥–∞—é—Ç—å—Å—è –∑–∞ –æ–¥–∏–Ω lock. –ö–æ–ª–∏ –†–æ–∑–≤—ñ–¥–Ω–∏–∫-1 —Ö–æ—á–µ –∑–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤–∏—è–≤–ª–µ–Ω–æ—ó —Ü—ñ–ª—ñ, –≤—ñ–Ω –±–ª–æ–∫—É—î –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å—ñ—Ö —ñ–Ω—à–∏—Ö. –Ø–∫—â–æ –≤ —Ü–µ–π –º–æ–º–µ–Ω—Ç –®—Ç—É—Ä–º–æ–≤–∏–∫-2 —Ç–µ—Ä–º—ñ–Ω–æ–≤–æ –ø–æ—Ç—Ä–µ–±—É—î –æ–Ω–æ–≤–ª–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ—Ä–∏–≥—É–≤–∞–Ω–Ω—è –∞—Ç–∞–∫–∏ ‚Äî –≤—ñ–Ω –∑–º—É—à–µ–Ω–∏–π —á–µ–∫–∞—Ç–∏. –ü—Ä–∏ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∞–≥–µ–Ω—Ç—ñ–≤ –∞–±–æ —á–∞—Å—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö –∑–∞–ø–∏—Å—É —Ü–µ —Å—Ç–≤–æ—Ä—é—î –≤—É–∑—å–∫–µ –º—ñ—Å—Ü–µ, –∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑—Ä–æ—Å—Ç–∞—î –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ.

**–ü—ñ–¥—Ö—ñ–¥ –ø–µ—Ä–µ–¥–∞—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É—î –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é —ñ–Ω–∞–∫—à–µ:

```text
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-1" ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ [–ö–∞–Ω–∞–ª –∑–≤—ñ—Ç—ñ–≤] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îê
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-2" ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ [–ö–∞–Ω–∞–ª –∑–≤—ñ—Ç—ñ–≤] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îú‚îÄ‚îÄ‚ñ∫ –¶–µ–Ω—Ç—Ä –∫–µ—Ä—É–≤–∞–Ω–Ω—è
–î—Ä–æ–Ω "–†–æ–∑–≤—ñ–¥–Ω–∏–∫-3" ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ [–ö–∞–Ω–∞–ª –∑–≤—ñ—Ç—ñ–≤] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îò
                                                    ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚ñº
‚îú‚îÄ‚îÄ‚ñ∫ [–ö–∞–Ω–∞–ª –∫–æ–º–∞–Ω–¥] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –î—Ä–æ–Ω "–®—Ç—É—Ä–º–æ–≤–∏–∫-1"
‚îî‚îÄ‚îÄ‚ñ∫ [–ö–∞–Ω–∞–ª –∫–æ–º–∞–Ω–¥] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –î—Ä–æ–Ω "–®—Ç—É—Ä–º–æ–≤–∏–∫-2"
```

–¢—É—Ç –∫–æ–∂–µ–Ω –¥—Ä–æ–Ω –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –Ω–∞–¥—Å–∏–ª–∞—î —Å–≤–æ—ó –∑–≤—ñ—Ç–∏ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª. –¶–µ–Ω—Ç—Ä –∫–µ—Ä—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è —ñ —Ä–æ–∑—Å–∏–ª–∞—î –∫–æ–º–∞–Ω–¥–∏ —á–µ—Ä–µ–∑ –æ–∫—Ä–µ–º—ñ –∫–∞–Ω–∞–ª–∏. –ñ–æ–¥–µ–Ω –¥—Ä–æ–Ω –Ω–µ –±–ª–æ–∫—É—î —ñ–Ω—à–∏—Ö. –ñ–æ–¥–Ω–∏—Ö –≥–æ–Ω–æ–∫ –∑–∞ —Å–ø—ñ–ª—å–Ω–∏–π —Ä–µ—Å—É—Ä—Å. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏—Ä–æ–¥–Ω–æ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è ‚Äî –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –¥—Ä–æ–Ω—ñ–≤ –Ω–µ —É—Å–∫–ª–∞–¥–Ω—é—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—é.

–Ø–∫—É –º–æ–¥–µ–ª—å –æ–±—Ä–∞—Ç–∏? –¶–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –≤–∏–º–æ–≥, —ñ —Ü–µ–π —Ä–æ–∑–¥—ñ–ª –¥–æ–ø–æ–º–æ–∂–µ –≤–∞–º –∑—Ä–æ–±–∏—Ç–∏ –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–∏–π –≤–∏–±—ñ—Ä.

---

## 35.1 –§–Ü–õ–û–°–û–§–Ü–Ø –ü–ï–†–ï–î–ê–ß–Ü –ü–û–í–Ü–î–û–ú–õ–ï–ù–¨

### 35.1.1 –î–≤–∞ —Å–≤—ñ—Ç–æ–≥–ª—è–¥–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è

–Ü—Å—Ç–æ—Ä—ñ—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å —Å—Ñ–æ—Ä–º—É–≤–∞–ª–∞ –¥–≤–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤–æ —Ä—ñ–∑–Ω—ñ —Å–≤—ñ—Ç–æ–≥–ª—è–¥–∏ —â–æ–¥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—ó –ø—Ä–æ—Ü–µ—Å—ñ–≤, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –ö–æ–∂–µ–Ω –∑ –Ω–∏—Ö –º–∞—î –≥–ª–∏–±–æ–∫–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–µ –ø—ñ–¥“ë—Ä—É–Ω—Ç—è, —Å–≤–æ—ó –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è.

**–°–ø—ñ–ª—å–Ω–∞ –ø–∞–º'—è—Ç—å (Shared Memory)** ‚Äî —Ü–µ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥, —â–æ –¥–æ–º—ñ–Ω—É–≤–∞–≤ —É —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ –ø—Ä–æ—Ç—è–≥–æ–º –¥–µ—Å—è—Ç–∏–ª—ñ—Ç—å. –ô–æ–≥–æ —ñ–¥–µ—è –ø—Ä–æ—Å—Ç–∞: –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ –æ–¥–Ω–∏—Ö —ñ —Ç–∏—Ö —Å–∞–º–∏—Ö –¥–∞–Ω–∏—Ö —É –ø–∞–º'—è—Ç—ñ. –î–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –º–µ—Ö–∞–Ω—ñ–∑–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó ‚Äî –º'—é—Ç–µ–∫—Å–∏, —Å–µ–º–∞—Ñ–æ—Ä–∏, –∞—Ç–æ–º–∞—Ä–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó. –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ —à–∏—Ä–æ–∫–æ –ø–æ—à–∏—Ä–µ–Ω–∏–π —É –º–æ–≤–∞—Ö C, C++, Java, —ñ –≤–∏ –≤–∂–µ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—è –∑ –Ω–∏–º —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö —á–µ—Ä–µ–∑ `Arc<Mutex<T>>`.

–ü–µ—Ä–µ–≤–∞–≥–∏ —Å–ø—ñ–ª—å–Ω–æ—ó –ø–∞–º'—è—Ç—ñ –æ—á–µ–≤–∏–¥–Ω—ñ: –Ω–∏–∑—å–∫—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á—ñ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö (–¥–∞–Ω—ñ –Ω–µ –∫–æ–ø—ñ—é—é—Ç—å—Å—è, –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è), –≥–Ω—É—á–∫—ñ—Å—Ç—å —É –ø—Ä–æ—î–∫—Ç—É–≤–∞–Ω–Ω—ñ (–±—É–¥—å-—è–∫–∏–π –ø–æ—Ç—ñ–∫ –º–æ–∂–µ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ —á–∏ –∑–º—ñ–Ω–∏—Ç–∏ –±—É–¥—å-—è–∫—ñ –¥–∞–Ω—ñ), –ø—Ä–∏—Ä–æ–¥–Ω—ñ—Å—Ç—å –¥–ª—è –ø–µ–≤–Ω–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –º–∞—Ç—Ä–∏—Ü—å).

–û–¥–Ω–∞–∫ –Ω–µ–¥–æ–ª—ñ–∫–∏ —Ç–∞–∫–æ–∂ —Å—É—Ç—Ç—î–≤—ñ. –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑—Ä–æ—Å—Ç–∞—î –Ω–µ–ª—ñ–Ω—ñ–π–Ω–æ –∑—ñ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è–º –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ—Ç–æ–∫—ñ–≤ —ñ —Ç–æ—á–æ–∫ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–ø—ñ–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –ü–æ–º–∏–ª–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (–≥–æ–Ω–∫–∏ –¥–∞–Ω–∏—Ö, –≤–∑–∞—î–º–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è) –≤–∞–∂–∫–æ –≤–∏—è–≤–∏—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –ø—Ä–æ—è–≤–ª—è—é—Ç—å—Å—è –Ω–µ–¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–æ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ç–∏—Å—è—á—ñ —Ä–∞–∑—ñ–≤ —ñ —Ä–∞–ø—Ç–æ–≤–æ –∑–±–æ—ó—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º.

**–ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (Message Passing)** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥, —â–æ –Ω–∞–±—É–≤ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—ñ –∑–∞–≤–¥—è–∫–∏ –º–æ–≤–∞–º Erlang, Go —Ç–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É Akka. –¢—É—Ç –ø–æ—Ç–æ–∫–∏ –Ω–µ –¥—ñ–ª—è—Ç—å —Å—Ç–∞–Ω –Ω–∞–ø—Ä—è–º—É. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –≤–æ–ª–æ–¥—ñ—î —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏ –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ, —ñ –Ω—ñ—Ö—Ç–æ —ñ–Ω—à–∏–π –Ω–µ –º–æ–∂–µ —ó—Ö –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ —á–∏ –∑–º—ñ–Ω–∏—Ç–∏ –±–µ–∑ —è–≤–Ω–æ—ó –ø–µ—Ä–µ–¥–∞—á—ñ. –ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø–æ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –∫–∞–Ω–∞–ª–∞—Ö.

–ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –ø–æ–ª—è–≥–∞—é—Ç—å —É –ø—Ä–æ—Å—Ç–æ—Ç—ñ –º–µ–Ω—Ç–∞–ª—å–Ω–æ—ó –º–æ–¥–µ–ª—ñ (–∫–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ ‚Äî —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∏–π –æ—Å—Ç—Ä—ñ–≤–µ—Ü—å –∑ —á—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ –≤—Ö–æ–¥–∞–º–∏ —Ç–∞ –≤–∏—Ö–æ–¥–∞–º–∏), –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –≥–æ–Ω–æ–∫ –¥–∞–Ω–∏—Ö –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–Ω–µ–º–∞—î —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É ‚Äî –Ω–µ–º–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤), –ª–µ–≥—à–æ–º—É –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—ñ (–∫–∞–Ω–∞–ª–∏ –∞–±—Å—Ç—Ä–∞–≥—É—é—Ç—å –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é —ñ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ —ñ –ø–æ –º–µ—Ä–µ–∂—ñ).

–ù–µ–¥–æ–ª—ñ–∫–∏ —Ç–µ–∂ —ñ—Å–Ω—É—é—Ç—å: –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∞–±–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ, –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –¥–ª—è –¥–µ—è–∫–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –±–∞–≥–∞—Ç—å–æ–º –ø–æ—Ç–æ–∫–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω —à–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –∫–µ—à—É –∑ –ø–µ—Ä–µ–≤–∞–∂–∞–Ω–Ω—è–º —á–∏—Ç–∞–Ω–Ω—è).

### 35.1.2 –ß–æ–º—É –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–∏—Ä–æ–¥–Ω–∞ –¥–ª—è Rust

–°–∏—Å—Ç–µ–º–∞ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è Rust (ownership) —Ä–æ–±–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏—Ä–æ–¥–Ω–æ—é —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ—é. –†–æ–∑–≥–ª—è–Ω–µ–º–æ, —á–æ–º—É —Ü–µ —Ç–∞–∫.

–£ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏—Ö –º–æ–≤–∞—Ö –∑ garbage collection (Java, Go) "–ø–µ—Ä–µ–¥–∞—á–∞" –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äî —Ü–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è. –ü—ñ—Å–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –≤—Å–µ —â–µ –º–æ–∂–µ –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ –æ–±'—î–∫—Ç–∞, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø—Ä–æ–±–ª–µ–º, —è–∫—â–æ –æ—Ç—Ä–∏–º—É–≤–∞—á –º–æ–¥–∏—Ñ—ñ–∫—É—î –¥–∞–Ω—ñ. –ú–æ–≤–∏ –ø–æ–∫–ª–∞–¥–∞—é—Ç—å—Å—è –Ω–∞ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω—É –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞ –∞–±–æ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "–ø—ñ—Å–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –Ω–µ —á—ñ–ø–∞–π –æ–±'—î–∫—Ç").

–£ Rust —Å–∏—Ç—É–∞—Ü—ñ—è –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤–æ —ñ–Ω—à–∞. –ö–æ–ª–∏ –≤–∏ –Ω–∞–¥—Å–∏–ª–∞—î—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª, –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è **move** ‚Äî –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞–±–∏—Ä–∞—î –≤–æ–ª–æ–¥—ñ–Ω–Ω—è —É –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ —ñ –ø–µ—Ä–µ–¥–∞—î –æ—Ç—Ä–∏–º—É–≤–∞—á—É. –°–ø—Ä–æ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ—Å–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, –∞ –Ω–µ –¥–æ –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

–û—Å—å –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Ü—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É:

```text
–ö–†–û–ö 1: –î–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ—Ç—ñ–∫-–≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫  ‚îÇ                    ‚îÇ   –ü–æ—Ç—ñ–∫-–æ—Ç—Ä–∏–º—É–≤–∞—á   ‚îÇ
‚îÇ                     ‚îÇ                    ‚îÇ                     ‚îÇ
‚îÇ  data: String ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  (–æ—á—ñ–∫—É—î)           ‚îÇ
‚îÇ  "–í–∞–∂–ª–∏–≤—ñ –¥–∞–Ω—ñ"     ‚îÇ                    ‚îÇ                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
–í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –≤–æ–ª–æ–¥—ñ—î –¥–∞–Ω–∏–º–∏

–ö–†–û–ö 2: –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è (tx.send(data))
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ—Ç—ñ–∫-–≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫  ‚îÇ      [–ö–∞–Ω–∞–ª]       ‚îÇ   –ü–æ—Ç—ñ–∫-–æ—Ç—Ä–∏–º—É–≤–∞—á   ‚îÇ
‚îÇ                     ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ                     ‚îÇ
‚îÇ  data: ??? ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ‚îº‚îÄ ‚îÄ‚ñ∫‚îÇ"–í–∞–∂–ª–∏–≤—ñ"‚îÇ‚îÄ ‚îÄ ‚îÄ‚î§  (–æ—á—ñ–∫—É—î)           ‚îÇ
‚îÇ  (moved!)           ‚îÇ    ‚îÇ "–¥–∞–Ω—ñ"  ‚îÇ     ‚îÇ                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
–í–æ–ª–æ–¥—ñ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞–Ω–æ –≤ –∫–∞–Ω–∞–ª

–ö–†–û–ö 3: –û—Ç—Ä–∏–º–∞–Ω–Ω—è (rx.recv())
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ—Ç—ñ–∫-–≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫  ‚îÇ                    ‚îÇ   –ü–æ—Ç—ñ–∫-–æ—Ç—Ä–∏–º—É–≤–∞—á   ‚îÇ
‚îÇ                     ‚îÇ                    ‚îÇ                     ‚îÇ
‚îÇ  data: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞   ‚îÇ                    ‚îÇ  data: String ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                     ‚îÇ                    ‚îÇ  "–í–∞–∂–ª–∏–≤—ñ –¥–∞–Ω—ñ"     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
–û—Ç—Ä–∏–º—É–≤–∞—á —Ç–µ–ø–µ—Ä –≤–æ–ª–æ–¥—ñ—î –¥–∞–Ω–∏–º–∏
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –º–æ–º–µ–Ω—Ç: –ø—ñ—Å–ª—è –∫—Ä–æ–∫—É 2 –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –±—ñ–ª—å—à–µ –Ω–µ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `data`. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤—ñ–¥—Å—Ç–µ–∂—É—î —Ü–µ —ñ –Ω–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –∫–æ–¥, —â–æ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è. –¶–µ –Ω–µ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—è —á–∏ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞ ‚Äî —Ü–µ –≥–∞—Ä–∞–Ω—Ç—ñ—è –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ç–∏–ø—ñ–≤.

### 35.1.3 –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—ñ–¥—Ö–æ–¥—ñ–≤: –∫–æ–ª–∏ —â–æ –æ–±–∏—Ä–∞—Ç–∏

–í–∏–±—ñ—Ä –º—ñ–∂ —Å–ø—ñ–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º —Ç–∞ –ø–µ—Ä–µ–¥–∞—á–µ—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚Äî –Ω–µ –ø–∏—Ç–∞–Ω–Ω—è "—â–æ –∫—Ä–∞—â–µ", –∞ –ø–∏—Ç–∞–Ω–Ω—è "—â–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ". –û—Å—å –æ—Ä—ñ—î–Ω—Ç–∏—Ä–∏, —â–æ –¥–æ–ø–æ–º–æ–∂—É—Ç—å –ø—Ä–∏–π–Ω—è—Ç–∏ –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è:

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ | –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è |
|----------|----------------------|---------------|
| –°–ø—ñ–ª—å–Ω–∏–π –∫–µ—à –∑ —á–∞—Å—Ç–∏–º —á–∏—Ç–∞–Ω–Ω—è–º | –°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω (`Arc<RwLock>`) | RwLock –¥–æ–∑–≤–æ–ª—è—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ —á–∏—Ç–∞–Ω–Ω—è; –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö –±—É–ª–æ –± –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º |
| –ß–∞—Å—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ | –°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω (`Arc<Mutex>` –∞–±–æ –∞—Ç–æ–º–∞—Ä–Ω—ñ —Ç–∏–ø–∏) | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É ‚Äî –Ω–∞–¥–º—ñ—Ä–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ |
| –ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö (pipeline) | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | –î–∞–Ω—ñ –ø—Ä–∏—Ä–æ–¥–Ω–æ "—Ç–µ—á—É—Ç—å" –≤—ñ–¥ –µ—Ç–∞–ø—É –¥–æ –µ—Ç–∞–ø—É; –∫–æ–∂–µ–Ω –µ—Ç–∞–ø –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π |
| –ù–µ–∑–∞–ª–µ–∂–Ω—ñ worker-–ø–æ—Ç–æ–∫–∏ –∑—ñ –∑–≤—ñ—Ç–∞–º–∏ | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | Workers –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—ó –º—ñ–∂ —Å–æ–±–æ—é; –∑–≤—ñ—Ç–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ |
| –°–∫–ª–∞–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ —á–∞—Å—Ç–∫–æ–≤–∏–º–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏ | –°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω | –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å—ñ—î—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞; —á–∞—Å—Ç–∫–æ–≤—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–ø—ñ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É |
| Request-response –ø–∞—Ç–µ—Ä–Ω | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | –ß—ñ—Ç–∫–∏–π –ø–æ—Ç—ñ–∫: –∑–∞–ø–∏—Ç ‚Üí –æ–±—Ä–æ–±–∫–∞ ‚Üí –≤—ñ–¥–ø–æ–≤—ñ–¥—å |
| –†—ñ–π –∞–≥–µ–Ω—Ç—ñ–≤: –∫–∞—Ä—Ç–∞ —Å–≤—ñ—Ç—É | –°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω (`Arc<RwLock>`) | –í—Å—ñ –∞–≥–µ–Ω—Ç–∏ —á–∏—Ç–∞—é—Ç—å –∫–∞—Ä—Ç—É; –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä—ñ–¥–∫—ñ—Å–Ω—ñ |
| –†—ñ–π –∞–≥–µ–Ω—Ç—ñ–≤: –∑–≤—ñ—Ç–∏ –∞–≥–µ–Ω—Ç—ñ–≤ | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | –ê–≥–µ–Ω—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å –∑–≤—ñ—Ç–∏; –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∑–±–∏—Ä–∞—î |

–î–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, —Ç–∞–∫–∏—Ö —è–∫ —Ä—ñ–π –ë–ü–õ–ê, –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–º —á–∞—Å—Ç–æ —î **–∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥**: —Å–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω –¥–ª—è –¥–∞–Ω–∏—Ö –∑ –ø–µ—Ä–µ–≤–∞–∂–∞–Ω–Ω—è–º —á–∏—Ç–∞–Ω–Ω—è (–∫–∞—Ä—Ç–∞ —Å–≤—ñ—Ç—É), –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤ –ø–æ–¥—ñ–π —Ç–∞ –∫–æ–º–∞–Ω–¥.

---

## 35.2 –ö–ê–ù–ê–õ–ò –í RUST: –ú–û–î–ï–õ–¨ MPSC

### 35.2.1 –©–æ –æ–∑–Ω–∞—á–∞—î MPSC

Rust –Ω–∞–¥–∞—î –∫–∞–Ω–∞–ª–∏ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `std::sync::mpsc`. –¶—è –∞–±—Ä–µ–≤—ñ–∞—Ç—É—Ä–∞ —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤—É—î—Ç—å—Å—è —è–∫:

- **M**ultiple **P**roducers ‚Äî –±–∞–≥–∞—Ç–æ –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤ (–≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—ñ–≤)
- **S**ingle **C**onsumer ‚Äî –æ–¥–∏–Ω —Å–ø–æ–∂–∏–≤–∞—á (–æ—Ç—Ä–∏–º—É–≤–∞—á)

–¶–µ –æ–∑–Ω–∞—á–∞—î: –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –º–æ–∂—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–∞–Ω–∞–ª, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫ –º–æ–∂–µ —ó—Ö –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏. –¢–∞–∫–∞ –º–æ–¥–µ–ª—å –ø–æ–∫—Ä–∏–≤–∞—î –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π: –±–∞–≥–∞—Ç–æ —Ä–æ–±–æ—á–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –≥–µ–Ω–µ—Ä—É—é—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –æ–¥–∏–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∑–±–∏—Ä–∞—î —ó—Ö.

–ß–æ–º—É —Å–∞–º–µ —Ç–∞–∫–∞ –º–æ–¥–µ–ª—å? –ü–æ-–ø–µ—Ä—à–µ, –≤–æ–Ω–∞ –ø—Ä–æ—Å—Ç—ñ—à–∞ –≤ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∞ ‚Äî –æ—Ç—Ä–∏–º—É–≤–∞—á –Ω–µ –∫–æ–Ω–∫—É—Ä—É—î –Ω—ñ –∑ –∫–∏–º –∑–∞ –¥–æ—Å—Ç—É–ø –¥–æ —á–µ—Ä–≥–∏. –ü–æ-–¥—Ä—É–≥–µ, –≤–æ–Ω–∞ –ø—Ä–∏—Ä–æ–¥–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –±–∞–≥–∞—Ç—å–æ–º —Ä–µ–∞–ª—å–Ω–∏–º —Å—Ü–µ–Ω–∞—Ä—ñ—è–º: –ª–æ–≥—É–≤–∞–Ω–Ω—è (–±–∞–≥–∞—Ç–æ –¥–∂–µ—Ä–µ–ª ‚Üí –æ–¥–∏–Ω —Ñ–∞–π–ª), –∞–≥—Ä–µ–≥–∞—Ü—ñ—è (–±–∞–≥–∞—Ç–æ —Å–µ–Ω—Å–æ—Ä—ñ–≤ ‚Üí –æ–¥–∏–Ω –æ–±—Ä–æ–±–Ω–∏–∫), fan-in (–±–∞–≥–∞—Ç–æ workers ‚Üí –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç).

–î–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫—ñ–ª—å–∫–∞ –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ–≤, —ñ—Å–Ω—É—é—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏: broadcast –∫–∞–Ω–∞–ª–∏ (–æ–¥–∏–Ω –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ ‚Üí –±–∞–≥–∞—Ç–æ –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ–≤), crossbeam-channel (MPMC ‚Äî –±–∞–≥–∞—Ç–æ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—ñ–≤, –±–∞–≥–∞—Ç–æ –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ–≤), –∞–±–æ —Ä—É—á–Ω–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `Arc<Mutex<Receiver>>`.

### 35.2.2 –ê–Ω–∞—Ç–æ–º—ñ—è –∫–∞–Ω–∞–ª—É

–ö–∞–Ω–∞–ª —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –∫—ñ–Ω—Ü—ñ–≤, —â–æ –∑–≤'—è–∑–∞–Ω—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—é —á–µ—Ä–≥–æ—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:

```text
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
Sender 1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ                         ‚îÇ
                    ‚îÇ    –í–Ω—É—Ç—Ä—ñ—à–Ω—è —á–µ—Ä–≥–∞      ‚îÇ
Sender 2 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (FIFO)   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Receiver
                    ‚îÇ                         ‚îÇ
Sender 3 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  [msg1][msg2][msg3]...  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Sender\<T\>** (—ñ–Ω–æ–¥—ñ –Ω–∞–∑–∏–≤–∞—é—Ç—å Tx ‚Äî transmitter) ‚Äî —Ü–µ –∫—ñ–Ω–µ—Ü—å –∫–∞–Ω–∞–ª—É –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è. –ö–ª—é—á–æ–≤–∞ –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å: Sender –º–æ–∂–Ω–∞ **–∫–ª–æ–Ω—É–≤–∞—Ç–∏**, —ñ –∫–æ–∂–µ–Ω –∫–ª–æ–Ω ‚Äî –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫, —â–æ –º–æ–∂–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —ñ–Ω—à–∏—Ö. –í—Å—ñ –∫–ª–æ–Ω–∏ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –≤ –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –∫–∞–Ω–∞–ª.

**Receiver\<T\>** (—ñ–Ω–æ–¥—ñ –Ω–∞–∑–∏–≤–∞—é—Ç—å Rx ‚Äî receiver) ‚Äî –∫—ñ–Ω–µ—Ü—å –∫–∞–Ω–∞–ª—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ Sender, Receiver **–Ω–µ –º–æ–∂–Ω–∞ –∫–ª–æ–Ω—É–≤–∞—Ç–∏** ‚Äî –∑–∞–≤–∂–¥–∏ —ñ—Å–Ω—É—î —Ä—ñ–≤–Ω–æ –æ–¥–∏–Ω –æ—Ç—Ä–∏–º—É–≤–∞—á. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–æ–∂–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥–µ –æ—Ç—Ä–∏–º–∞–Ω–æ —Ä—ñ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑.

–í–Ω—É—Ç—Ä—ñ—à–Ω—è —á–µ—Ä–≥–∞ –ø—Ä–∞—Ü—é—î –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–º **FIFO** (First In, First Out) ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è –≤ —Ç–æ–º—É –ø–æ—Ä—è–¥–∫—É, –≤ —è–∫–æ–º—É –±—É–ª–∏ –Ω–∞–¥—ñ—Å–ª–∞–Ω—ñ. –Ø–∫—â–æ –∫—ñ–ª—å–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—ñ–≤ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ, –ø–æ—Ä—è–¥–æ–∫ –º—ñ–∂ —ó—Ö–Ω—ñ–º–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π, –∞–ª–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ –∑–∞–≤–∂–¥–∏ –ø—Ä–∏–±—É–≤–∞—é—Ç—å —É –ø–æ—Ä—è–¥–∫—É –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è.

### 35.2.3 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞–Ω–∞–ª—É: –ø–µ—Ä—à–∏–π –ø—Ä–∏–∫–ª–∞–¥

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—É. –¶–µ–π –∫–æ–¥ —ñ–ª—é—Å—Ç—Ä—É—î –±–∞–∑–æ–≤–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º: —è–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª, –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –π–æ–≥–æ –≤ —ñ–Ω—à–æ–º—É.

**–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á—ñ:** –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞–Ω–∞–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ–∂ –¥–≤–æ–º–∞ –ø–æ—Ç–æ–∫–∞–º–∏ ‚Äî —Ä–æ–±–æ—á–∏–º –ø–æ—Ç–æ–∫–æ–º, —â–æ –≥–µ–Ω–µ—Ä—É—î –¥–∞–Ω—ñ, —Ç–∞ –≥–æ–ª–æ–≤–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º, —â–æ —ó—Ö –æ–±—Ä–æ–±–ª—è—î.

```rust
use std::sync::mpsc;
use std::thread;

fn main() {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞–Ω–∞–ª. –§—É–Ω–∫—Ü—ñ—è channel() –ø–æ–≤–µ—Ä—Ç–∞—î –∫–æ—Ä—Ç–µ–∂ –∑ –¥–≤–æ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
    // tx (transmitter) ‚Äî –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    // rx (receiver) ‚Äî –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    // –¢–∏–ø T (String —É –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É) –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–æ–º –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
    let (tx, rx) = mpsc::channel();
    
    // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫ –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è
    // move –ø–µ—Ä–µ–¥ closure –ø–µ—Ä–µ–¥–∞—î –≤–æ–ª–æ–¥—ñ–Ω–Ω—è tx —É –ø–æ—Ç—ñ–∫
    thread::spawn(move || {
        let message = String::from("–ü—Ä–∏–≤—ñ—Ç –∑ —ñ–Ω—à–æ–≥–æ –ø–æ—Ç–æ–∫—É!");
        
        // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª
        // send() –ø–æ–≤–µ—Ä—Ç–∞—î Result ‚Äî –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–∞, —è–∫—â–æ –æ—Ç—Ä–∏–º—É–≤–∞—á –∑–Ω–∏—â–µ–Ω–∏–π
        tx.send(message).expect("–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏");
        
        // –£–í–ê–ì–ê: –ø—ñ—Å–ª—è send() –∑–º—ñ–Ω–Ω–∞ message –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞!
        // –°–ø—Ä–æ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ message —Ç—É—Ç –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó:
        // println!("{}", message); // ERROR: value borrowed after move
    });
    
    // –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    // recv() –±–ª–æ–∫—É—î –ø–æ—Ç—ñ–∫ –¥–æ –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    let received = rx.recv().expect("–ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π");
    
    println!("–û—Ç—Ä–∏–º–∞–Ω–æ: {}", received);
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. `mpsc::channel()` —Å—Ç–≤–æ—Ä—é—î –ø–∞—Ä—É (Sender, Receiver), –∑–≤'—è–∑–∞–Ω—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—é —á–µ—Ä–≥–æ—é. –¢–∏–ø –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (`String`) –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –ø–æ–¥–∞–ª—å—à–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

2. `thread::spawn(move || {...})` —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫. –ö–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ `move` –ø–µ—Ä–µ–¥–∞—î –≤–æ–ª–æ–¥—ñ–Ω–Ω—è `tx` —É closure ‚Äî —Ç–µ–ø–µ—Ä —Ç—ñ–ª—å–∫–∏ —Ü–µ–π –ø–æ—Ç—ñ–∫ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫.

3. `tx.send(message)` –ø–µ—Ä–µ–º—ñ—â—É—î `message` —É –∫–∞–Ω–∞–ª. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞–Ω–æ ‚Äî —Å–ø—Ä–æ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `message` —É —Ç–æ–º—É –∂ –ø–æ—Ç–æ—Ü—ñ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.

4. `rx.recv()` —É –≥–æ–ª–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ —á–µ–∫–∞—î –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –ü–æ—Ç—ñ–∫ –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è (–Ω–µ –≤–∏—Ç—Ä–∞—á–∞—é—á–∏ CPU) –¥–æ –º–æ–º–µ–Ω—Ç—É, –∫–æ–ª–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑'—è–≤–∏—Ç—å—Å—è –≤ —á–µ—Ä–∑—ñ.

5. –ö–æ–ª–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—Ö–æ–¥–∏—Ç—å, `recv()` –ø–æ–≤–µ—Ä—Ç–∞—î `Ok(message)`, —ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è.

–¶–µ–π –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∫–ª—é—á–æ–≤—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –∫–∞–Ω–∞–ª—ñ–≤ Rust: –±–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏ –±–µ–∑ —è–≤–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.

### 35.2.4 –¢–∏–ø—ñ–∑–∞—Ü—ñ—è –∫–∞–Ω–∞–ª—É

–ö–∞–Ω–∞–ª –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–∏–π —Ç–∏–ø–æ–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚Äî `Sender<T>` —Ç–∞ `Receiver<T>` –¥–ª—è –¥–µ—è–∫–æ–≥–æ —Ç–∏–ø—É `T`. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–≤–æ–¥–∏—Ç—å —Ü–µ–π —Ç–∏–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –∞–ª–µ —ñ–Ω–æ–¥—ñ –∫–æ—Ä–∏—Å–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –π–æ–≥–æ —è–≤–Ω–æ –¥–ª—è —è—Å–Ω–æ—Å—Ç—ñ –∞–±–æ –∫–æ–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–∏–π.

**–ü—Ä–∏–∫–ª–∞–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∏–ø—É:**

```rust
let (tx, rx) = mpsc::channel();  // –¢–∏–ø —â–µ –Ω–µ–≤—ñ–¥–æ–º–∏–π

tx.send(42).unwrap();  // –¢–µ–ø–µ—Ä –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–≤–æ–¥–∏—Ç—å: Sender<i32>, Receiver<i32>
```

**–ü—Ä–∏–∫–ª–∞–¥ —è–≤–Ω–æ—ó —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó:**

```rust
// –Ø–≤–Ω–æ –≤–∫–∞–∑—É—î–º–æ —Ç–∏–ø –∫–∞–Ω–∞–ª—É
let (tx, rx): (mpsc::Sender<String>, mpsc::Receiver<String>) = mpsc::channel();

// –ê–±–æ —á–µ—Ä–µ–∑ —Ç—É—Ä–±–æ-—Ñ—ñ—à —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
let (tx, rx) = mpsc::channel::<Vec<u8>>();
```

–Ø–≤–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å–Ω–∞, –∫–æ–ª–∏:
- –í–∏ —Ö–æ—á–µ—Ç–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ç–∏–ø –¥–ª—è —á–∏—Ç–∞—á—ñ–≤ –∫–æ–¥—É
- –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –≤–∏–≤–µ—Å—Ç–∏ —Ç–∏–ø (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–∞–Ω–∞–ª —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è, –∞–ª–µ —â–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
- –í–∏ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—î—Ç–µ –≤–∏–ø–∞–¥–∫–æ–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø

---

## 35.3 –ù–ê–î–°–ò–õ–ê–ù–ù–Ø –¢–ê –û–¢–†–ò–ú–ê–ù–ù–Ø: –î–ï–¢–ê–õ–¨–ù–ò–ô –†–û–ó–ë–Ü–†

### 35.3.1 –ú–µ—Ç–æ–¥ send(): –ø–µ—Ä–µ–¥–∞—á–∞ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è

–ú–µ—Ç–æ–¥ `send()` ‚Äî —Ü–µ —Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –≤—ñ–¥ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ –¥–æ –∫–∞–Ω–∞–ª—É (—ñ –¥–∞–ª—ñ –¥–æ –æ—Ç—Ä–∏–º—É–≤–∞—á–∞). –†–æ–∑–≥–ª—è–Ω–µ–º–æ –π–æ–≥–æ —Å–µ–º–∞–Ω—Ç–∏–∫—É –¥–µ—Ç–∞–ª—å–Ω–æ.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥—É:**
```rust
pub fn send(&self, t: T) -> Result<(), SendError<T>>
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä `t: T` ‚Äî —Ü–µ –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º (move), –∞ –Ω–µ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º. –ü—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `send(value)` –∑–º—ñ–Ω–Ω–∞ `value` –ø–µ—Ä–µ–º—ñ—â–µ–Ω–∞ —ñ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

**–ß–æ–º—É send() –ø–æ–≤–µ—Ä—Ç–∞—î Result?**

–ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –º–æ–∂–µ –ø—Ä–æ–≤–∞–ª–∏—Ç–∏—Å—è –≤ –æ–¥–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É: —è–∫—â–æ –æ—Ç—Ä–∏–º—É–≤–∞—á (Receiver) –≤–∂–µ –∑–Ω–∏—â–µ–Ω–∏–π. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —ñ–Ω—à–∞ —Å—Ç–æ—Ä–æ–Ω–∞ –∫–∞–Ω–∞–ª—É "–ø–æ–≤—ñ—Å–∏–ª–∞ —Ç—Ä—É–±–∫—É" ‚Äî –Ω–µ–º–∞—î –∫–æ–º—É –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Å–∏—Ç—É–∞—Ü—ñ—é, –∫–æ–ª–∏ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –æ—Ç—Ä–∏–º—É–≤–∞—á –±—É–≤ –∑–Ω–∏—â–µ–Ω–∏–π.

```rust
use std::sync::mpsc;

fn main() {
    let (tx, rx) = mpsc::channel::<String>();
    
    // –Ø–≤–Ω–æ –∑–Ω–∏—â—É—î–º–æ –æ—Ç—Ä–∏–º—É–≤–∞—á
    drop(rx);  // –ö–∞–Ω–∞–ª —Ç–µ–ø–µ—Ä "–∑–∞–∫—Ä–∏—Ç–∏–π" –∑ –±–æ–∫—É –æ—Ç—Ä–∏–º—É–≤–∞—á–∞
    
    // –°–ø—Ä–æ–±–∞ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ ‚Äî –æ—Ç—Ä–∏–º—É–≤–∞—á–∞ –Ω–µ–º–∞—î
    let result = tx.send(String::from("–ù—ñ–∫–æ–º—É –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏"));
    
    match result {
        Ok(()) => println!("–ù–∞–¥—ñ—Å–ª–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ"),
        Err(e) => {
            // SendError –º—ñ—Å—Ç–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫–µ –Ω–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏
            println!("–ü–æ–º–∏–ª–∫–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è: {}", e);
            // –ú–æ–∂–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞–∑–∞–¥ –Ω–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
            let failed_message = e.0;
            println!("–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏: {}", failed_message);
        }
    }
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞–Ω–∞–ª –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∏–ø—É `String`.
2. `drop(rx)` —è–≤–Ω–æ –∑–Ω–∏—â—É—î –æ—Ç—Ä–∏–º—É–≤–∞—á. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–∞–Ω–∞–ª "–∑–∞–∫—Ä–∏—Ç–∏–π" ‚Äî –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –Ω—ñ–∫—É–¥–∏.
3. `tx.send(...)` –ø–æ–≤–µ—Ä—Ç–∞—î `Err(SendError(...))`, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–µ–º–∞—î –æ—Ç—Ä–∏–º—É–≤–∞—á–∞.
4. `SendError<T>` ‚Äî —Ü–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–æ–±–≥–æ—Ä—Ç–∫–∞, —â–æ –º—ñ—Å—Ç–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (`e.0`), —è–∫–µ –Ω–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏.

### 35.3.2 –ú–µ—Ç–æ–¥ recv(): –±–ª–æ–∫—É—é—á–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è

–ú–µ—Ç–æ–¥ `recv()` ‚Äî —Ç–æ—á–∫–∞, –¥–µ –ø–æ—Ç—ñ–∫-–æ—Ç—Ä–∏–º—É–≤–∞—á —á–µ–∫–∞—î –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –Ø–∫—â–æ —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è, –ø–æ—Ç—ñ–∫ –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è –¥–æ –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥—É:**
```rust
pub fn recv(&self) -> Result<T, RecvError>
```

**–ß–æ–º—É recv() –±–ª–æ–∫—É—î –ø–æ—Ç—ñ–∫?**

–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –Ω–µ "–∑–∞–º–æ—Ä–æ–∂—É–≤–∞–Ω–Ω—è" –∑ –≤–∏—Ç—Ä–∞—Ç–æ—é CPU. –û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –ø–æ—Ç—ñ–∫ —É —Å—Ç–∞–Ω –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —ñ –≤—ñ–Ω –Ω–µ —Å–ø–æ–∂–∏–≤–∞—î –ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–∏–π —á–∞—Å. –ö–æ–ª–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—Ö–æ–¥–∏—Ç—å (–∞–±–æ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è), –ø–æ—Ç—ñ–∫ "–ø—Ä–æ–∫–∏–¥–∞—î—Ç—å—Å—è" —ñ –ø—Ä–æ–¥–æ–≤–∂—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

**–ß–æ–º—É recv() –ø–æ–≤–µ—Ä—Ç–∞—î Result?**

–û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–æ–∂–µ "–ø—Ä–æ–≤–∞–ª–∏—Ç–∏—Å—è" –≤ –æ–¥–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É: –∫–æ–ª–∏ –≤—Å—ñ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∏ –∑–Ω–∏—â–µ–Ω—ñ —ñ —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è. –¶–µ —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î, —â–æ –±—ñ–ª—å—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–µ –±—É–¥–µ ‚Äî –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –ø–æ–∫–∞–∑—É—î –Ω–æ—Ä–º–∞–ª—å–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫—Ä–∏—Ç—Ç—è –∫–∞–Ω–∞–ª—É.

```rust
use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();
    
    // –ü–æ—Ç—ñ–∫-–≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –Ω–∞–¥—Å–∏–ª–∞—î —Ç—Ä–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è
    thread::spawn(move || {
        for i in 1..=3 {
            tx.send(i).unwrap();
            println!("[–í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫] –ù–∞–¥—ñ—Å–ª–∞–Ω–æ: {}", i);
        }
        // tx –≤–∏—Ö–æ–¥–∏—Ç—å –∑—ñ scope —Ç—É—Ç ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π drop
        println!("[–í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫] –ó–∞–≤–µ—Ä—à—É—é —Ä–æ–±–æ—Ç—É, tx –±—É–¥–µ –∑–Ω–∏—â–µ–Ω–æ");
    });
    
    // –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    loop {
        match rx.recv() {
            Ok(value) => {
                println!("[–û—Ç—Ä–∏–º—É–≤–∞—á] –û—Ç—Ä–∏–º–∞–Ω–æ: {}", value);
            }
            Err(_) => {
                // RecvError –æ–∑–Ω–∞—á–∞—î: –≤—Å—ñ Sender –∑–Ω–∏—â–µ–Ω—ñ, —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è
                println!("[–û—Ç—Ä–∏–º—É–≤–∞—á] –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–æ, –≤–∏—Ö–æ–¥–∂—É –∑ —Ü–∏–∫–ª—É");
                break;
            }
        }
    }
    
    println!("–ü—Ä–æ–≥—Ä–∞–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ —É –æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ—Ü—ñ –Ω–∞–¥—Å–∏–ª–∞—î —á–∏—Å–ª–∞ 1, 2, 3.
2. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ü–∏–∫–ª—É `tx` –≤–∏—Ö–æ–¥–∏—Ç—å –∑—ñ scope —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∏—â—É—î—Ç—å—Å—è (`drop`).
3. –û—Ç—Ä–∏–º—É–≤–∞—á —É –≥–æ–ª–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –æ—Ç—Ä–∏–º—É—î 1, 2, 3 —á–µ—Ä–µ–∑ `recv()`.
4. –ü—ñ—Å–ª—è —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ –≤–∏–∫–ª–∏–∫—É `recv()` –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π (–≤—Å—ñ Sender –∑–Ω–∏—â–µ–Ω—ñ), —Ç–æ–º—É –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è `Err(RecvError)`.
5. –û—Ç—Ä–∏–º—É–≤–∞—á –≤–∏—Ö–æ–¥–∏—Ç—å –∑ —Ü–∏–∫–ª—É —ñ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è.

### 35.3.3 –ù–µ–±–ª–æ–∫—É—é—á—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏: try_recv() —Ç–∞ recv_timeout()

–ë–ª–æ–∫—É—é—á–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–µ –∑–∞–≤–∂–¥–∏ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å. –Ü–Ω–æ–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, –∞–±–æ –æ–±–º–µ–∂–∏—Ç–∏ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è.

**try_recv()** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ë–ï–ó –±–ª–æ–∫—É–≤–∞–Ω–Ω—è:

```rust
pub fn try_recv(&self) -> Result<T, TryRecvError>
```

–ü–æ–≤–µ—Ä—Ç–∞—î:
- `Ok(value)` ‚Äî —è–∫—â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —î
- `Err(TryRecvError::Empty)` ‚Äî —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è, –∞–ª–µ –∫–∞–Ω–∞–ª –≤—ñ–¥–∫—Ä–∏—Ç–∏–π
- `Err(TryRecvError::Disconnected)` ‚Äî –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π

**recv_timeout()** ‚Äî —á–µ–∫–∞—î –æ–±–º–µ–∂–µ–Ω–∏–π —á–∞—Å:

```rust
pub fn recv_timeout(&self, timeout: Duration) -> Result<T, RecvTimeoutError>
```

–ü–æ–≤–µ—Ä—Ç–∞—î:
- `Ok(value)` ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–æ –≤—á–∞—Å–Ω–æ
- `Err(RecvTimeoutError::Timeout)` ‚Äî —á–∞—Å –≤–∏—á–µ—Ä–ø–∞–Ω–æ
- `Err(RecvTimeoutError::Disconnected)` ‚Äî –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è try_recv() –¥–ª—è –Ω–µ–±–ª–æ–∫—É—é—á–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ recv_timeout() –¥–ª—è –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑ –æ–±–º–µ–∂–µ–Ω–∏–º —á–∞—Å–æ–º.

```rust
use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    let (tx, rx) = mpsc::channel();
    
    // –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é
    thread::spawn(move || {
        thread::sleep(Duration::from_millis(500));
        tx.send("–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∑–∞—Ç—Ä–∏–º–∫–∏").unwrap();
    });
    
    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è try_recv() ‚Äî –Ω–µ–±–ª–æ–∫—É—é—á–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
    println!("–ü–µ—Ä–µ–≤—ñ—Ä—è—é –Ω–µ–≥–∞–π–Ω–æ (try_recv):");
    match rx.try_recv() {
        Ok(msg) => println!("  –û—Ç—Ä–∏–º–∞–Ω–æ: {}", msg),
        Err(mpsc::TryRecvError::Empty) => println!("  –ß–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è, –ø—Ä–æ–¥–æ–≤–∂—É—é"),
        Err(mpsc::TryRecvError::Disconnected) => println!("  –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π"),
    }
    
    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è recv_timeout() ‚Äî –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑ —Ç–∞–π–º–∞—É—Ç–æ–º
    println!("\n–ß–µ–∫–∞—é –¥–æ 1 —Å–µ–∫—É–Ω–¥–∏ (recv_timeout):");
    match rx.recv_timeout(Duration::from_secs(1)) {
        Ok(msg) => println!("  –û—Ç—Ä–∏–º–∞–Ω–æ: {}", msg),
        Err(mpsc::RecvTimeoutError::Timeout) => println!("  –ß–∞—Å –≤–∏—á–µ—Ä–ø–∞–Ω–æ"),
        Err(mpsc::RecvTimeoutError::Disconnected) => println!("  –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–∏–π"),
    }
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ —á–µ–∫–∞—î 500 –º—Å –ø–µ—Ä–µ–¥ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è–º.
2. `try_recv()` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –Ω–µ–≥–∞–π–Ω–æ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î `Empty`, –æ—Å–∫—ñ–ª—å–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —â–µ –Ω–µ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ.
3. `recv_timeout(1 —Å–µ–∫—É–Ω–¥–∞)` —á–µ–∫–∞—î –¥–æ 1 —Å–µ–∫—É–Ω–¥–∏. –û—Å–∫—ñ–ª—å–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ 500 –º—Å, –æ—Ç—Ä–∏–º—É—î–º–æ `Ok(msg)`.

---

## 35.4 –ë–ê–ì–ê–¢–û –í–Ü–î–ü–†–ê–í–ù–ò–ö–Ü–í: –ö–õ–û–ù–£–í–ê–ù–ù–Ø SENDER

### 35.4.1 –ü–∞—Ç–µ—Ä–Ω multiple producers

–õ—ñ—Ç–µ—Ä–∞ "M" —É MPSC –æ–∑–Ω–∞—á–∞—î Multiple Producers ‚Äî –±–∞–≥–∞—Ç–æ –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤. –¶–µ –¥–æ—Å—è–≥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ **–∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è** Sender. –ö–æ–∂–µ–Ω –∫–ª–æ–Ω ‚Äî –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫, —â–æ –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —É —Å–≤–æ—î–º—É –ø–æ—Ç–æ—Ü—ñ.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —è–∫ —Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∏ –≤ –æ–∫—Ä–µ–º–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –∑–≤—ñ—Ç–∏ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –¥–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞.

**–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á—ñ:** –°–∏–º—É–ª—é–≤–∞—Ç–∏ —Ç—Ä—å–æ—Ö –∞–≥–µ–Ω—Ç—ñ–≤-—Ä–æ–∑–≤—ñ–¥–Ω–∏–∫—ñ–≤, –∫–æ–∂–µ–Ω –∑ —è–∫–∏—Ö –≤–∏–∫–æ–Ω—É—î –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è —É —Å–≤–æ—î–º—É —Å–µ–∫—Ç–æ—Ä—ñ —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î –∑–≤—ñ—Ç–∏ –ø—Ä–æ –≤–∏—è–≤–ª–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ –¥–æ —Ü–µ–Ω—Ç—Ä—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è.

```rust
use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞–Ω–∞–ª –¥–ª—è –∑–≤—ñ—Ç—ñ–≤ –∞–≥–µ–Ω—Ç—ñ–≤
    let (tx, rx) = mpsc::channel();
    
    // –°—Ç–≤–æ—Ä—é—î–º–æ —Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∏, –∫–æ–∂–µ–Ω —É —Å–≤–æ—î–º—É –ø–æ—Ç–æ—Ü—ñ
    for agent_id in 1..=3 {
        // –í–ê–ñ–õ–ò–í–û: –∫–ª–æ–Ω—É—î–º–æ tx –ü–ï–†–ï–î spawn, –Ω–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ closure
        // –ö–æ–∂–µ–Ω –∞–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î —Å–≤–æ—é –∫–æ–ø—ñ—é –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞
        let tx_clone = tx.clone();
        
        thread::spawn(move || {
            // –ö–æ–∂–µ–Ω –∞–≥–µ–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î 3 –∑–≤—ñ—Ç–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
            for report_num in 1..=3 {
                // –°–∏–º—É–ª—é—î–º–æ —á–∞—Å –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è ‚Äî —Ä—ñ–∑–Ω–∏–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
                let patrol_time = Duration::from_millis(100 * agent_id as u64);
                thread::sleep(patrol_time);
                
                // –§–æ—Ä–º—É—î–º–æ —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î–º–æ –∑–≤—ñ—Ç
                let report = format!("–ê–≥–µ–Ω—Ç-{}: –ó–≤—ñ—Ç #{} ‚Äî —Å–µ–∫—Ç–æ—Ä —á–∏—Å—Ç–∏–π", agent_id, report_num);
                tx_clone.send(report).expect("–¶–µ–Ω—Ç—Ä –∫–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π");
            }
            println!("[–ê–≥–µ–Ω—Ç-{}] –ü–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ", agent_id);
        });
    }
    
    // –ö–†–ò–¢–ò–ß–ù–û: drop –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ tx!
    // –Ø–∫—â–æ —Ü—å–æ–≥–æ –Ω–µ –∑—Ä–æ–±–∏—Ç–∏, –∫–∞–Ω–∞–ª –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–∞–∫—Ä–∏—î—Ç—å—Å—è,
    // –æ—Å–∫—ñ–ª—å–∫–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π tx –≤—Å–µ —â–µ "–∂–∏–≤–∏–π" —É –≥–æ–ª–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ
    drop(tx);
    
    // –¶–µ–Ω—Ç—Ä –∫–µ—Ä—É–≤–∞–Ω–Ω—è –æ—Ç—Ä–∏–º—É—î –≤—Å—ñ –∑–≤—ñ—Ç–∏
    println!("[–¶–µ–Ω—Ç—Ä] –û—á—ñ–∫—É—é –∑–≤—ñ—Ç–∏ –≤—ñ–¥ –∞–≥–µ–Ω—Ç—ñ–≤...\n");
    
    // –Ü—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ rx –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è, –∫–æ–ª–∏ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
    for report in rx {
        println!("[–¶–µ–Ω—Ç—Ä] –û—Ç—Ä–∏–º–∞–Ω–æ: {}", report);
    }
    
    println!("\n[–¶–µ–Ω—Ç—Ä] –í—Å—ñ –∞–≥–µ–Ω—Ç–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è");
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ spawn:** `tx.clone()` —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É –∫–æ–ø—ñ—é Sender. –ö–æ–∂–µ–Ω –∫–ª–æ–Ω –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π —ñ –º–æ–∂–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —É —Ç–æ–π —Å–∞–º–∏–π –∫–∞–Ω–∞–ª.

2. **–¢—Ä–∏ –∞–≥–µ–Ω—Ç–∏ = —Ç—Ä–∏ –∫–ª–æ–Ω–∏:** –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫-–∞–≥–µ–Ω—Ç –≤–æ–ª–æ–¥—ñ—î —Å–≤–æ—ó–º `tx_clone`. –í–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ –∑–≤—ñ—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ.

3. **Drop –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ tx:** –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ! –ü—ñ—Å–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è —É –Ω–∞—Å —î 4 Sender: –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π `tx` —Ç–∞ —Ç—Ä–∏ `tx_clone`. –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—î—Ç—å—Å—è –ª–∏—à–µ –∫–æ–ª–∏ –í–°–Ü Sender –∑–Ω–∏—â–µ–Ω—ñ. –Ø–∫—â–æ –∑–∞–±—É—Ç–∏ `drop(tx)`, —ñ—Ç–µ—Ä–∞—Ü—ñ—è `for report in rx` –±—É–¥–µ –≤—ñ—á–Ω–æ—é.

4. **–ü–æ—Ä—è–¥–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:** –û—Å–∫—ñ–ª—å–∫–∏ –∞–≥–µ–Ω—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∑–∞—Ç—Ä–∏–º–∫–∞–º–∏, –ø–æ—Ä—è–¥–æ–∫ –∑–≤—ñ—Ç—ñ–≤ –Ω–µ –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏–π. –û–¥–Ω–∞–∫ –∑–≤—ñ—Ç–∏ –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∑–∞–≤–∂–¥–∏ –≤–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω—ñ –º—ñ–∂ —Å–æ–±–æ—é (–∑–≤—ñ—Ç #1 –ø–µ—Ä–µ–¥ #2 –ø–µ—Ä–µ–¥ #3).

5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:** –ö–æ–ª–∏ –≤—Å—ñ Sender –∑–Ω–∏—â–µ–Ω—ñ (—Ç—Ä–∏ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—è + –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π drop'–Ω—É—Ç–∏–π), `rx` —è–∫ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è, —ñ —Ü–∏–∫–ª `for` –≤–∏—Ö–æ–¥–∏—Ç—å.

### 35.4.2 Receiver —è–∫ Iterator

Receiver —Ä–µ–∞–ª—ñ–∑—É—î trait `Iterator`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –∫–∞–Ω–∞–ª—É:

```rust
// –¶—ñ —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∏ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω—ñ:

// 1. –Ø–≤–Ω–∏–π —Ü–∏–∫–ª –∑ recv()
while let Ok(msg) = rx.recv() {
    process(msg);
}

// 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è rx —è–∫ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –Ω–∞–ø—Ä—è–º—É
for msg in rx {
    process(msg);
}

// 3. –Ø–≤–Ω–∏–π –º–µ—Ç–æ–¥ iter()
for msg in rx.iter() {
    process(msg);
}
```

–Ü—Ç–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ (`Some(T)`), –ø–æ–∫–∏ –∫–∞–Ω–∞–ª –≤—ñ–¥–∫—Ä–∏—Ç–∏–π. –ö–æ–ª–∏ –≤—Å—ñ Sender –∑–Ω–∏—â–µ–Ω—ñ —ñ —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è, —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î `None`, –∑–∞–≤–µ—Ä—à—É—é—á–∏ —Ü–∏–∫–ª `for`.

---

## 35.5 –°–ò–ù–•–†–û–ù–ù–Ü –ö–ê–ù–ê–õ–ò: –ö–û–ù–¢–†–û–õ–¨ –®–í–ò–î–ö–û–°–¢–Ü

### 35.5.1 –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ—ó —á–µ—Ä–≥–∏

–ö–∞–Ω–∞–ª, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ `mpsc::channel()`, —î **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º** (–∞–±–æ **–Ω–µ–æ–±–º–µ–∂–µ–Ω–∏–º**). –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ `send()` –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–∏—Ç—Ç—î–≤–æ –¥–æ–¥–∞—î—Ç—å—Å—è –≤ —á–µ—Ä–≥—É —ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è. –ß–µ—Ä–≥–∞ —Ä–æ—Å—Ç–µ –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å.

–¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø—Ä–æ–±–ª–µ–º–∏: —è–∫—â–æ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –≥–µ–Ω–µ—Ä—É—î –¥–∞–Ω—ñ —à–≤–∏–¥—à–µ, –Ω—ñ–∂ –æ—Ç—Ä–∏–º—É–≤–∞—á –æ–±—Ä–æ–±–ª—è—î, —á–µ—Ä–≥–∞ –∑—Ä–æ—Å—Ç–∞—î –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ, —Å–ø–æ–∂–∏–≤–∞—é—á–∏ –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É –ø–∞–º'—è—Ç—å.

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä—ñ—é:**

```rust
// –®–≤–∏–¥–∫–∏–π –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ + –ø–æ–≤—ñ–ª—å–Ω–∏–π –æ—Ç—Ä–∏–º—É–≤–∞—á = –ø—Ä–æ–±–ª–µ–º–∞ –ø–∞–º'—è—Ç—ñ
let (tx, rx) = mpsc::channel();

thread::spawn(move || {
    for i in 0..10_000_000 {
        tx.send(vec![0u8; 1024]).unwrap();  // 1 KB –Ω–∞ –∫–æ–∂–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    }
    // –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ 10 GB —É —á–µ—Ä–∑—ñ, —è–∫—â–æ –æ—Ç—Ä–∏–º—É–≤–∞—á –ø–æ–≤—ñ–ª—å–Ω–∏–π!
});

for data in rx {
    // –ü–æ–≤—ñ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞
    std::thread::sleep(Duration::from_millis(10));
    process(data);
}
```

### 35.5.2 –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª –∑ backpressure

`mpsc::sync_channel(bound)` —Å—Ç–≤–æ—Ä—é—î **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π** (–∞–±–æ **–æ–±–º–µ–∂–µ–Ω–∏–π**) –∫–∞–Ω–∞–ª. –Ñ–º–Ω—ñ—Å—Ç—å —á–µ—Ä–≥–∏ –æ–±–º–µ–∂–µ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `bound`. –ö–æ–ª–∏ —á–µ—Ä–≥–∞ –ø–æ–≤–Ω–∞, `send()` **–±–ª–æ–∫—É—î—Ç—å—Å—è** –¥–æ –ø–æ—è–≤–∏ –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è.

–¶–µ–π –º–µ—Ö–∞–Ω—ñ–∑–º –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **backpressure** (–∑–≤–æ—Ä–æ—Ç–Ω–∏–π —Ç–∏—Å–∫) ‚Äî –ø–æ–≤—ñ–ª—å–Ω–∏–π –æ—Ç—Ä–∏–º—É–≤–∞—á –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø–æ–≤—ñ–ª—å–Ω—é—î —à–≤–∏–¥–∫–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ –∑–≤–∏—á–∞–π–Ω–∏–º —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º –∫–∞–Ω–∞–ª–æ–º –ø—Ä–∏ —à–≤–∏–¥–∫–æ–º—É –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—É —Ç–∞ –ø–æ–≤—ñ–ª—å–Ω–æ–º—É –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ.

```rust
use std::sync::mpsc;
use std::thread;
use std::time::{Duration, Instant};

fn main() {
    // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª –∑ —î–º–Ω—ñ—Å—Ç—é 2 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    let (tx, rx) = mpsc::sync_channel(2);
    
    // –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ 5 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    let sender = thread::spawn(move || {
        for i in 1..=5 {
            let start = Instant::now();
            println!("[Tx] –ù–∞–¥—Å–∏–ª–∞—é {}...", i);
            
            tx.send(i).unwrap();
            
            let elapsed = start.elapsed();
            println!("[Tx] –ù–∞–¥—ñ—Å–ª–∞–Ω–æ {} (–∑–∞–π–Ω—è–ª–æ {:?})", i, elapsed);
        }
        println!("[Tx] –í—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ");
    });
    
    // –ü–æ–≤—ñ–ª—å–Ω–∏–π –æ—Ç—Ä–∏–º—É–≤–∞—á ‚Äî –æ–±—Ä–æ–±–ª—è—î –ø–æ 1 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—é –∫–æ–∂–Ω—ñ 500 –º—Å
    let receiver = thread::spawn(move || {
        thread::sleep(Duration::from_secs(1));  // –ó–∞—Ç—Ä–∏–º–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º
        println!("\n[Rx] –ü–æ—á–∏–Ω–∞—é –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏...");
        
        for value in rx {
            println!("[Rx] –û—Ç—Ä–∏–º–∞–Ω–æ: {}", value);
            thread::sleep(Duration::from_millis(500));
        }
        println!("[Rx] –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏—Ç–æ");
    });
    
    sender.join().unwrap();
    receiver.join().unwrap();
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. –ö–∞–Ω–∞–ª —Å—Ç–≤–æ—Ä–µ–Ω–æ –∑ —î–º–Ω—ñ—Å—Ç—é 2.

2. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ —à–≤–∏–¥–∫–æ –Ω–∞–¥—Å–∏–ª–∞—î –ø–µ—Ä—à—ñ –¥–≤–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äî –≤–æ–Ω–∏ –ø–æ–º—ñ—â–∞—é—Ç—å—Å—è –≤ –±—É—Ñ–µ—Ä –º–∏—Ç—Ç—î–≤–æ.

3. –¢—Ä–µ—Ç—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –≤–ª–∞–∑–∏—Ç—å —É –±—É—Ñ–µ—Ä, `send(3)` –±–ª–æ–∫—É—î—Ç—å—Å—è.

4. –û—Ç—Ä–∏–º—É–≤–∞—á (–ø—ñ—Å–ª—è –ø–æ—á–∞—Ç–∫–æ–≤–æ—ó –∑–∞—Ç—Ä–∏–º–∫–∏) —á–∏—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è 1 ‚Äî –∑–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è –º—ñ—Å—Ü–µ.

5. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î—Ç—å—Å—è, –Ω–∞–¥—Å–∏–ª–∞—î 3, –∑–Ω–æ–≤—É –±–ª–æ–∫—É—î—Ç—å—Å—è –Ω–∞ 4.

6. –ü—Ä–æ—Ü–µ—Å –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è ‚Äî –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –æ–±–º–µ–∂–µ–Ω–∏–π —à–≤–∏–¥–∫—ñ—Å—Ç—é –æ—Ç—Ä–∏–º—É–≤–∞—á–∞.

**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª:**

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è |
|----------|--------------|
| –ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö | sync_channel ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–º'—è—Ç—ñ |
| –ö–æ—Ä–æ—Ç–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∫—Ä–∏—Ç–∏—á–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ | channel ‚Äî –º–∏—Ç—Ç—î–≤–µ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è |
| –í—ñ–¥–æ–º–∏–π –ø–æ–≤—ñ–ª—å–Ω–∏–π consumer | sync_channel ‚Äî backpressure |
| Event logging | channel ‚Äî –ª–æ–≥–∏ –Ω–µ –º–∞—é—Ç—å –±–ª–æ–∫—É–≤–∞—Ç–∏ |

---

## 35.6 –¢–ò–ü–û–í–Ü –ü–ê–¢–ï–†–ù–ò –ö–û–ú–£–ù–Ü–ö–ê–¶–Ü–á

### 35.6.1 –ü–∞—Ç–µ—Ä–Ω Fan-In: –∑–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**Fan-In** ‚Äî –±–∞–≥–∞—Ç–æ –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –≤ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª, –æ–¥–∏–Ω —Å–ø–æ–∂–∏–≤–∞—á –∞–≥—Ä–µ–≥—É—î. –¶–µ –ø—Ä–∏—Ä–æ–¥–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω –¥–ª—è MPSC –∫–∞–Ω–∞–ª—ñ–≤.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∑–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –æ–±—á–∏—Å–ª–µ–Ω—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Ö —Ä–æ–±–æ—á–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤. –ö–æ–∂–µ–Ω worker –æ–±—á–∏—Å–ª—é—î —Å—É–º—É —á–∏—Å–µ–ª —É —Å–≤–æ—î–º—É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ, —ñ –≥–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –∞–≥—Ä–µ–≥—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.

```rust
use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();
    
    // –†–æ–∑–¥—ñ–ª—è—î–º–æ —Ä–æ–±–æ—Ç—É –Ω–∞ 4 —á–∞—Å—Ç–∏–Ω–∏
    let ranges = vec![
        (1, 25),
        (26, 50),
        (51, 75),
        (76, 100),
    ];
    
    for (start, end) in ranges {
        let tx_clone = tx.clone();
        
        thread::spawn(move || {
            // –ö–æ–∂–µ–Ω worker –æ–±—á–∏—Å–ª—é—î —Å—É–º—É —Å–≤–æ–≥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É
            let partial_sum: u64 = (start..=end).sum();
            
            // –ù–∞–¥—Å–∏–ª–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –¥—ñ–∞–ø–∞–∑–æ–Ω
            tx_clone.send((start, end, partial_sum))
                .expect("–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π");
        });
    }
    
    // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π sender
    drop(tx);
    
    // –ê–≥—Ä–µ–≥—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
    let mut total = 0u64;
    for (start, end, partial) in rx {
        println!("–î—ñ–∞–ø–∞–∑–æ–Ω [{}-{}]: —Å—É–º–∞ = {}", start, end, partial);
        total += partial;
    }
    
    println!("\n–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ 1..100 = {}", total);
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: (100 * 101) / 2 = 5050
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. –†–æ–±–æ—Ç–∞ (—Å—É–º–∞ —á–∏—Å–µ–ª 1-100) —Ä–æ–∑–¥—ñ–ª—è—î—Ç—å—Å—è –Ω–∞ 4 –¥—ñ–∞–ø–∞–∑–æ–Ω–∏.
2. –ö–æ–∂–µ–Ω worker –æ—Ç—Ä–∏–º—É—î —Å–≤—ñ–π –¥—ñ–∞–ø–∞–∑–æ–Ω —ñ –æ–±—á–∏—Å–ª—é—î —á–∞—Å—Ç–∫–æ–≤—É —Å—É–º—É –Ω–µ–∑–∞–ª–µ–∂–Ω–æ.
3. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª —É –≤–∏–≥–ª—è–¥—ñ –∫–æ—Ä—Ç–µ–∂—É (start, end, sum).
4. –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –∞–≥—Ä–µ–≥—É—î –≤—Å—ñ —á–∞—Å—Ç–∫–æ–≤—ñ —Å—É–º–∏.
5. –ü–æ—Ä—è–¥–æ–∫ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π, –∞–ª–µ —Ü–µ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å (—Å—É–º–∞ –∫–æ–º—É—Ç–∞—Ç–∏–≤–Ω–∞).

### 35.6.2 –ü–∞—Ç–µ—Ä–Ω Pipeline: –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞

**Pipeline** ‚Äî –¥–∞–Ω—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –µ—Ç–∞–ø—ñ–≤ –æ–±—Ä–æ–±–∫–∏, –∫–æ–∂–µ–Ω –µ—Ç–∞–ø —É —Å–≤–æ—î–º—É –ø–æ—Ç–æ—Ü—ñ. –ö–∞–Ω–∞–ª–∏ –∑'—î–¥–Ω—É—é—Ç—å –µ—Ç–∞–ø–∏.

**–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó:** —Ü–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ç—Ä—å–æ—Ö–µ—Ç–∞–ø–Ω–∏–π –∫–æ–Ω–≤–µ—î—Ä –æ–±—Ä–æ–±–∫–∏ —á–∏—Å–µ–ª: –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è ‚Üí —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è ‚Üí —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è.

```rust
use std::sync::mpsc;
use std::thread;

fn main() {
    // –ö–∞–Ω–∞–ª –º—ñ–∂ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
    let (gen_tx, filter_rx) = mpsc::channel();
    
    // –ö–∞–Ω–∞–ª –º—ñ–∂ —Ñ—ñ–ª—å—Ç—Ä–æ–º —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä–æ–º
    let (filter_tx, transform_rx) = mpsc::channel();
    
    // –ï—Ç–∞–ø 1: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ‚Äî —Å—Ç–≤–æ—Ä—é—î —á–∏—Å–ª–∞ 1..20
    let generator = thread::spawn(move || {
        for i in 1..=20 {
            gen_tx.send(i).unwrap();
        }
        println!("[Generator] –ó–∞–≤–µ—Ä—à–µ–Ω–æ");
    });
    
    // –ï—Ç–∞–ø 2: –§—ñ–ª—å—Ç—Ä ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞—î —Ç—ñ–ª—å–∫–∏ –ø–∞—Ä–Ω—ñ
    let filter = thread::spawn(move || {
        for value in filter_rx {
            if value % 2 == 0 {
                filter_tx.send(value).unwrap();
            }
        }
        println!("[Filter] –ó–∞–≤–µ—Ä—à–µ–Ω–æ");
    });
    
    // –ï—Ç–∞–ø 3: –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä ‚Äî –ø—ñ–¥–Ω–æ—Å–∏—Ç—å –¥–æ –∫–≤–∞–¥—Ä–∞—Ç—É
    let transformer = thread::spawn(move || {
        for value in transform_rx {
            let squared = value * value;
            println!("[Output] {} ‚Üí {}", value, squared);
        }
        println!("[Transformer] –ó–∞–≤–µ—Ä—à–µ–Ω–æ");
    });
    
    // –ß–µ–∫–∞—î–º–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –µ—Ç–∞–ø—ñ–≤
    generator.join().unwrap();
    filter.join().unwrap();
    transformer.join().unwrap();
    
    println!("\nPipeline –∑–∞–≤–µ—Ä—à–µ–Ω–æ");
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä** –≤–∏—Ä–æ–±–ª—è—î —á–∏—Å–ª–∞ 1-20 —ñ –Ω–∞–¥—Å–∏–ª–∞—î –≤ –ø–µ—Ä—à–∏–π –∫–∞–Ω–∞–ª.
2. **–§—ñ–ª—å—Ç—Ä** –æ—Ç—Ä–∏–º—É—î —á–∏—Å–ª–∞, –ø—Ä–æ–ø—É—Å–∫–∞—î —Ç—ñ–ª—å–∫–∏ –ø–∞—Ä–Ω—ñ, –Ω–∞–¥—Å–∏–ª–∞—î –¥–∞–ª—ñ.
3. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä** –æ—Ç—Ä–∏–º—É—î –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω—ñ —á–∏—Å–ª–∞, –≤–∏–≤–æ–¥–∏—Ç—å —ó—Ö –∫–≤–∞–¥—Ä–∞—Ç–∏.

–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∫–∞—Å–∫–∞–¥–Ω–æ:
1. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫—ñ–Ω—á—É—î ‚Äî `gen_tx` –∑–Ω–∏—â—É—î—Ç—å—Å—è ‚Äî –ø–µ—Ä—à–∏–π –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.
2. –§—ñ–ª—å—Ç—Ä –≤–∏—Ö–æ–¥–∏—Ç—å –∑ —Ü–∏–∫–ª—É `for` ‚Äî `filter_tx` –∑–Ω–∏—â—É—î—Ç—å—Å—è ‚Äî –¥—Ä—É–≥–∏–π –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.
3. –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä –≤–∏—Ö–æ–¥–∏—Ç—å –∑ —Ü–∏–∫–ª—É.

---

## 35.7 –ö–ê–ù–ê–õ–ò –î–õ–Ø –†–û–Æ –ê–ì–ï–ù–¢–Ü–í

### 35.7.1 –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó —Ä–æ—é

–î–ª—è —Ä–æ—é –ë–ü–õ–ê —Ç–∏–ø–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—î–¥–Ω—É—î –∫–∞–Ω–∞–ª–∏ –∑—ñ —Å–ø—ñ–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º:

```text
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ        –¶–ï–ù–¢–† –ö–ï–†–£–í–ê–ù–ù–Ø              ‚îÇ
                    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
                    ‚îÇ  ‚îÇ  –û–±—Ä–æ–±–Ω–∏–∫ –∑–≤—ñ—Ç—ñ–≤              ‚îÇ  ‚îÇ
                    ‚îÇ  ‚îÇ  (—á–∏—Ç–∞—î –∑ –∫–∞–Ω–∞–ª—É –∑–≤—ñ—Ç—ñ–≤)      ‚îÇ  ‚îÇ
                    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
                    ‚îÇ              ‚îÇ                      ‚îÇ
                    ‚îÇ              ‚ñº                      ‚îÇ
                    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
                    ‚îÇ  ‚îÇ  Arc<RwLock<WorldMap>>        ‚îÇ  ‚îÇ
                    ‚îÇ  ‚îÇ  (—Å–ø—ñ–ª—å–Ω–∞ –∫–∞—Ä—Ç–∞ —Å–≤—ñ—Ç—É)        ‚îÇ  ‚îÇ
                    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚ñ≤
                                   ‚îÇ –ö–∞–Ω–∞–ª –∑–≤—ñ—Ç—ñ–≤ (MPSC)
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ                      ‚îÇ                      ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ   –î—Ä–æ–Ω 1    ‚îÇ       ‚îÇ   –î—Ä–æ–Ω 2    ‚îÇ       ‚îÇ   –î—Ä–æ–Ω 3    ‚îÇ
     ‚îÇ (–†–æ–∑–≤—ñ–¥–Ω–∏–∫) ‚îÇ       ‚îÇ (–†–æ–∑–≤—ñ–¥–Ω–∏–∫) ‚îÇ       ‚îÇ (–®—Ç—É—Ä–º–æ–≤–∏–∫) ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 35.7.2 –¢–∏–ø–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

–î–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ—ó –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –≤–∏–∑–Ω–∞—á–∞—î–º–æ enum –∑ –º–æ–∂–ª–∏–≤–∏–º–∏ —Ç–∏–ø–∞–º–∏ –∑–≤—ñ—Ç—ñ–≤:

```rust
/// –ü–æ–∑–∏—Ü—ñ—è —É 2D –ø—Ä–æ—Å—Ç–æ—Ä—ñ
#[derive(Debug, Clone, Copy)]
struct Position {
    x: f64,
    y: f64,
}

/// –¢–∏–ø–∏ –∑–≤—ñ—Ç—ñ–≤, —â–æ –∞–≥–µ–Ω—Ç–∏ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—É
#[derive(Debug)]
enum AgentReport {
    /// –ê–≥–µ–Ω—Ç –æ–Ω–æ–≤–ª—é—î —Å–≤–æ—é –ø–æ–∑–∏—Ü—ñ—é
    PositionUpdate {
        agent_id: u32,
        position: Position,
    },
    
    /// –ê–≥–µ–Ω—Ç –≤–∏—è–≤–∏–≤ —Ü—ñ–ª—å
    TargetDetected {
        agent_id: u32,
        target_position: Position,
        target_type: String,
    },
    
    /// –ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–≤ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—É –º—ñ—Å—ñ—é
    MissionComplete {
        agent_id: u32,
        success: bool,
        details: String,
    },
    
    /// –ê–≥–µ–Ω—Ç –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º—É
    Alert {
        agent_id: u32,
        severity: AlertSeverity,
        message: String,
    },
}

#[derive(Debug)]
enum AlertSeverity {
    Info,
    Warning,
    Critical,
}
```

### 35.7.3 –ü–æ–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó —Ä–æ—é

**–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á—ñ:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É, –¥–µ –∫—ñ–ª—å–∫–∞ –∞–≥–µ–Ω—Ç—ñ–≤-—Ä–æ–∑–≤—ñ–¥–Ω–∏–∫—ñ–≤ –ø–∞—Ç—Ä—É–ª—é—é—Ç—å —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—é, –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –∑–≤—ñ—Ç–∏ –ø—Ä–æ —Å–≤–æ—é –ø–æ–∑–∏—Ü—ñ—é —Ç–∞ –≤–∏—è–≤–ª–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ –¥–æ —Ü–µ–Ω—Ç—Ä—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è, —è–∫–∏–π –∞–≥—Ä–µ–≥—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —Ç–∞ –≤–∏–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

```rust
use std::sync::mpsc::{self, Sender};
use std::thread;
use std::time::Duration;

/// –ü–æ–∑–∏—Ü—ñ—è –∞–≥–µ–Ω—Ç–∞ —É 2D –ø—Ä–æ—Å—Ç–æ—Ä—ñ
#[derive(Debug, Clone, Copy)]
struct Position {
    x: f64,
    y: f64,
}

/// –¢–∏–ø–∏ –∑–≤—ñ—Ç—ñ–≤ –≤—ñ–¥ –∞–≥–µ–Ω—Ç—ñ–≤
#[derive(Debug)]
enum AgentReport {
    PositionUpdate { agent_id: u32, position: Position },
    TargetDetected { agent_id: u32, position: Position },
    MissionComplete { agent_id: u32 },
}

/// –§—É–Ω–∫—Ü—ñ—è, —â–æ —Å–∏–º—É–ª—é—î —Ä–æ–±–æ—Ç—É –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
fn run_agent(agent_id: u32, tx: Sender<AgentReport>) {
    let mut position = Position { 
        x: agent_id as f64 * 10.0, 
        y: 0.0 
    };
    
    // –°–∏–º—É–ª—è—Ü—ñ—è –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è: 5 –∫—Ä–æ–∫—ñ–≤
    for step in 0..5 {
        // –†—É—Ö –∞–≥–µ–Ω—Ç–∞
        position.x += 2.0;
        position.y += 1.0;
        
        // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó
        tx.send(AgentReport::PositionUpdate { 
            agent_id, 
            position 
        }).expect("–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π");
        
        // –Ü–Ω–æ–¥—ñ "–≤–∏—è–≤–ª—è—î–º–æ" —Ü—ñ–ª—å (–∫–æ–∂–µ–Ω —Ç—Ä–µ—Ç—ñ–π –∫—Ä–æ–∫)
        if step % 3 == 1 {
            let target_pos = Position {
                x: position.x + 5.0,
                y: position.y + 5.0,
            };
            tx.send(AgentReport::TargetDetected { 
                agent_id, 
                position: target_pos 
            }).expect("–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π");
        }
        
        // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–æ—Å—Ç—ñ —Å–∏–º—É–ª—è—Ü—ñ—ó
        thread::sleep(Duration::from_millis(100));
    }
    
    // –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –º—ñ—Å—ñ—ó
    tx.send(AgentReport::MissionComplete { agent_id })
        .expect("–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π");
}

fn main() {
    println!("=== –°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ—î–º –ë–ü–õ–ê ===\n");
    
    // –ö–∞–Ω–∞–ª –¥–ª—è –∑–≤—ñ—Ç—ñ–≤ –≤—ñ–¥ –∞–≥–µ–Ω—Ç—ñ–≤ –¥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞
    let (tx, rx) = mpsc::channel();
    
    // –ó–∞–ø—É—Å–∫–∞—î–º–æ 3 –∞–≥–µ–Ω—Ç–∏
    let agent_count = 3;
    for agent_id in 1..=agent_count {
        let tx_clone = tx.clone();
        thread::spawn(move || {
            println!("[–ê–≥–µ–Ω—Ç {}] –ó–∞–ø—É—â–µ–Ω–æ –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è", agent_id);
            run_agent(agent_id, tx_clone);
            println!("[–ê–≥–µ–Ω—Ç {}] –ó–∞–≤–µ—Ä—à–µ–Ω–æ", agent_id);
        });
    }
    
    // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π sender
    drop(tx);
    
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –æ–±—Ä–æ–±–ª—è—î –∑–≤—ñ—Ç–∏
    let mut targets_detected = 0;
    let mut missions_complete = 0;
    
    for report in rx {
        match report {
            AgentReport::PositionUpdate { agent_id, position } => {
                println!("[–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä] –ê–≥–µ–Ω—Ç {} –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó ({:.1}, {:.1})", 
                         agent_id, position.x, position.y);
            }
            AgentReport::TargetDetected { agent_id, position } => {
                println!("[–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä] üéØ –ê–≥–µ–Ω—Ç {} –≤–∏—è–≤–∏–≤ —Ü—ñ–ª—å –Ω–∞ ({:.1}, {:.1})", 
                         agent_id, position.x, position.y);
                targets_detected += 1;
            }
            AgentReport::MissionComplete { agent_id } => {
                println!("[–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä] ‚úì –ê–≥–µ–Ω—Ç {} –∑–∞–≤–µ—Ä—à–∏–≤ –º—ñ—Å—ñ—é", agent_id);
                missions_complete += 1;
            }
        }
    }
    
    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    println!("\n=== –ü—ñ–¥—Å—É–º–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ—ó ===");
    println!("–ê–≥–µ–Ω—Ç—ñ–≤ –∑–∞–≤–µ—Ä—à–∏–ª–æ –º—ñ—Å—ñ—é: {}/{}", missions_complete, agent_count);
    println!("–í–∏—è–≤–ª–µ–Ω–æ —Ü—ñ–ª–µ–π: {}", targets_detected);
}
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π –∫–æ–¥:**

1. **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** –¢—Ä–∏ –∞–≥–µ–Ω—Ç–∏ –≤ –æ–∫—Ä–µ–º–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –∑–≤—ñ—Ç–∏ —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω–∏–π –∫–∞–Ω–∞–ª –¥–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ.

2. **–§—É–Ω–∫—Ü—ñ—è –∞–≥–µ–Ω—Ç–∞ (`run_agent`):**
   - –ü—Ä–∏–π–º–∞—î `Sender` –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤
   - –°–∏–º—É–ª—é—î —Ä—É—Ö –ø–æ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó (5 –∫—Ä–æ–∫—ñ–≤)
   - –ù–∞–¥—Å–∏–ª–∞—î `PositionUpdate` –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ
   - –ù–∞–¥—Å–∏–ª–∞—î `TargetDetected`, –∫–æ–ª–∏ "–≤–∏—è–≤–ª—è—î" —Ü—ñ–ª—å
   - –ó–∞–≤–µ—Ä—à—É—î `MissionComplete`

3. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä:**
   - –û—Ç—Ä–∏–º—É—î –≤—Å—ñ –∑–≤—ñ—Ç–∏ —á–µ—Ä–µ–∑ —ñ—Ç–µ—Ä–∞—Ü—ñ—é –ø–æ `rx`
   - –ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î –∑–∞ —Ç–∏–ø–æ–º —á–µ—Ä–µ–∑ `match`
   - –í–µ–¥–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

4. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è:**
   - –ö–æ–ª–∏ –≤—Å—ñ –∞–≥–µ–Ω—Ç–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —ñ —ó—Ö–Ω—ñ `tx_clone` –∑–Ω–∏—â–µ–Ω—ñ
   - –ü–ª—é—Å –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π `tx` drop'–Ω—É—Ç–∏–π
   - –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, —Ü–∏–∫–ª `for` –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è

---

## 35.8 –õ–ê–ë–û–†–ê–¢–û–†–ù–ê –†–û–ë–û–¢–ê

### –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏

–ó–∞–∫—Ä—ñ–ø–∏—Ç–∏ –Ω–∞–≤–∏—á–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—ñ–≤ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—ó –ø–æ—Ç–æ–∫—ñ–≤ —É –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.

### –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è (2 –±–∞–ª–∏)

1. –ü–æ—è—Å–Ω—ñ—Ç—å, —á–æ–º—É `Sender` –º–æ–∂–Ω–∞ –∫–ª–æ–Ω—É–≤–∞—Ç–∏, –∞ `Receiver` ‚Äî –Ω—ñ.
2. –£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `recv()` —Ç–∞ `try_recv()`? –ù–∞–≤–µ–¥—ñ—Ç—å —Å—Ü–µ–Ω–∞—Ä—ñ–π, –∫–æ–ª–∏ –∫–æ–∂–µ–Ω –∑ –Ω–∏—Ö –¥–æ—Ä–µ—á–Ω–∏–π.
3. –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –∑–∞–±—É—Ç–∏ `drop(tx)` —É –ø–∞—Ç–µ—Ä–Ω—ñ –∑ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è–º –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—ñ–≤?

### –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ó–±—ñ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó (4 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –∑–±–æ—Ä—É —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó:
- 4 —Å–µ–Ω—Å–æ—Ä–∏, –∫–æ–∂–µ–Ω —É —Å–≤–æ—î–º—É –ø–æ—Ç–æ—Ü—ñ
- –ö–æ–∂–µ–Ω —Å–µ–Ω—Å–æ—Ä –≥–µ–Ω–µ—Ä—É—î 10 –ø–æ–∫–∞–∑–∞–Ω—å –∑ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º —Ç–∞ —á–∞—Å–æ–≤–æ—é –º—ñ—Ç–∫–æ—é
- –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑–±–∏—Ä–∞—î –ø–æ–∫–∞–∑–∞–Ω–Ω—è —Ç–∞ –æ–±—á–∏—Å–ª—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞ (–º—ñ–Ω—ñ–º—É–º, –º–∞–∫—Å–∏–º—É–º, —Å–µ—Ä–µ–¥–Ω—î)

### –ó–∞–≤–¥–∞–Ω–Ω—è 2: Pipeline –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å (3 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ 3-–µ—Ç–∞–ø–Ω–∏–π pipeline:
1. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä**: —Å—Ç–≤–æ—Ä—é—î 10 "–∑–æ–±—Ä–∞–∂–µ–Ω—å" (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—Ö —è–∫ `Vec<u8>` —Ä–æ–∑–º—ñ—Ä–æ–º 100)
2. **–§—ñ–ª—å—Ç—Ä**: –ø—Ä–æ–ø—É—Å–∫–∞—î —Ç—ñ–ª—å–∫–∏ "—Å–≤—ñ—Ç–ª—ñ" –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è > 128)
3. **–ö–æ–º–ø—Ä–µ—Å–æ—Ä**: "—Å—Ç–∏—Å–∫–∞—î" –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∑–∞–ª–∏—à–∞—î –∫–æ–∂–µ–Ω 10-–π –µ–ª–µ–º–µ–Ω—Ç)

### –ó–∞–≤–¥–∞–Ω–Ω—è 3: –¢–∞–π–º–∞—É—Ç –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ (3 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `wait_for_command`, —â–æ:
- –ß–µ–∫–∞—î –∫–æ–º–∞–Ω–¥—É –≤—ñ–¥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª
- –ú–∞—î —Ç–∞–π–º–∞—É—Ç 2 —Å–µ–∫—É–Ω–¥–∏
- –ü–æ–≤–µ—Ä—Ç–∞—î `Ok(Command)` –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
- –ü–æ–≤–µ—Ä—Ç–∞—î `Err("Timeout")` –ø—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ —á–∞—Å—É
- –ü–æ–≤–µ—Ä—Ç–∞—î `Err("Disconnected")` –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –∫–∞–Ω–∞–ª—É

---

## 35.9 –ü–û–®–ò–†–ï–ù–Ü –ü–û–ú–ò–õ–ö–ò –¢–ê TROUBLESHOOTING

### –ü–æ–º–∏–ª–∫–∞: –ö–∞–Ω–∞–ª –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–æ–≥—Ä–∞–º–∞ "–∑–∞–≤–∏—Å–∞—î" –Ω–∞ `for msg in rx` –∞–±–æ `rx.recv()`.

**–ü—Ä–∏—á–∏–Ω–∞:** –î–µ—Å—å –∑–∞–ª–∏—à–∏–≤—Å—è –∂–∏–≤–∏–π `Sender`, —Ç–æ–º—É –∫–∞–Ω–∞–ª –≤–≤–∞–∂–∞—î—Ç—å—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏–º.

**–ù–∞–π—á–∞—Å—Ç—ñ—à–∞ –ø—Ä–∏—á–∏–Ω–∞:** –ó–∞–±—É–ª–∏ `drop(tx)` –ø—ñ—Å–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è:

```rust
let (tx, rx) = mpsc::channel();
let tx_clone = tx.clone();

thread::spawn(move || { tx_clone.send(1).unwrap(); });

// –ü–û–ú–ò–õ–ö–ê: –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π tx –≤—Å–µ —â–µ –∂–∏–≤–∏–π!
for msg in rx {  // –¶–∏–∫–ª –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
    println!("{}", msg);
}
```

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–≤–∂–¥–∏ drop'–∞–π—Ç–µ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π sender –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–ª–æ–Ω—ñ–≤:

```rust
drop(tx);  // –î–æ–¥–∞–π—Ç–µ —Ü–µ–π —Ä—è–¥–æ–∫
```

### –ü–æ–º–∏–ª–∫–∞: "sending on a closed channel"

**–°–∏–º–ø—Ç–æ–º:** `send()` –ø–æ–≤–µ—Ä—Ç–∞—î `Err(SendError(...))`.

**–ü—Ä–∏—á–∏–Ω–∞:** `Receiver` –∑–Ω–∏—â–µ–Ω–æ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è.

**–ü—Ä–∏–∫–ª–∞–¥:**

```rust
let (tx, rx) = mpsc::channel();
drop(rx);  // –û—Ç—Ä–∏–º—É–≤–∞—á –∑–Ω–∏—â–µ–Ω–æ
tx.send(1).unwrap();  // panic: sending on a closed channel
```

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `Receiver` –∂–∏–≤–µ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–≤–≥–æ. –ó–∞–∑–≤–∏—á–∞–π ‚Äî –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.

### –ü–æ–º–∏–ª–∫–∞: Deadlock –∑ sync_channel

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–æ–≥—Ä–∞–º–∞ –∑–∞–≤–∏—Å–∞—î –Ω–∞ `send()`.

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª –∑ bound=0 –∞–±–æ –¥—É–∂–µ –º–∞–ª–∏–º bound, –¥–µ –æ—Ç—Ä–∏–º—É–≤–∞—á —â–µ –Ω–µ –≥–æ—Ç–æ–≤–∏–π —á–∏—Ç–∞—Ç–∏.

```rust
let (tx, rx) = mpsc::sync_channel(0);  // Rendezvous channel

// –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –≤—ñ–¥—Ä–∞–∑—É –Ω–∞–¥—Å–∏–ª–∞—î
tx.send(1).unwrap();  // –ó–ê–í–ò–°–ù–ï! –ù–µ–º–∞—î –∫–æ–º—É –æ—Ç—Ä–∏–º–∞—Ç–∏

// rx.recv() –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ
```

**–†—ñ—à–µ–Ω–Ω—è:** –î–ª—è sync_channel –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–∫–æ–Ω—É–π—Ç–µ—Å—è, —â–æ –æ—Ç—Ä–∏–º—É–≤–∞—á –ø—Ä–∞—Ü—é—î –≤ –æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ—Ü—ñ –∞–±–æ —Å–ø–æ—á–∞—Ç–∫—É —Å—Ç–∞—Ä—Ç—É—î.

---

## 35.10 –†–ï–ó–Æ–ú–ï

### –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ä–æ–∑–¥—ñ–ª—É

**–ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** ‚Äî —Ü–µ –ø–∞—Ä–∞–¥–∏–≥–º–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, –¥–µ –ø–æ—Ç–æ–∫–∏ –∫–æ–º—É–Ω—ñ–∫—É—é—Ç—å —á–µ—Ä–µ–∑ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –ø–∞–º'—è—Ç—ñ. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –≤–æ–ª–æ–¥—ñ—î —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏ –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ, —â–æ —É—Å—É–≤–∞—î –≥–æ–Ω–∫–∏ –¥–∞–Ω–∏—Ö.

**–ö–∞–Ω–∞–ª–∏ MPSC** (Multiple Producer, Single Consumer) ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –ø–µ—Ä–µ–¥–∞—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É Rust. –ë–∞–≥–∞—Ç–æ –ø–æ—Ç–æ–∫—ñ–≤ –º–æ–∂—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —á–µ—Ä–µ–∑ –∫–ª–æ–Ω–æ–≤–∞–Ω—ñ Sender, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫ –æ—Ç—Ä–∏–º—É—î —á–µ—Ä–µ–∑ Receiver.

**Ownership transfer** ‚Äî –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –ø–µ—Ä–µ–º—ñ—â—É—î –≤–æ–ª–æ–¥—ñ–Ω–Ω—è. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –≤—Ç—Ä–∞—á–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö, –æ—Ç—Ä–∏–º—É–≤–∞—á —Å—Ç–∞—î –Ω–æ–≤–∏–º –≤–ª–∞—Å–Ω–∏–∫–æ–º. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–æ–º.

**–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∫–∞–Ω–∞–ª–∏** (`sync_channel`) –æ–±–º–µ–∂—É—é—Ç—å —î–º–Ω—ñ—Å—Ç—å —á–µ—Ä–≥–∏, —Å—Ç–≤–æ—Ä—é—é—á–∏ backpressure ‚Äî –º–µ—Ö–∞–Ω—ñ–∑–º, —â–æ —Å–ø–æ–≤—ñ–ª—å–Ω—é—î —à–≤–∏–¥–∫–∏—Ö –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–æ —à–≤–∏–¥–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ–ª—å–Ω–∏—Ö —Å–ø–æ–∂–∏–≤–∞—á—ñ–≤.

### –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∑–∞–ø–∞–º'—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è

- ‚úÖ `Sender` –º–æ–∂–Ω–∞ –∫–ª–æ–Ω—É–≤–∞—Ç–∏, `Receiver` ‚Äî –Ω—ñ
- ‚úÖ –ö–∞–Ω–∞–ª –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –í–°–Ü `Sender` –∑–Ω–∏—â–µ–Ω—ñ
- ‚úÖ `drop(tx)` –ø—ñ—Å–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
- ‚úÖ `recv()` –±–ª–æ–∫—É—î –ø–æ—Ç—ñ–∫, `try_recv()` ‚Äî –Ω—ñ
- ‚úÖ –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö –∞–±–æ –∫–æ–Ω—Ç—Ä–æ–ª—é –ø–∞–º'—è—Ç—ñ ‚Äî `sync_channel`

### –ö–æ–ª–∏ –æ–±–∏—Ä–∞—Ç–∏ –∫–∞–Ω–∞–ª–∏

| –û–±–∏—Ä–∞–π—Ç–µ –∫–∞–Ω–∞–ª–∏ | –û–±–∏—Ä–∞–π—Ç–µ shared state |
|-----------------|----------------------|
| –î–∞–Ω—ñ "—Ç–µ—á—É—Ç—å" –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ | –ü–æ—Ç—Ä—ñ–±–µ–Ω —à–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤–µ–ª–∏–∫–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ |
| –ü–æ—Ç–æ–∫–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ | –ß–∞—Å—Ç–µ —á–∏—Ç–∞–Ω–Ω—è, —Ä—ñ–¥–∫—ñ—Å–Ω–∏–π –∑–∞–ø–∏—Å |
| Request-response –ø–∞—Ç–µ—Ä–Ω | –°–∫–ª–∞–¥–Ω–∞ —Ç–æ–ø–æ–ª–æ–≥—ñ—è –¥–æ—Å—Ç—É–ø—É |
| Producer-consumer | –û–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ |

---

## üîó –ó–í'–Ø–ó–û–ö –ó –ù–ê–°–¢–£–ü–ù–ò–ú –†–û–ó–î–Ü–õ–û–ú

–í–∏ –æ–ø–∞–Ω—É–≤–∞–ª–∏ —Ç—Ä–∏ –∫–ª—é—á–æ–≤—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ—Å—Ç—ñ Rust:
1. **–ü–æ—Ç–æ–∫–∏** ‚Äî –±–∞–∑–æ–≤–µ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
2. **–°–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω** (`Arc<Mutex>`, `Arc<RwLock>`) ‚Äî –¥–ª—è –¥–∞–Ω–∏—Ö –∑ –∫–æ–æ—Ä–¥–∏–Ω–æ–≤–∞–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º
3. **–ö–∞–Ω–∞–ª–∏** ‚Äî –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –º—ñ–∂ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏

–¢–µ–ø–µ—Ä —á–∞—Å –æ–±'—î–¥–Ω–∞—Ç–∏ –≤—Å—ñ —Ü—ñ –∑–Ω–∞–Ω–Ω—è —É –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ.

–£ **–†–æ–∑–¥—ñ–ª—ñ 36: –ü—Ä–∞–∫—Ç–∏–∫—É–º ‚Äî –õ–æ–∫–∞–ª—å–Ω–∏–π —Ä—ñ–π –∞–≥–µ–Ω—Ç—ñ–≤ v3.0** –≤–∏:
- –°—Ç–≤–æ—Ä–∏—Ç–µ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤—É —Å–∏–º—É–ª—è—Ü—ñ—é —Ä–æ—é –ë–ü–õ–ê
- –ü–æ—î–¥–Ω–∞—î—Ç–µ `Arc<RwLock>` –¥–ª—è —Å–ø—ñ–ª—å–Ω–æ—ó –∫–∞—Ä—Ç–∏ —Å–≤—ñ—Ç—É —Ç–∞ –∫–∞–Ω–∞–ª–∏ –¥–ª—è –∑–≤—ñ—Ç—ñ–≤
- –†–µ–∞–ª—ñ–∑—É—î—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—é –∫—ñ–ª—å–∫–æ—Ö –∞–≥–µ–Ω—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –ó–∞—Å—Ç–æ—Å—É—î—Ç–µ –ø–∞—Ç–µ—Ä–Ω–∏, –≤–∏–≤—á–µ–Ω—ñ –≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö

---

> **–ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä–æ–∑–¥—ñ–ª:** [–†–æ–∑–¥—ñ–ª 36: –ü—Ä–∞–∫—Ç–∏–∫—É–º ‚Äî –õ–æ–∫–∞–ª—å–Ω–∏–π —Ä—ñ–π –∞–≥–µ–Ω—Ç—ñ–≤ v3.0](./36_Practicum_v3.md)
