# –†–æ–∑–¥—ñ–ª 22: –¢—Ä–µ–π—Ç–∏ ‚Äî –±–∞–∑–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó

## –ê–Ω–æ—Ç–∞—Ü—ñ—è

–¶–µ–π —Ä–æ–∑–¥—ñ–ª –ø—Ä–∏—Å–≤—è—á–µ–Ω–∏–π –æ–¥–Ω–æ–º—É –∑ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –º–æ–≤–∏ Rust ‚Äî —Å–∏—Å—Ç–µ–º—ñ —Ç—Ä–µ–π—Ç—ñ–≤ (traits). –¢—Ä–µ–π—Ç–∏ —î –æ—Å–Ω–æ–≤–æ—é –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º—É –≤ Rust —ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–∏—Å–∞—Ç–∏ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–π –∫–æ–¥, —â–æ –ø—Ä–∞—Ü—é—î –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–∏—Ö. –í–∏ –¥—ñ–∑–Ω–∞—î—Ç–µ—Å—å, —â–æ —Ç–∞–∫–µ —Ç—Ä–µ–π—Ç, —è–∫ –≤—ñ–Ω –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ç–∞ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è, —ñ —á–æ–º—É —Ç—Ä–µ–π—Ç–∏ —î –±—ñ–ª—å—à –ø–æ—Ç—É–∂–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, –Ω—ñ–∂ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –≤ —ñ–Ω—à–∏—Ö –º–æ–≤–∞—Ö –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è. –û—Å–æ–±–ª–∏–≤—É —É–≤–∞–≥—É –ø—Ä–∏–¥—ñ–ª–µ–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º —Ç—Ä–µ–π—Ç–∞–º –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Rust ‚Äî Debug, Display, Clone, Copy, Default, PartialEq, Eq —Ç–∞ Hash. –¶—ñ —Ç—Ä–µ–π—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ø–æ–≤—Å—é–¥–Ω–æ —ñ —î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏, –≤–∏–≤–µ–¥–µ–Ω–Ω—è–º –¥–∞–Ω–∏—Ö —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è–º –æ–±'—î–∫—Ç—ñ–≤. –ù–∞ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö —ñ–∑ —Å–∏—Å—Ç–µ–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞–º–∏ –ë–ü–õ–ê –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —è–∫ —Ç—Ä–µ–π—Ç–∏ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≥–Ω—É—á–∫—É —Ç–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è.

---

## –¶—ñ–ª—ñ –Ω–∞–≤—á–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è —Ü—å–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É —Å—Ç—É–¥–µ–Ω—Ç –∑–º–æ–∂–µ:

1. –ü–æ—è—Å–Ω–∏—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—é —Ç—Ä–µ–π—Ç—ñ–≤ —Ç–∞ —ó—Ö —Ä–æ–ª—å —É —Å–∏—Å—Ç–µ–º—ñ —Ç–∏–ø—ñ–≤ Rust
2. –í–∏–∑–Ω–∞—á–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ —Ç—Ä–µ–π—Ç–∏ —Ç–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö —Ç–∏–ø—ñ–≤
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ö–∞–Ω—ñ–∑–º `derive` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ç—Ä–µ–π—Ç—ñ–≤
4. –†–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É —Ç—Ä–µ–π—Ç–∏ Debug, Display, Clone, Default, PartialEq —Ç–∞ Hash
5. –†–æ–∑—É–º—ñ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ Clone —Ç–∞ Copy, –º—ñ–∂ PartialEq —Ç–∞ Eq
6. –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ Hash —É–∑–≥–æ–¥–∂–µ–Ω–æ –∑ PartialEq –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ HashMap
7. –ó–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑–Ω–∞–Ω–Ω—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤, –ø—Ä–∏–¥–∞—Ç–Ω–∏—Ö –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–ª–µ–∫—Ü—ñ—è—Ö

---

## –ö–ª—é—á–æ–≤—ñ —Ç–µ—Ä–º—ñ–Ω–∏

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| –¢—Ä–µ–π—Ç (trait) | –ú–µ—Ö–∞–Ω—ñ–∑–º, —â–æ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–±—ñ—Ä –º–µ—Ç–æ–¥—ñ–≤, —è–∫—ñ —Ç–∏–ø –º–æ–∂–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏. –ê–Ω–∞–ª–æ–≥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –≤ —ñ–Ω—à–∏—Ö –º–æ–≤–∞—Ö, –∞–ª–µ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏ |
| –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞ | –ù–∞–¥–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π –º–µ—Ç–æ–¥—ñ–≤ —Ç—Ä–µ–π—Ç–∞ –¥–ª—è –ø–µ–≤–Ω–æ–≥–æ —Ç–∏–ø—É —á–µ—Ä–µ–∑ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `impl Trait for Type` |
| Derive | –ê—Ç—Ä–∏–±—É—Ç `#[derive(...)]`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç—Ä–µ–π—Ç–∞ |
| Debug | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ç—Ä–µ–π—Ç –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ, –∑—Ä—É—á–Ω–æ–º—É –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (—Ñ–æ—Ä–º–∞—Ç `{:?}`) |
| Display | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ç—Ä–µ–π—Ç –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ, –∑—Ä—É—á–Ω–æ–º—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ñ–æ—Ä–º–∞—Ç `{}`) |
| Clone | –¢—Ä–µ–π—Ç –¥–ª—è —è–≤–Ω–æ–≥–æ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `.clone()` |
| Copy | –ú–∞—Ä–∫–µ—Ä–Ω–∏–π —Ç—Ä–µ–π—Ç, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Ç–∏–ø—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏—Å—è –ø—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ –∑–∞–º—ñ—Å—Ç—å –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è |
| Default | –¢—Ä–µ–π—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
| PartialEq | –¢—Ä–µ–π—Ç –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ—Å—Ç—å (`==` —Ç–∞ `!=`) |
| Eq | –ú–∞—Ä–∫–µ—Ä–Ω–∏–π —Ç—Ä–µ–π—Ç, —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—ñ—Å—Ç—å –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (a == a –∑–∞–≤–∂–¥–∏ true) |
| Hash | –¢—Ä–µ–π—Ç –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Ö–µ—à-–∑–Ω–∞—á–µ–Ω–Ω—è, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∏–ø—É —è–∫ –∫–ª—é—á–∞ HashMap |

---

## –ú–æ—Ç–∏–≤–∞—Ü—ñ–π–Ω–∏–π –∫–µ–π—Å: —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î—Ç–µ —Å–∏—Å—Ç–µ–º—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ñ–ª–æ—Ç–æ–º –∞–≤—Ç–æ–Ω–æ–º–Ω–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤. –£ –≤–∞—à–æ–º—É —Ä–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—ñ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –∞–≥–µ–Ω—Ç—ñ–≤: –¥—Ä–æ–Ω-—Ä–æ–∑–≤—ñ–¥–Ω–∏–∫, —â–æ –ª—ñ—Ç–∞—î –≤ –ø–æ–≤—ñ—Ç—Ä—ñ; –Ω–∞–∑–µ–º–Ω–∏–π —Ä–æ–±–æ—Ç, —â–æ —Ä—É—Ö–∞—î—Ç—å—Å—è –∫–æ–ª–µ—Å–∞–º–∏; –ø—ñ–¥–≤–æ–¥–Ω–∏–π –∞–ø–∞—Ä–∞—Ç, —â–æ –ø–ª–∏–≤–µ –ø—ñ–¥ –≤–æ–¥–æ—é. –í—Å—ñ –≤–æ–Ω–∏ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å ‚Äî –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–º—ñ—â—É–≤–∞—Ç–∏—Å—è –¥–æ –∑–∞–¥–∞–Ω–æ—ó —Ç–æ—á–∫–∏. –û–¥–Ω–∞–∫ –∫–æ–∂–µ–Ω —Ä–æ–±–∏—Ç—å —Ü–µ –ø–æ-—Å–≤–æ—î–º—É: –¥—Ä–æ–Ω –ª–µ—Ç–∏—Ç—å, —Ä–æ–±–æ—Ç —ó–¥–µ, –ø—ñ–¥–≤–æ–¥–Ω–∏–π –∞–ø–∞—Ä–∞—Ç –ø–ª–∏–≤–µ.

–Ø–∫ –Ω–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–¥ —Ü–µ–Ω—Ç—Ä—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è, —â–æ –º–æ–∂–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –±—É–¥—å-—è–∫–æ–º—É –∞–≥–µ–Ω—Ç—É, –Ω–µ –∑–Ω–∞—é—á–∏ –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –π–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø—É? –ë–µ–∑ –º–µ—Ö–∞–Ω—ñ–∑–º—É –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó –¥–æ–≤–µ–ª–æ—Å—è –± –ø–∏—Å–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É –∞–≥–µ–Ω—Ç–∞:

```rust
fn send_drone_to(drone: &Drone, target: Position) { ... }
fn send_rover_to(rover: &Rover, target: Position) { ... }
fn send_submarine_to(sub: &Submarine, target: Position) { ... }
```

–¢—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å –ø–æ —Å—É—Ç—ñ –æ–¥–Ω–∞–∫–æ–≤—É —Ä–æ–±–æ—Ç—É ‚Äî –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å –∞–≥–µ–Ω—Ç–∞ –¥–æ —Ü—ñ–ª—ñ. –ê —è–∫—â–æ –∑–∞–≤—Ç—Ä–∞ —É —Ñ–ª–æ—Ç—ñ –∑'—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∏–π —Ç–∏–ø –∞–≥–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä –∞–±–æ –∞–≤—Ç–æ–Ω–æ–º–Ω–∏–π –∫–∞—Ç–µ—Ä? –î–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–∏—Å–∞—Ç–∏ —â–µ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é. –Ü —â–µ –æ–¥–Ω—É. –¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –Ω–µ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è.

–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–π—Ç—ñ–≤ Rust –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ –≤–∏—Ä—ñ—à—É—î —Ü—é –ø—Ä–æ–±–ª–µ–º—É. –¢—Ä–µ–π—Ç –≤–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç ‚Äî –Ω–∞–±—ñ—Ä –º–µ—Ç–æ–¥—ñ–≤, —è–∫—ñ —Ç–∏–ø –∑–æ–±–æ–≤'—è–∑—É—î—Ç—å—Å—è –Ω–∞–¥–∞—Ç–∏. –Ø–∫—â–æ —Ç–∏–ø —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç `Movable`, –≤—ñ–Ω –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –º–∞—î –º–µ—Ç–æ–¥ `move_to()`. –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –Ω–∞–ø–∏—Å–∞—Ç–∏ –æ–¥–Ω—É —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é:

```rust
fn send_agent_to(agent: &impl Movable, target: Position) { ... }
```

–¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–∏–º —Ç–∏–ø–æ–º, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç `Movable`. –î—Ä–æ–Ω, —Ä–æ–±–æ—Ç, –ø—ñ–¥–≤–æ–¥–Ω–∏–π –∞–ø–∞—Ä–∞—Ç, –∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä ‚Äî –≤—Å—ñ –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω—ñ –≤ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—â–æ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç—Ä–µ–π—Ç. –¢—Ä–µ–π—Ç–∏ ‚Äî —Ü–µ –æ—Å–Ω–æ–≤–∞ –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º—É –≤ Rust, –∞–Ω–∞–ª–æ–≥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —É Java —á–∏ C#, –∞–ª–µ –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏, —è–∫—ñ –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –≤ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ.

---

## 22.1 –©–æ —Ç–∞–∫–µ —Ç—Ä–µ–π—Ç

### 22.1.1 –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞

–¢—Ä–µ–π—Ç (–≤—ñ–¥ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ–≥–æ "trait" ‚Äî —Ä–∏—Å–∞, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞) ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤. –¢—Ä–µ–π—Ç –æ–ø–∏—Å—É—î, —â–æ —Ç–∏–ø –≤–º—ñ—î —Ä–æ–±–∏—Ç–∏, –Ω–µ –≤–∫–∞–∑—É—é—á–∏ —è–∫ —Å–∞–º–µ –≤—ñ–Ω —Ü–µ —Ä–æ–±–∏—Ç—å. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–π –∫–æ–¥, —â–æ –ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–∏–º —Ç–∏–ø–æ–º, —è–∫–∏–π –º–∞—î –ø–æ—Ç—Ä—ñ–±–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ.

–í —ñ–Ω—à–∏—Ö –º–æ–≤–∞—Ö –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–±–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –Ω–∞–∑–∏–≤–∞—é—Ç—å—Å—è –ø–æ-—Ä—ñ–∑–Ω–æ–º—É: —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –≤ Java —Ç–∞ C#, –ø—Ä–æ—Ç–æ–∫–æ–ª–∏ –≤ Swift —Ç–∞ Python, —Ç–∏–ø–∏-–∫–ª–∞—Å–∏ –≤ Haskell. –¢—Ä–µ–π—Ç–∏ Rust –Ω–∞–π–±—ñ–ª—å—à –±–ª–∏–∑—å–∫—ñ –¥–æ —Ç–∏–ø—ñ–≤-–∫–ª–∞—Å—ñ–≤ Haskell —ñ –º–∞—é—Ç—å –∫—ñ–ª—å–∫–∞ –≤–∞–∂–ª–∏–≤–∏—Ö –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç–µ–π:

1. –¢—Ä–µ–π—Ç –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–±—ñ—Ä –º–µ—Ç–æ–¥—ñ–≤ ‚Äî —ó—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä–∏ —Ç–∞, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
2. –ë—É–¥—å-—è–∫–∏–π —Ç–∏–ø –º–æ–∂–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Ç—Ä–µ–π—Ç ‚Äî –Ω–∞–≤—ñ—Ç—å –¥–ª—è —Ç–∏–ø—ñ–≤ –∑ —ñ–Ω—à–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫
3. –¢—Ä–µ–π—Ç–∏ –º–æ–∂—É—Ç—å –º–∞—Ç–∏ –ø–æ–≤'—è–∑–∞–Ω—ñ —Ç–∏–ø–∏ —Ç–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ ‚Äî –ø—Ä–æ —Ü–µ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –≤ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ
4. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó ‚Äî –≥–∞—Ä–∞–Ω—Ç—ñ—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ –±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–¢—Ä–µ–π—Ç –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏ —è–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º—ñ–∂ –∞–≤—Ç–æ—Ä–æ–º —Ç—Ä–µ–π—Ç–∞ —Ç–∞ –∞–≤—Ç–æ—Ä–æ–º —Ç–∏–ø—É. –ê–≤—Ç–æ—Ä —Ç—Ä–µ–π—Ç–∞ –∫–∞–∂–µ: "–Ø–∫—â–æ —Ç–≤—ñ–π —Ç–∏–ø —Ö–æ—á–µ –≤–≤–∞–∂–∞—Ç–∏—Å—è Describable, –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –º–µ—Ç–æ–¥ `describe()`, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î `String`". –ê–≤—Ç–æ—Ä —Ç–∏–ø—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î: "–ú—ñ–π —Ç–∏–ø Product —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç Describable, –æ—Å—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ—Ç–æ–¥—É `describe()`".

### 22.1.2 –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç—Ä–µ–π—Ç–∞

–¢—Ä–µ–π—Ç –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª—é—á–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `trait`, –∑–∞ —è–∫–∏–º –π–¥–µ —ñ–º'—è —Ç—Ä–µ–π—Ç–∞ —Ç–∞ –±–ª–æ–∫ –∑ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º–∏ –º–µ—Ç–æ–¥—ñ–≤:

```text
trait –Ü–º º—è–¢—Ä–µ–π—Ç–∞ {
    // –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π –º–µ—Ç–æ–¥ ‚Äî —Ç—ñ–ª—å–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞, –±–µ–∑ —Ç—ñ–ª–∞
    fn –æ–±–æ–≤ º—è–∑–∫–æ–≤–∏–π_–º–µ—Ç–æ–¥(&self) -> –¢–∏–ø–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è;
    
    // –ú–µ—Ç–æ–¥ –∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    fn –º–µ—Ç–æ–¥_–∑–∞_–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º(&self) -> –¢–∏–ø–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è {
        // –¢—ñ–ª–æ –º–µ—Ç–æ–¥—É
    }
}
```

–ú–µ—Ç–æ–¥–∏ –≤ —Ç—Ä–µ–π—Ç—ñ –±—É–≤–∞—é—Ç—å –¥–≤–æ—Ö –≤–∏–¥—ñ–≤:

- –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏ ‚Äî –º–∞—é—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—É –±–µ–∑ —Ç—ñ–ª–∞. –ö–æ–∂–µ–Ω —Ç–∏–ø, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç, –∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π –Ω–∞–¥–∞—Ç–∏ —Å–≤–æ—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ü–∏—Ö –º–µ—Ç–æ–¥—ñ–≤.
- –ú–µ—Ç–æ–¥–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî –º–∞—é—Ç—å –ø–æ–≤–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é. –¢–∏–ø –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —è–∫ —î –∞–±–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ —ó—ó.

### 22.1.3 –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è: –ø–µ—Ä—à–∏–π —Ç—Ä–µ–π—Ç

–†–æ–∑–≥–ª—è–Ω–µ–º–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ –≤–ª–∞—Å–Ω–æ–≥–æ —Ç—Ä–µ–π—Ç–∞ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ. –ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –º–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î–º–æ —Å–∏—Å—Ç–µ–º—É –∫–∞—Ç–∞–ª–æ–≥—É —Ç–æ–≤–∞—Ä—ñ–≤, –¥–µ –∫–æ–∂–µ–Ω —Ç–æ–≤–∞—Ä –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–ø–∏—Å–∞—Ç–∏ —Å–µ–±–µ —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –≤–∏–≥–ª—è–¥—ñ. –î–ª—è —Ü—å–æ–≥–æ —Å—Ç–≤–æ—Ä–∏–º–æ —Ç—Ä–µ–π—Ç `Describable`, —â–æ –≤–∏–∑–Ω–∞—á–∞—î –º–µ—Ç–æ–¥ `describe()`.

```rust
// –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç—Ä–µ–π—Ç–∞ Describable
// –¶–µ–π —Ç—Ä–µ–π—Ç –æ–ø–∏—Å—É—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç: –±—É–¥—å-—è–∫–∏–π —Ç–∏–ø, —â–æ –π–æ–≥–æ —Ä–µ–∞–ª—ñ–∑—É—î,
// –∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π –º–∞—Ç–∏ –º–µ—Ç–æ–¥ describe(), —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î String
trait Describable {
    // –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π –º–µ—Ç–æ–¥ ‚Äî —Ç—ñ–ª—å–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞, –±–µ–∑ —Ç—ñ–ª–∞
    // –ö–æ–∂–µ–Ω —Ç–∏–ø –ø–æ–≤–∏–Ω–µ–Ω –Ω–∞–¥–∞—Ç–∏ –≤–ª–∞—Å–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é
    fn describe(&self) -> String;
    
    // –ú–µ—Ç–æ–¥ –∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    // –¢–∏–ø–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∞–±–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ —ó—ó
    fn short_description(&self) -> String {
        format!("–û–±'—î–∫—Ç: {}", self.describe())
    }
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Product ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–∏–ø –¥–∞–Ω–∏—Ö
struct Product {
    name: String,
    price: f64,
}

// –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞ Describable –¥–ª—è —Ç–∏–ø—É Product
// –°–∏–Ω—Ç–∞–∫—Å–∏—Å: impl –¢—Ä–µ–π—ÇName for –¢–∏–øName
impl Describable for Product {
    // –û–±–æ–≤'—è–∑–∫–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ—Ç–æ–¥—É describe
    fn describe(&self) -> String {
        format!("{} (${:.2})", self.name, self.price)
    }
    // –ú–µ—Ç–æ–¥ short_description –Ω–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏–π,
    // —Ç–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑ —Ç—Ä–µ–π—Ç–∞
}

fn main() {
    let laptop = Product {
        name: "–ù–æ—É—Ç–±—É–∫".to_string(),
        price: 999.99,
    };
    
    // –í–∏–∫–ª–∏–∫ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥—É ‚Äî –≤–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Product
    println!("{}", laptop.describe());         // –ù–æ—É—Ç–±—É–∫ ($999.99)
    
    // –í–∏–∫–ª–∏–∫ –º–µ—Ç–æ–¥—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑ —Ç—Ä–µ–π—Ç–∞
    println!("{}", laptop.short_description()); // –û–±'—î–∫—Ç: –ù–æ—É—Ç–±—É–∫ ($999.99)
}
```

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –¥–µ—Ç–∞–ª—å–Ω–æ, —è–∫ –ø—Ä–∞—Ü—é—î —Ü—è –ø—Ä–æ–≥—Ä–∞–º–∞:

1. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç—Ä–µ–π—Ç–∞ (`trait Describable`) —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –¢—Ä–µ–π—Ç –º—ñ—Å—Ç–∏—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –º–µ—Ç–æ–¥ `describe()` —Ç–∞ –º–µ—Ç–æ–¥ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `short_description()`.

2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Product ‚Äî –∑–≤–∏—á–∞–π–Ω–∏–π —Ç–∏–ø –¥–∞–Ω–∏—Ö –∑ –¥–≤–æ–º–∞ –ø–æ–ª—è–º–∏. –°–∞–º –ø–æ —Å–æ–±—ñ –≤—ñ–Ω —â–µ –Ω–µ –º–∞—î –∑–≤'—è–∑–∫—É –∑ —Ç—Ä–µ–π—Ç–æ–º.

3. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞ (`impl Describable for Product`) –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–≤'—è–∑–æ–∫ –º—ñ–∂ —Ç–∏–ø–æ–º Product —Ç–∞ —Ç—Ä–µ–π—Ç–æ–º Describable. –£ —Ü—å–æ–º—É –±–ª–æ—Ü—ñ –º–∏ –Ω–∞–¥–∞—î–º–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥—É `describe()`.

4. –ú–µ—Ç–æ–¥ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `short_description()` –Ω–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó, —Ç–æ–º—É Product –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∑ —Ç—Ä–µ–π—Ç–∞. –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –º–µ—Ç–æ–¥ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–ª–∏–∫–∞—î `self.describe()` ‚Äî –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –º–µ—Ç–æ–¥, —è–∫–∏–π –º–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–ª–∏.

### 22.1.4 –¢—Ä–µ–π—Ç —è–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º—É

–°–ø—Ä–∞–≤–∂–Ω—è —Å–∏–ª–∞ —Ç—Ä–µ–π—Ç—ñ–≤ –ø—Ä–æ—è–≤–ª—è—î—Ç—å—Å—è, –∫–æ–ª–∏ –º–∏ –ø–∏—à–µ–º–æ —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –ø—Ä–∏–π–º–∞—é—Ç—å –±—É–¥—å-—è–∫–∏–π —Ç–∏–ø, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î –ø–µ–≤–Ω–∏–π —Ç—Ä–µ–π—Ç. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–π –∫–æ–¥ –±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è.

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ —Å–∏—Å—Ç–µ–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å–µ–Ω—Å–æ—Ä—ñ–≤. –£ —Å–∏—Å—Ç–µ–º—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ —Å–µ–Ω—Å–æ—Ä—ñ–≤ ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏, —Ç–∏—Å–∫—É, –≤–æ–ª–æ–≥–æ—Å—Ç—ñ. –ö–æ–∂–µ–Ω —Å–µ–Ω—Å–æ—Ä –º–∞—î —Å–≤–æ—é –≤–Ω—É—Ç—Ä—ñ—à–Ω—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∞–ª–µ –≤—Å—ñ –≤–æ–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤–º—ñ—Ç–∏ –Ω–∞–¥–∞–≤–∞—Ç–∏ –ø–æ–∫–∞–∑–∞–Ω–Ω—è, –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ —Å–≤–æ—î —ñ–º'—è —Ç–∞ —Å—Ç–∞—Ç—É—Å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

```rust
// –¢—Ä–µ–π—Ç Sensor –≤–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ —Å–µ–Ω—Å–æ—Ä—ñ–≤
// –ë—É–¥—å-—è–∫–∏–π —Ç–∏–ø, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î —Ü–µ–π —Ç—Ä–µ–π—Ç, –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –º–∞—î —Ç—Ä–∏ –º–µ—Ç–æ–¥–∏
trait Sensor {
    /// –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—è —Å–µ–Ω—Å–æ—Ä–∞
    fn read(&self) -> f64;
    
    /// –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å–µ–Ω—Å–æ—Ä–∞
    fn name(&self) -> &str;
    
    /// –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —Å–µ–Ω—Å–æ—Ä –æ–Ω–ª–∞–π–Ω
    fn is_online(&self) -> bool;
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–µ–Ω—Å–æ—Ä–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏
// –ú–∞—î –≤–ª–∞—Å–Ω—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é –ø–æ–ª—ñ–≤
struct TemperatureSensor {
    id: String,
    value: f64,      // –ü–æ–∫–∞–∑–∞–Ω–Ω—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å—ñ—è
    online: bool,
}

// –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞ Sensor –¥–ª—è TemperatureSensor
impl Sensor for TemperatureSensor {
    fn read(&self) -> f64 {
        self.value
    }
    
    fn name(&self) -> &str {
        &self.id
    }
    
    fn is_online(&self) -> bool {
        self.online
    }
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–µ–Ω—Å–æ—Ä–∞ —Ç–∏—Å–∫—É ‚Äî —ñ–Ω—à–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è
struct PressureSensor {
    id: String,
    pressure: f64,   // –ü–æ–∫–∞–∑–∞–Ω–Ω—è –≤ –≥–µ–∫—Ç–æ–ø–∞—Å–∫–∞–ª—è—Ö
    connected: bool, // –Ü–Ω—à–∞ –Ω–∞–∑–≤–∞ –ø–æ–ª—è –¥–ª—è —Å—Ç–∞—Ç—É—Å—É
}

// –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ —Ç—Ä–µ–π—Ç–∞ –¥–ª—è PressureSensor
impl Sensor for PressureSensor {
    fn read(&self) -> f64 {
        self.pressure
    }
    
    fn name(&self) -> &str {
        &self.id
    }
    
    fn is_online(&self) -> bool {
        self.connected
    }
}

// –£–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —â–æ –ø—Ä–∞—Ü—é—î –∑ –ë–£–î–¨-–Ø–ö–ò–ú —Ç–∏–ø–æ–º,
// —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç Sensor
// –°–∏–Ω—Ç–∞–∫—Å–∏—Å &impl Sensor –æ–∑–Ω–∞—á–∞—î: "–ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±—É–¥—å-—è–∫–∏–π —Ç–∏–ø,
// —â–æ —Ä–µ–∞–ª—ñ–∑—É—î Sensor"
fn check_sensor(sensor: &impl Sensor) {
    if sensor.is_online() {
        println!("{}: {:.2}", sensor.name(), sensor.read());
    } else {
        println!("{}: –û–§–õ–ê–ô–ù", sensor.name());
    }
}

fn main() {
    // –°—Ç–≤–æ—Ä—é—î–º–æ —Å–µ–Ω—Å–æ—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏
    let temp = TemperatureSensor {
        id: "TEMP-01".to_string(),
        value: 23.5,
        online: true,
    };
    
    // –°—Ç–≤–æ—Ä—é—î–º–æ —Å–µ–Ω—Å–æ—Ä —Ç–∏—Å–∫—É
    let pressure = PressureSensor {
        id: "PRESS-01".to_string(),
        pressure: 1013.25,
        connected: false,
    };
    
    // –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –æ–±—Ä–æ–±–ª—è—î –æ–±–∏–¥–≤–∞ —Ç–∏–ø–∏ —Å–µ–Ω—Å–æ—Ä—ñ–≤!
    check_sensor(&temp);     // TEMP-01: 23.50
    check_sensor(&pressure); // PRESS-01: –û–§–õ–ê–ô–ù
}
```

–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î–º–æ, —è–∫ –ø—Ä–∞—Ü—é—î —Ü—è –ø—Ä–æ–≥—Ä–∞–º–∞:

1. –¢—Ä–µ–π—Ç Sensor –≤–∏–∑–Ω–∞—á–∞—î —Ç—Ä–∏ –º–µ—Ç–æ–¥–∏, —è–∫—ñ –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Å–µ–Ω—Å–æ—Ä. –¶–µ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è ‚Äî –º–∏ –Ω–µ –∑–Ω–∞—î–º–æ, —è–∫ —Å–∞–º–µ –∫–æ–∂–µ–Ω —Å–µ–Ω—Å–æ—Ä –∑–±–µ—Ä—ñ–≥–∞—î —Å–≤–æ—ó –¥–∞–Ω—ñ.

2. TemperatureSensor —ñ PressureSensor ‚Äî —Ü–µ —Ä—ñ–∑–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —ñ–º–µ–Ω–∞–º–∏ –ø–æ–ª—ñ–≤. TemperatureSensor –º–∞—î –ø–æ–ª–µ `online`, –∞ PressureSensor ‚Äî –ø–æ–ª–µ `connected`. –ê–ª–µ –æ–±–∏–¥–≤–∞ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –º–µ—Ç–æ–¥ `is_online()`, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

3. –§—É–Ω–∫—Ü—ñ—è check_sensor –ø—Ä–∏–π–º–∞—î `&impl Sensor` ‚Äî –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±—É–¥—å-—è–∫–∏–π —Ç–∏–ø, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î —Ç—Ä–µ–π—Ç Sensor. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–∞—Ä–∞–Ω—Ç—É—î: —è–∫—â–æ —Ç–∏–ø –ø–µ—Ä–µ–¥–∞–Ω–∏–π —É —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é, –≤—ñ–Ω —Ç–æ—á–Ω–æ –º–∞—î –º–µ—Ç–æ–¥–∏ `name()`, `read()` —Ç–∞ `is_online()`.

4. –í–∏–∫–ª–∏–∫–∏ check_sensor –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º: –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–∏—Ö. –ü—Ä–∏ —Ü—å–æ–º—É –Ω–µ–º–∞—î –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è ‚Äî –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î –æ–∫—Ä–µ–º–∏–π –∫–æ–¥ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø—É (—Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –º–æ–Ω–æ–º–æ—Ä—Ñ—ñ–∑–∞—Ü—ñ—è).

---

## 22.2 –¢—Ä–µ–π—Ç Debug ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

### 22.2.1 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç—Ä–µ–π—Ç–∞ Debug

–ü—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –≤–∞–∂–ª–∏–≤–æ –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤–º—ñ—Å—Ç –∑–º—ñ–Ω–Ω–∏—Ö. –£ Rust –¥–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—Ä–µ–π—Ç `Debug` –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏. –¶–µ–π —Ç—Ä–µ–π—Ç –¥–æ–∑–≤–æ–ª—è—î –≤–∏–≤–æ–¥–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç—É `{:?}` —É –º–∞–∫—Ä–æ—Å—ñ `println!` —Ç–∞ —ñ–Ω—à–∏—Ö –º–∞–∫—Ä–æ—Å–∞—Ö —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è.

–¢—Ä–µ–π—Ç Debug –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, –∞ –Ω–µ –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –ô–æ–≥–æ –≤–∏–≤—ñ–¥ ‚Äî —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π, –∑ –ø–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö. –¢–∏–ø–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É: `–ù–∞–∑–≤–∞–°—Ç—Ä—É–∫—Ç—É—Ä–∏ { –ø–æ–ª–µ1: –∑–Ω–∞—á–µ–Ω–Ω—è1, –ø–æ–ª–µ2: –∑–Ω–∞—á–µ–Ω–Ω—è2 }`.

–ë–µ–∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Debug –≤–∏ –Ω–µ –∑–º–æ–∂–µ—Ç–µ –≤–∏–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ —Ç–∏–ø—É —á–µ—Ä–µ–∑ `{:?}`:

```rust
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p = Point { x: 10, y: 20 };
    // –ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫ –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è!
    // println!("{:?}", p);  
    // –ü–æ–º–∏–ª–∫–∞: `Point` doesn't implement `Debug`
}
```

### 22.2.2 –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ derive

Rust –Ω–∞–¥–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º derive –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ç—Ä–µ–π—Ç—ñ–≤. –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ —â–æ–± –ø–∏—Å–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é Debug –≤—Ä—É—á–Ω—É, –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç `#[derive(Debug)]` –ø–µ—Ä–µ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º —Ç–∏–ø—É, —ñ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∑–≥–µ–Ω–µ—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

–ù–∞—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è derive –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Debug –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö —Ç–∞ –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.

```rust
// –ê—Ç—Ä–∏–±—É—Ç #[derive(Debug)] –ø—Ä–æ—Å–∏—Ç—å –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä
// –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç—Ä–µ–π—Ç–∞ Debug
#[derive(Debug)]
struct Point {
    x: i32,
    y: i32,
}

// –î–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä Debug —Ç–µ–∂ –ø—Ä–∞—Ü—é—î,
// –∞–ª–µ –≤—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ —Ç–∏–ø–∏ —Ç–∞–∫–æ–∂ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ Debug
#[derive(Debug)]
struct Rectangle {
    top_left: Point,     // Point —Ä–µ–∞–ª—ñ–∑—É—î Debug
    bottom_right: Point,
}

fn main() {
    let p = Point { x: 10, y: 20 };
    let rect = Rectangle {
        top_left: Point { x: 0, y: 0 },
        bottom_right: Point { x: 100, y: 50 },
    };
    
    // –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç {:?}
    // –í–∏–≤–æ–¥–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥–æ–∫
    println!("{:?}", p);
    // Point { x: 10, y: 20 }
    
    // Pretty-print —Ñ–æ—Ä–º–∞—Ç {:#?}
    // –í–∏–≤–æ–¥–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏ —Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Ä—è–¥–∫—ñ–≤
    println!("{:#?}", rect);
    // Rectangle {
    //     top_left: Point {
    //         x: 0,
    //         y: 0,
    //     },
    //     bottom_right: Point {
    //         x: 100,
    //         y: 50,
    //     },
    // }
}
```

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–æ–±–æ—Ç–∏ —Ü—ñ—î—ó –ø—Ä–æ–≥—Ä–∞–º–∏:

1. –ê—Ç—Ä–∏–±—É—Ç `#[derive(Debug)]` ‚Äî —Ü–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä—É –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç—Ä–µ–π—Ç–∞ Debug. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∞–Ω–∞–ª—ñ–∑—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ —Å—Ç–≤–æ—Ä—é—î –º–µ—Ç–æ–¥ `fmt`, —è–∫–∏–π –≤–∏–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤—É —Ç–∏–ø—É —Ç–∞ –≤—Å—ñ –ø–æ–ª—è.

2. –í–∫–ª–∞–¥–µ–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ ‚Äî –¥–ª—è Rectangle –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î –∫–æ–¥, —â–æ –≤–∏–∫–ª–∏–∫–∞—î Debug –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è. –¢–æ–º—É Point —Ç–µ–∂ –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ Debug. –Ø–∫—â–æ –ø—Ä–∏–±—Ä–∞—Ç–∏ `#[derive(Debug)]` –∑ Point, –∫–æ–¥ Rectangle –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è.

3. –î–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∏–≤–æ–¥—É:
   - `{:?}` ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç, –≤—Å–µ –≤ –æ–¥–∏–Ω —Ä—è–¥–æ–∫
   - `{:#?}` ‚Äî "pretty" —Ñ–æ—Ä–º–∞—Ç –∑ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏, –∑—Ä—É—á–Ω–∏–π –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

### 22.2.3 –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Debug

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Debug –≤–∏–≤–æ–¥–∏—Ç—å —É—Å—ñ –ø–æ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏. –ê–ª–µ —ñ–Ω–æ–¥—ñ —Ü–µ –Ω–µ–±–∞–∂–∞–Ω–æ ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º—ñ—Å—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ñ –¥–∞–Ω—ñ (–ø–∞—Ä–æ–ª—ñ, API-–∫–ª—é—á—ñ, —Ç–æ–∫–µ–Ω–∏). –£ —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ Debug –≤—Ä—É—á–Ω—É.

–ù–∞—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–∏ –≤–∏–≤–µ–¥–µ–Ω–Ω—ñ —á–µ—Ä–µ–∑ Debug.

```rust
use std::fmt;

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á
// –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ derive(Debug), –±–æ —Ö–æ—á–µ–º–æ –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –∫–ª—é—á
struct SecretKey {
    key: String,
}

// –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–π—Ç–∞ Debug
// –ó–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤–∏–≤–æ–¥–∏–º–æ –∑—ñ—Ä–æ—á–∫–∏
impl fmt::Debug for SecretKey {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        // –í–∏–≤–æ–¥–∏–º–æ –∑–∞–≥–ª—É—à–∫—É –∑–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è
        write!(f, "SecretKey(*)")
    }
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–∞, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SecretKey
// –¢—É—Ç derive(Debug) –ø—Ä–∞—Ü—é—î, –±–æ SecretKey —Ä–µ–∞–ª—ñ–∑—É—î Debug
#[derive(Debug)]
struct Agent {
    id: String,
    api_key: SecretKey,
}

fn main() {
    let agent = Agent {
        id: "SCOUT-001".to_string(),
        api_key: SecretKey { 
            key: "super_secret_12345".to_string() 
        },
    };
    
    // –ü—Ä–∏ –≤–∏–≤–µ–¥–µ–Ω–Ω—ñ –∞–≥–µ–Ω—Ç–∞ –∫–ª—é—á –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π
    println!("{:?}", agent);
    // Agent { id: "SCOUT-001", api_key: SecretKey(*) }
    
    // –†–µ–∞–ª—å–Ω–∏–π –∫–ª—é—á "super_secret_12345" –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É –ª–æ–≥–∏!
}
```

–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î–º–æ —Ä–æ–±–æ—Ç—É —Ü—ñ—î—ó –ø—Ä–æ–≥—Ä–∞–º–∏:

1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ SecretKey –Ω–µ –º–∞—î –∞—Ç—Ä–∏–±—É—Ç–∞ derive(Debug). –ù–∞—Ç–æ–º—ñ—Å—Ç—å –º–∏ —Ä–µ–∞–ª—ñ–∑—É—î–º–æ —Ç—Ä–µ–π—Ç Debug –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ `impl fmt::Debug for SecretKey`.

2. –ú–µ—Ç–æ–¥ fmt ‚Äî —î–¥–∏–Ω–∏–π –º–µ—Ç–æ–¥ —Ç—Ä–µ–π—Ç–∞ Debug. –í—ñ–Ω –ø—Ä–∏–π–º–∞—î —Ñ–æ—Ä–º–∞—Ç–µ—Ä (`fmt::Formatter`) —ñ –∑–∞–ø–∏—Å—É—î –≤ –Ω—å–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è. –ó–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ –º–∏ –∑–∞–ø–∏—Å—É—î–º–æ `"SecretKey(*)"`.

3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Agent –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î derive(Debug). –ö–æ–ª–∏ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î Debug –¥–ª—è Agent, –≤—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î Debug –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è. –î–ª—è –ø–æ–ª—è `api_key` —Ç–∏–ø—É SecretKey –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –Ω–∞—à–∞ –≤–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è, —è–∫–∞ –≤–∏–≤–æ–¥–∏—Ç—å –∑—ñ—Ä–æ—á–∫–∏.

4. –ë–µ–∑–ø–µ–∫–∞: –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –ª–æ–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å –¥–æ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö –æ—Å—ñ–±, —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –∑–∞–ª–∏—à–∏—Ç—å—Å—è –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º.

---

## 22.3 –¢—Ä–µ–π—Ç Display ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### 22.3.1 –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ Debug —Ç–∞ Display

–£ Rust —î –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ç—Ä–µ–π—Ç–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Debug (`{:?}`) | Display (`{}`) |
|----------------|----------------|----------------|
| –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è | –î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è | –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è |
| –§–æ—Ä–º–∞—Ç | –¢–µ—Ö–Ω—ñ—á–Ω–∏–π, –∑ –¥–µ—Ç–∞–ª—è–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ | –ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π, –¥—Ä—É–∂–Ω—ñ–π |
| Derive | –¢–∞–∫, `#[derive(Debug)]` | –ù—ñ, —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É |
| –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è | –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î | –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ |

–ß–æ–º—É Display –Ω–µ –º–æ–∂–Ω–∞ derive? –¢–æ–º—É —â–æ "–≥–∞—Ä–Ω–∏–π" —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –∑–Ω–∞—Ç–∏, —è–∫ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É ‚Äî "23.5", "23.5¬∞C", "23.5 –≥—Ä–∞–¥—É—Å—ñ–≤ –¶–µ–ª—å—Å—ñ—è" —á–∏ "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤–∞–¥—Ü—è—Ç—å —Ç—Ä–∏ –∑ –ø–æ–ª–æ–≤–∏–Ω–æ—é –≥—Ä–∞–¥—É—Å–∏". –¶–µ —Ä—ñ—à–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–µ–Ω –ø—Ä–∏–π–Ω—è—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫.

### 22.3.2 –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Display

–¢—Ä–µ–π—Ç Display –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —É –º–æ–¥—É–ª—ñ `std::fmt` —ñ –º–∞—î –æ–¥–∏–Ω –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –º–µ—Ç–æ–¥ `fmt`. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Display –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–¥–∞—î —Ç–∏–ø –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è `{}` —Ç–∞ –º–µ—Ç–æ–¥ `.to_string()`.

–ù–∞—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é Display –¥–ª—è —Ç–∏–ø—É Temperature, –ø–æ—Ä—ñ–≤–Ω—é—é—á–∏ –≤–∏–≤—ñ–¥ Debug —Ç–∞ Display.

```rust
use std::fmt;

// Debug —á–µ—Ä–µ–∑ derive ‚Äî –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
#[derive(Debug)]
struct Temperature {
    celsius: f64,
}

// Display ‚Äî —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É, –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
impl fmt::Display for Temperature {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        // –§–æ—Ä–º–∞—Ç—É—î–º–æ –∑ –æ–¥–Ω–∏–º –∑–Ω–∞–∫–æ–º –ø—ñ—Å–ª—è –∫–æ–º–∏ —Ç–∞ —Å–∏–º–≤–æ–ª–æ–º –≥—Ä–∞–¥—É—Å–∞
        write!(f, "{:.1}¬∞C", self.celsius)
    }
}

fn main() {
    let temp = Temperature { celsius: 23.5 };
    
    // Debug ‚Äî —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
    println!("Debug: {:?}", temp);
    // Debug: Temperature { celsius: 23.5 }
    
    // Display ‚Äî —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
    println!("Display: {}", temp);
    // Display: 23.5¬∞C
    
    // to_string() –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞–≤–¥—è–∫–∏ Display
    let s: String = temp.to_string();
    println!("String: {}", s);
    // String: 23.5¬∞C
}
```

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

1. –Ü–º–ø–æ—Ä—Ç fmt: `use std::fmt;` –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∫–æ—Ä–æ—á–µ–Ω—ñ —ñ–º–µ–Ω–∞ `fmt::Display` —Ç–∞ `fmt::Formatter`.

2. –ú–µ—Ç–æ–¥ fmt: –ø—Ä–∏–π–º–∞—î –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
   - `&self` ‚Äî –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ —Ñ–æ—Ä–º–∞—Ç—É—î–º–æ
   - `f: &mut fmt::Formatter<'_>` ‚Äî —Ñ–æ—Ä–º–∞—Ç–µ—Ä, –∫—É–¥–∏ –∑–∞–ø–∏—Å—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

3. –ú–∞–∫—Ä–æ—Å write!: –∑–∞–ø–∏—Å—É—î —Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π —Ä—è–¥–æ–∫ —É —Ñ–æ—Ä–º–∞—Ç–µ—Ä. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–π println!, –∞–ª–µ –∑–∞–º—ñ—Å—Ç—å –≤–∏–≤–æ–¥—É –Ω–∞ –∫–æ–Ω—Å–æ–ª—å –∑–∞–ø–∏—Å—É—î –≤ –±—É—Ñ–µ—Ä —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∞.

4. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è fmt::Result: –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î Result, —â–æ–± —Å–∏–≥–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è (–∑–∞–∑–≤–∏—á–∞–π —Ü–µ Ok(())).

### 22.3.3 Display –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∞–≥–µ–Ω—Ç–∞

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ ‚Äî —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é Display –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ë–ü–õ–ê, —â–æ –≤–∫–ª—é—á–∞—î –ø–æ–∑–∏—Ü—ñ—é, —Å—Ç–∞–Ω —Ç–∞ —Ä—ñ–≤–µ–Ω—å –∑–∞—Ä—è–¥—É –±–∞—Ç–∞—Ä–µ—ó.

```rust
use std::fmt;

// –ü–æ–∑–∏—Ü—ñ—è –∞–≥–µ–Ω—Ç–∞ —É —Ç—Ä–∏–≤–∏–º—ñ—Ä–Ω–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ä—ñ
#[derive(Debug)]
struct Position {
    x: f64,
    y: f64,
    z: f64,
}

// Display –¥–ª—è Position ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
impl fmt::Display for Position {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(f, "({:.1}, {:.1}, {:.1})", self.x, self.y, self.z)
    }
}

// –°—Ç–∞–Ω –∞–≥–µ–Ω—Ç–∞ ‚Äî enum –∑ —Ä—ñ–∑–Ω–∏–º–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏
#[derive(Debug)]
enum AgentState {
    Grounded,           // –ù–∞ –∑–µ–º–ª—ñ
    Flying,             // –£ –ø–æ–ª—å–æ—Ç—ñ
    Emergency(String),  // –ê–≤–∞—Ä—ñ–π–Ω–∏–π —Å—Ç–∞–Ω –∑ –æ–ø–∏—Å–æ–º –ø—Ä–∏—á–∏–Ω–∏
}

// Display –¥–ª—è AgentState ‚Äî –∑ –µ–º–æ–¥–∑—ñ –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–Ω—è
impl fmt::Display for AgentState {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        match self {
            AgentState::Grounded => write!(f, "üõ¨ –ù–∞ –∑–µ–º–ª—ñ"),
            AgentState::Flying => write!(f, " –£ –ø–æ–ª—å–æ—Ç—ñ"),
            AgentState::Emergency(reason) => write!(f, " –ê–≤–∞—Ä—ñ—è: {}", reason),
        }
    }
}

// –ê–≥–µ–Ω—Ç ‚Äî —Å–∫–ª–∞–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏
#[derive(Debug)]
struct Agent {
    id: String,
    position: Position,
    battery: u8,
    state: AgentState,
}

// Display –¥–ª—è Agent ‚Äî —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —É –≤–∏–≥–ª—è–¥—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ–≥–æ —Ä—è–¥–∫–∞
impl fmt::Display for Agent {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(
            f,
            "[{}] {} | –ü–æ–∑–∏—Ü—ñ—è: {} | –ë–∞—Ç–∞—Ä–µ—è: {}%",
            self.id, self.state, self.position, self.battery
        )
    }
}

fn main() {
    let agent = Agent {
        id: "SCOUT-001".to_string(),
        position: Position { x: 100.0, y: 50.0, z: 30.0 },
        battery: 85,
        state: AgentState::Flying,
    };
    
    // Display ‚Äî –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–π —Ä—è–¥–æ–∫
    println!("{}", agent);
    // [SCOUT-001]  –£ –ø–æ–ª—å–æ—Ç—ñ | –ü–æ–∑–∏—Ü—ñ—è: (100.0, 50.0, 30.0) | –ë–∞—Ç–∞—Ä–µ—è: 85%
    
    // Debug ‚Äî –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ
    println!("{:?}", agent);
    // Agent { id: "SCOUT-001", position: Position { x: 100.0, y: 50.0, z: 30.0 }, 
    //         battery: 85, state: Flying }
    
    // –ê–≥–µ–Ω—Ç –≤ –∞–≤–∞—Ä—ñ–π–Ω–æ–º—É —Å—Ç–∞–Ω—ñ
    let emergency_agent = Agent {
        id: "SCOUT-002".to_string(),
        position: Position { x: 0.0, y: 0.0, z: 0.0 },
        battery: 5,
        state: AgentState::Emergency("–ö—Ä–∏—Ç–∏—á–Ω–æ –Ω–∏–∑—å–∫–∏–π –∑–∞—Ä—è–¥".to_string()),
    };
    
    println!("{}", emergency_agent);
    // [SCOUT-002]  –ê–≤–∞—Ä—ñ—è: –ö—Ä–∏—Ç–∏—á–Ω–æ –Ω–∏–∑—å–∫–∏–π –∑–∞—Ä—è–¥ | –ü–æ–∑–∏—Ü—ñ—è: (0.0, 0.0, 0.0) | –ë–∞—Ç–∞—Ä–µ—è: 5%
}
```

–£ —Ü—ñ–π –ø—Ä–æ–≥—Ä–∞–º—ñ Display —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ:

1. Position::Display –≤–∏–≤–æ–¥–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ `(x, y, z)` –∑ –æ–¥–Ω–∏–º –∑–Ω–∞–∫–æ–º –ø—ñ—Å–ª—è –∫–æ–º–∏.

2. AgentState::Display –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î pattern matching –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ enum. –ö–æ–∂–µ–Ω –≤–∞—Ä—ñ–∞–Ω—Ç –º–∞—î —Å–≤—ñ–π —Ç–µ–∫—Å—Ç —Ç–∞ –µ–º–æ–¥–∑—ñ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è.

3. Agent::Display –∑–±–∏—Ä–∞—î –≤—Å–µ —Ä–∞–∑–æ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Display –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Ç–∏–ø—ñ–≤. –ö–æ–ª–∏ –º–∏ –ø–∏—à–µ–º–æ `{}` –¥–ª—è `self.state` –∞–±–æ `self.position`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è —ó—Ö–Ω—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Display.

---

## 22.4 –¢—Ä–µ–π—Ç Clone ‚Äî —è–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### 22.4.1 –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω Clone

–£ Rust –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø–µ—Ä–µ–º—ñ—â—É—î –∑–Ω–∞—á–µ–Ω–Ω—è (ownership transfer). –ü—ñ—Å–ª—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ —Å—Ç–∞—î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—é. –ê–ª–µ —ñ–Ω–æ–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é –∑–Ω–∞—á–µ–Ω–Ω—è, –∑–∞–ª–∏—à–∏–≤—à–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª –¥–æ—Å—Ç—É–ø–Ω–∏–º. –î–ª—è —Ü—å–æ–≥–æ —ñ—Å–Ω—É—î —Ç—Ä–µ–π—Ç Clone.

–¢—Ä–µ–π—Ç Clone –Ω–∞–¥–∞—î –º–µ—Ç–æ–¥ `.clone()`, —â–æ —Å—Ç–≤–æ—Ä—é—î –≥–ª–∏–±–æ–∫—É –∫–æ–ø—ñ—é –∑–Ω–∞—á–µ–Ω–Ω—è. "–ì–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è" –æ–∑–Ω–∞—á–∞—î, —â–æ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –Ω–µ —Ç—ñ–ª—å–∫–∏ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—ñ –ø–æ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏, –∞–ª–µ –π —É—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –¥–∞–Ω—ñ ‚Äî —Ä—è–¥–∫–∏, –≤–µ–∫—Ç–æ—Ä–∏, —ñ–Ω—à—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.

### 22.4.2 –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è Clone

–ù–∞—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è–º —Ç–∞ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è–º, –∞ —Ç–∞–∫–æ–∂ —Ç–µ, —è–∫ Clone —Å—Ç–≤–æ—Ä—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ –∫–æ–ø—ñ—ó –¥–∞–Ω–∏—Ö.

```rust
// Clone —á–µ—Ä–µ–∑ derive ‚Äî –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
#[derive(Debug, Clone)]
struct Position {
    x: f64,
    y: f64,
}

fn main() {
    let pos1 = Position { x: 10.0, y: 20.0 };
    
    // –ë–µ–∑ clone ‚Äî –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è (move)
    // let pos_moved = pos1;  // pos1 –±—ñ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π!
    
    // –ó clone ‚Äî —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ –∫–æ–ø—ñ—è
    let pos2 = pos1.clone();
    
    // pos1 –≤—Å–µ —â–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π, –±–æ –º–∏ –π–æ–≥–æ –Ω–µ –ø–µ—Ä–µ–º—ñ—â—É–≤–∞–ª–∏, –∞ –∫–ª–æ–Ω—É–≤–∞–ª–∏
    println!("–û—Ä–∏–≥—ñ–Ω–∞–ª: {:?}", pos1);  // Position { x: 10.0, y: 20.0 }
    println!("–ö–æ–ø—ñ—è: {:?}", pos2);     // Position { x: 10.0, y: 20.0 }
    
    // –ö–æ–ø—ñ—è –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ –≤—ñ–¥ –æ—Ä–∏–≥—ñ–Ω–∞–ª—É
    // –ó–º—ñ–Ω–∏ –≤ –∫–æ–ø—ñ—ó –ù–ï –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª
    let mut pos3 = pos1.clone();
    pos3.x = 999.0;
    
    println!("–û—Ä–∏–≥—ñ–Ω–∞–ª pos1.x = {}", pos1.x);  // 10.0 ‚Äî –Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è
    println!("–ö–æ–ø—ñ—è pos3.x = {}", pos3.x);      // 999.0 ‚Äî –∑–º—ñ–Ω–µ–Ω–∞ –∫–æ–ø—ñ—è
}
```

–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:

1. `#[derive(Clone)]` ‚Äî –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é clone(), —è–∫–∞ –∫–ª–æ–Ω—É—î –∫–æ–∂–Ω–µ –ø–æ–ª–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.

2. `.clone()` –∑–±–µ—Ä—ñ–≥–∞—î –æ—Ä–∏–≥—ñ–Ω–∞–ª ‚Äî –Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è, –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è –Ω–µ "–∑'—ó–¥–∞—î" –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

3. –ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∫–æ–ø—ñ–π ‚Äî –∑–º—ñ–Ω–Ω–∞ `pos3` ‚Äî —Ü–µ –æ–∫—Ä–µ–º–∞ –∫–æ–ø—ñ—è –≤ –ø–∞–º'—è—Ç—ñ. –á—ó –∑–º—ñ–Ω–∞ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ `pos1`.

### 22.4.3 Clone –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

–ö–æ–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º—ñ—Å—Ç–∏—Ç—å –≤–∫–ª–∞–¥–µ–Ω—ñ —Ç–∏–ø–∏ (String, Vec, —ñ–Ω—à—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏), Clone —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–ª–æ–Ω—É—î –≤—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –¥–∞–Ω—ñ. –¶–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –≥–ª–∏–±–æ–∫–∏–º –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º.

```rust
#[derive(Debug, Clone)]
struct Waypoint {
    name: String,        // String —Ä–µ–∞–ª—ñ–∑—É—î Clone
    position: Position,  // Position —Ç–µ–∂ –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ Clone
}

#[derive(Debug, Clone)]
struct Position {
    x: f64,
    y: f64,
}

#[derive(Debug, Clone)]
struct Mission {
    id: String,
    waypoints: Vec<Waypoint>,  // Vec<T> —Ä–µ–∞–ª—ñ–∑—É—î Clone, —è–∫—â–æ T: Clone
}

fn main() {
    let mission = Mission {
        id: "ALPHA".to_string(),
        waypoints: vec![
            Waypoint { 
                name: "–°—Ç–∞—Ä—Ç".to_string(), 
                position: Position { x: 0.0, y: 0.0 } 
            },
            Waypoint { 
                name: "–§—ñ–Ω—ñ—à".to_string(), 
                position: Position { x: 100.0, y: 100.0 } 
            },
        ],
    };
    
    // –ì–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è ‚Äî –í–°–Ü –≤–∫–ª–∞–¥–µ–Ω—ñ –¥–∞–Ω—ñ –∫–æ–ø—ñ—é—é—Ç—å—Å—è:
    // - id (String) ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è
    // - waypoints (Vec) ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ —É—Å—ñ–º–∞ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
    // - –∫–æ–∂–µ–Ω Waypoint ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è
    // - –∫–æ–∂–µ–Ω name (String) —É Waypoint ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è
    // - –∫–æ–∂–Ω–∞ position (Position) —É Waypoint ‚Äî –∫–æ–ø—ñ—é—î—Ç—å—Å—è
    let mission_backup = mission.clone();
    
    println!("–û—Ä–∏–≥—ñ–Ω–∞–ª: {} —Ç–æ—á–æ–∫ –º–∞—Ä—à—Ä—É—Ç—É", mission.waypoints.len());
    println!("–ö–æ–ø—ñ—è: {} —Ç–æ—á–æ–∫ –º–∞—Ä—à—Ä—É—Ç—É", mission_backup.waypoints.len());
    
    // –ö–æ–ø—ñ—è –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ ‚Äî –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏
    // –±–µ–∑ –≤–ø–ª–∏–≤—É –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª
}
```

–ü—Ä–∏ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—ñ `Mission`:

1. –ö–ª–æ–Ω—É—î—Ç—å—Å—è `id` (String::clone)
2. –ö–ª–æ–Ω—É—î—Ç—å—Å—è `waypoints` (Vec::clone), —â–æ –≤–∏–∫–ª–∏–∫–∞—î clone –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
3. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ Waypoint –∫–ª–æ–Ω—É—é—Ç—å—Å—è `name` (String) —Ç–∞ `position` (Position)

–†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –¥–≤—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ –ø–∞–º'—è—Ç—ñ.

---

## 22.5 –¢—Ä–µ–π—Ç Copy ‚Äî –Ω–µ—è–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

### 22.5.1 –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ Clone —Ç–∞ Copy

Clone —ñ Copy ‚Äî –æ–±–∏–¥–≤–∞ –ø—Ä–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ –∑ –≤–∞–∂–ª–∏–≤–∏–º–∏ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—è–º–∏:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Clone | Copy |
|----------------|-------|------|
| –í–∏–∫–ª–∏–∫ | –Ø–≤–Ω–∏–π —á–µ—Ä–µ–∑ `.clone()` | –ù–µ—è–≤–Ω–∏–π –ø—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ |
| –í–∏—Ç—Ä–∞—Ç–∏ | –ú–æ–∂–µ –±—É—Ç–∏ –¥–æ—Ä–æ–≥–∏–º (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è) | –ó–∞–≤–∂–¥–∏ –¥–µ—à–µ–≤–∏–π (–ø–æ–±—ñ—Ç–æ–≤–∞ –∫–æ–ø—ñ—è) |
| –í–∏–º–æ–≥–∏ | –ë—É–¥—å-—è–∫–∏–π —Ç–∏–ø | –¢—ñ–ª—å–∫–∏ "–ø—Ä–æ—Å—Ç—ñ" —Ç–∏–ø–∏ |
| String/Vec | –ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è | –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è |

Copy ‚Äî —Ü–µ –º–∞—Ä–∫–µ—Ä–Ω–∏–π —Ç—Ä–µ–π—Ç, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä—É: "–ø—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ —Ü—å–æ–≥–æ —Ç–∏–ø—É –∫–æ–ø—ñ—é–π –ø–æ–±—ñ—Ç–æ–≤–æ, –Ω–µ –ø–µ—Ä–µ–º—ñ—â—É–π". –ü–æ–±—ñ—Ç–æ–≤–∞ –∫–æ–ø—ñ—è ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–π—Ç—ñ–≤ –∑ –æ–¥–Ω–æ–≥–æ –º—ñ—Å—Ü—è –ø–∞–º'—è—Ç—ñ –≤ —ñ–Ω—à–µ, –±–µ–∑ –∂–æ–¥–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

### 22.5.2 –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä—ñ–∑–Ω–∏—Ü—ñ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏

–ù–∞—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –Ω–∞–æ—á–Ω–æ –ø–æ–∫–∞–∑—É—î —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ —Ç–∏–ø–∞–º–∏ Copy —Ç–∞ –Ω–µ-Copy.

```rust
fn main() {
    // –ü—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Ç–∏–ø–∏ (i32, f64, bool, char) —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å Copy
    // –ü—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ –≤–æ–Ω–∏ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
    let x: i32 = 42;
    let y = x;  // x –ö–û–ü–Ü–Æ–Ñ–¢–¨–°–Ø –≤ y (–ø–æ–±—ñ—Ç–æ–≤–æ)
    
    // –û–±–∏–¥–≤—ñ –∑–º—ñ–Ω–Ω—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ!
    println!("x = {}, y = {}", x, y);  // x = 42, y = 42
    
    // String –ù–ï —Ä–µ–∞–ª—ñ–∑—É—î Copy ‚Äî –ø—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ –ø–µ—Ä–µ–º—ñ—â—É—î—Ç—å—Å—è
    let s1 = String::from("–ø—Ä–∏–≤—ñ—Ç");
    let s2 = s1;  // s1 –ü–ï–†–ï–ú–Ü–©–£–Ñ–¢–¨–°–Ø –≤ s2
    
    // s1 –±—ñ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π!
    // println!("{}", s1);  // ‚ùå –ü–æ–º–∏–ª–∫–∞: value borrowed after move
    println!("{}", s2);     // ‚úì OK: "–ø—Ä–∏–≤—ñ—Ç"
    
    // –©–æ–± –º–∞—Ç–∏ –¥–≤—ñ –∫–æ–ø—ñ—ó String, –ø–æ—Ç—Ä—ñ–±–µ–Ω —è–≤–Ω–∏–π clone
    let s3 = String::from("—Å–≤—ñ—Ç");
    let s4 = s3.clone();  // –Ø–≤–Ω–µ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
    
    // –¢–µ–ø–µ—Ä –æ–±–∏–¥–≤—ñ –∑–º—ñ–Ω–Ω—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ
    println!("s3 = {}, s4 = {}", s3, s4);
}
```

–ß–æ–º—É —Ç–∞–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è?

1. i32 (Copy): –∑–∞–π–º–∞—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏—Ö 4 –±–∞–π—Ç–∏ –Ω–∞ —Å—Ç–µ–∫—É. –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ü—ñ 4 –±–∞–π—Ç–∏. –î—É–∂–µ —à–≤–∏–¥–∫–æ.

2. String (–Ω–µ Copy): –º—ñ—Å—Ç–∏—Ç—å –≤–∫–∞–∑—ñ–≤–Ω–∏–∫ –Ω–∞ –¥–∞–Ω—ñ –≤ –∫—É–ø—ñ (heap), –¥–æ–≤–∂–∏–Ω—É —Ç–∞ —î–º–Ω—ñ—Å—Ç—å. –Ø–∫–±–∏ String –±—É–≤ Copy, –ø—Ä–∏ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—ñ —Å–∫–æ–ø—ñ—é–≤–∞–≤—Å—è –± —Ç—ñ–ª—å–∫–∏ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫, —ñ –¥–≤—ñ –∑–º—ñ–Ω–Ω—ñ –≤–∫–∞–∑—É–≤–∞–ª–∏ –± –Ω–∞ —Ç—ñ —Å–∞–º—ñ –¥–∞–Ω—ñ. –ü—Ä–∏ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—ñ –æ–¥–Ω—ñ—î—ó –∑ –Ω–∏—Ö –ø–∞–º'—è—Ç—å –∑–≤—ñ–ª—å–Ω–∏–ª–∞—Å—å –±–∏, —ñ –¥—Ä—É–≥–∞ –∑–º—ñ–Ω–Ω–∞ –≤–∫–∞–∑—É–≤–∞–ª–∞ –± –Ω–∞ –Ω–µ–≤–∞–ª—ñ–¥–Ω—É –ø–∞–º'—è—Ç—å (use-after-free). –¢–æ–º—É String –ø–µ—Ä–µ–º—ñ—â—É—î—Ç—å—Å—è, –∞ –Ω–µ –∫–æ–ø—ñ—é—î—Ç—å—Å—è.

### 22.5.3 –£–º–æ–≤–∏ –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Copy

–¢–∏–ø –º–æ–∂–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ Copy, —è–∫—â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤—Å—ñ —É–º–æ–≤–∏:

1. –í—Å—ñ –ø–æ–ª—è —Ç–∏–ø—É —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å Copy ‚Äî —è–∫—â–æ —Ö–æ—á–∞ –± –æ–¥–Ω–µ –ø–æ–ª–µ –Ω–µ Copy, –≤–µ—Å—å —Ç–∏–ø –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ Copy
2. –¢–∏–ø –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î Drop ‚Äî Copy —ñ Drop –≤–∑–∞—î–º–æ–≤–∏–∫–ª—é—á–Ω—ñ
3. –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –±–µ–∑–ø–µ—á–Ω–µ ‚Äî –ø–æ–±—ñ—Ç–æ–≤–∞ –∫–æ–ø—ñ—è –º–∞—î —Å–µ–Ω—Å

```rust
//  –ú–û–ñ–ï –±—É—Ç–∏ Copy ‚Äî –≤—Å—ñ –ø–æ–ª—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ (Copy)
#[derive(Debug, Clone, Copy)]
struct Point {
    x: f64,  // f64: Copy
    y: f64,  // f64: Copy
}

//  –ù–ï –ú–û–ñ–ï –±—É—Ç–∏ Copy ‚Äî String –Ω–µ Copy
#[derive(Debug, Clone)]  // –¢—ñ–ª—å–∫–∏ Clone, –±–µ–∑ Copy!
struct NamedPoint {
    name: String,  // String: –ù–ï Copy
    x: f64,
    y: f64,
}

fn main() {
    // Point ‚Äî Copy: –∫–æ–ø—ñ—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
    let p1 = Point { x: 1.0, y: 2.0 };
    let p2 = p1;  // –ö–æ–ø—ñ—é—î—Ç—å—Å—è
    println!("p1 = {:?}, p2 = {:?}", p1, p2);  // –û–±–∏–¥–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ
    
    // NamedPoint ‚Äî –Ω–µ Copy: –ø–µ—Ä–µ–º—ñ—â—É—î—Ç—å—Å—è
    let np1 = NamedPoint { 
        name: "A".to_string(), 
        x: 1.0, 
        y: 2.0 
    };
    let np2 = np1.clone();  // –ü–æ—Ç—Ä—ñ–±–µ–Ω —è–≤–Ω–∏–π clone
    // let np3 = np1;  // –¶–µ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è, np1 —Å—Ç–∞–Ω–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–º
    println!("np1 = {:?}, np2 = {:?}", np1, np2);
}
```

### 22.5.4 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ Copy –¥–ª—è –∞–≥–µ–Ω—Ç–∞

–ü—Ä–∞–≤–∏–ª–æ: —Ä–µ–∞–ª—ñ–∑—É–π—Ç–µ Copy –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö, –ø—Ä–æ—Å—Ç–∏—Ö —Ç–∏–ø—ñ–≤, —â–æ —á–∞—Å—Ç–æ –∫–æ–ø—ñ—é—é—Ç—å—Å—è.

```rust
//  Position ‚Äî —Ö–æ—Ä–æ—à–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç –¥–ª—è Copy:
// - –ú–∞–ª–µ–Ω—å–∫–∞ (24 –±–∞–π—Ç–∏: 3 √ó f64)
// - –ß–∞—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —É —Ñ—É–Ω–∫—Ü—ñ—ó
// - –ù–µ–º–∞—î –≤–∫–ª–∞–¥–µ–Ω–∏—Ö heap-–¥–∞–Ω–∏—Ö
#[derive(Debug, Clone, Copy)]
struct Position {
    x: f64,
    y: f64,
    z: f64,
}

//  Agent ‚Äî –ø–æ–≥–∞–Ω–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç –¥–ª—è Copy:
// - –í–µ–ª–∏–∫–∏–π (–º—ñ—Å—Ç–∏—Ç—å String, Vec)
// - –ú–∞—î heap-–¥–∞–Ω—ñ
// - –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±—É–ª–æ –± –¥–æ—Ä–æ–≥–∏–º
#[derive(Debug, Clone)]  // –¢—ñ–ª—å–∫–∏ Clone
struct Agent {
    id: String,              // –ù–ï Copy
    position: Position,      // Copy, –∞–ª–µ –Ω–µ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è
    battery: u8,             // Copy
    history: Vec<Position>,  // –ù–ï Copy
}

fn main() {
    let pos = Position { x: 1.0, y: 2.0, z: 3.0 };
    
    // Position –∫–æ–ø—ñ—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á—ñ —É —Ñ—É–Ω–∫—Ü—ñ—é
    fn process_position(p: Position) {
        println!("–û–±—Ä–æ–±–∫–∞ –ø–æ–∑–∏—Ü—ñ—ó: {:?}", p);
    }
    
    // –ú–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –±–∞–≥–∞—Ç–æ —Ä–∞–∑—ñ–≤ ‚Äî pos –∫–æ–ø—ñ—é—î—Ç—å—Å—è
    process_position(pos);  // Copy
    process_position(pos);  // Copy
    process_position(pos);  // Copy ‚Äî pos –≤—Å–µ —â–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π!
}
```

---

## 22.6 –¢—Ä–µ–π—Ç Default ‚Äî –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### 22.6.1 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è Default

–¢—Ä–µ–π—Ç Default –Ω–∞–¥–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è "—Ä–æ–∑—É–º–Ω–æ–≥–æ" –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è —Ç–∏–ø—É. –¶–µ –∫–æ—Ä–∏—Å–Ω–æ —É –±–∞–≥–∞—Ç—å–æ—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö:

- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π, –¥–µ –±—ñ–ª—å—à—ñ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–∞—é—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è "–ø–æ—Ä–æ–∂–Ω—ñ—Ö" –æ–±'—î–∫—Ç—ñ–≤
- –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–∏ –ø–æ–ª—ñ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏, –∑–∞–ª–∏—à–∞—é—á–∏ —Ä–µ—à—Ç—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### 22.6.2 Default —á–µ—Ä–µ–∑ derive

–ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ Default, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Default –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è:

```rust
#[derive(Debug, Default)]
struct Config {
    timeout: u32,    // Default –¥–ª—è u32: 0
    retries: u8,     // Default –¥–ª—è u8: 0
    enabled: bool,   // Default –¥–ª—è bool: false
    name: String,    // Default –¥–ª—è String: "" (–ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫)
}

fn main() {
    // –î–≤–∞ —Å–ø–æ—Å–æ–±–∏ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    let config1: Config = Default::default();
    let config2 = Config::default();
    
    println!("{:?}", config1);
    // Config { timeout: 0, retries: 0, enabled: false, name: "" }
}
```

–ü—Ä–æ–±–ª–µ–º–∞ derive(Default): –≤—Å—ñ –∑–Ω–∞—á–µ–Ω–Ω—è "–Ω—É–ª—å–æ–≤—ñ" ‚Äî 0, false, –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫. –ß–∞—Å—Ç–æ —Ü–µ –Ω–µ —Ç–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

### 22.6.3 –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Default

–î–ª—è "—Ä–æ–∑—É–º–Ω–∏—Ö" –∑–Ω–∞—á–µ–Ω—å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ä–µ–∞–ª—ñ–∑—É–π—Ç–µ Default –≤—Ä—É—á–Ω—É:

```rust
#[derive(Debug)]
struct AgentConfig {
    max_speed: f64,        // –º/—Å
    max_altitude: f64,     // –º–µ—Ç—Ä–∏
    battery_threshold: u8, // –≤—ñ–¥—Å–æ—Ç–æ–∫ –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
    name: String,
}

impl Default for AgentConfig {
    fn default() -> Self {
        Self {
            max_speed: 20.0,         // –†–æ–∑—É–º–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å, –Ω–µ 0
            max_altitude: 500.0,     // –¢–∏–ø–æ–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤–∏—Å–æ—Ç–∞
            battery_threshold: 20,   // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø—Ä–∏ 20% –∑–∞—Ä—è–¥—É
            name: String::from("–ë–µ–∑—ñ–º–µ–Ω–Ω–∏–π"),
        }
    }
}

fn main() {
    let config = AgentConfig::default();
    
    println!("–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:");
    println!("  –ú–∞–∫—Å. —à–≤–∏–¥–∫—ñ—Å—Ç—å: {} –º/—Å", config.max_speed);
    println!("  –ú–∞–∫—Å. –≤–∏—Å–æ—Ç–∞: {} –º", config.max_altitude);
    println!("  –ü–æ—Ä—ñ–≥ –±–∞—Ç–∞—Ä–µ—ó: {}%", config.battery_threshold);
    println!("  –Ü–º'—è: {}", config.name);
}
```

### 22.6.4 Struct update syntax –∑ Default

–ü–æ—Ç—É–∂–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω ‚Äî –∑–∞–¥–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è, —Ä–µ—à—Ç—É –≤–∑—è—Ç–∏ –∑ Default:

```rust
#[derive(Debug)]
struct ServerConfig {
    host: String,
    port: u16,
    timeout_ms: u32,
    max_connections: usize,
    use_tls: bool,
}

impl Default for ServerConfig {
    fn default() -> Self {
        Self {
            host: "localhost".to_string(),
            port: 8080,
            timeout_ms: 30000,
            max_connections: 100,
            use_tls: false,
        }
    }
}

fn main() {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é, –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—é—á–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è
    // –°–∏–Ω—Ç–∞–∫—Å–∏—Å ..Default::default() –∑–∞–ø–æ–≤–Ω—é—î —Ä–µ—à—Ç—É –ø–æ–ª—ñ–≤
    let custom = ServerConfig {
        port: 3000,       // –ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î–º–æ –ø–æ—Ä—Ç
        use_tls: true,    // –í–º–∏–∫–∞—î–º–æ TLS
        ..Default::default()  // –†–µ—à—Ç–∞ –ø–æ–ª—ñ–≤ ‚Äî –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    };
    
    println!("{:?}", custom);
    // ServerConfig { 
    //     host: "localhost",      ‚Üê –∑ default
    //     port: 3000,             ‚Üê –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ
    //     timeout_ms: 30000,      ‚Üê –∑ default
    //     max_connections: 100,   ‚Üê –∑ default
    //     use_tls: true           ‚Üê –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ
    // }
}
```

–¶–µ–π –ø–∞—Ç–µ—Ä–Ω –æ—Å–æ–±–ª–∏–≤–æ –∑—Ä—É—á–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–æ–ª—è–º–∏, –¥–µ –∑–∞–∑–≤–∏—á–∞–π –∑–º—ñ–Ω—é—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫—ñ–ª—å–∫–∞.

---

## 22.7 –¢—Ä–µ–π—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: PartialEq —Ç–∞ Eq

### 22.7.1 PartialEq ‚Äî –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ—Å—Ç—å

–¢—Ä–µ–π—Ç PartialEq –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ `==` —Ç–∞ `!=` –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å.

```rust
#[derive(Debug, PartialEq)]
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p1 = Point { x: 10, y: 20 };
    let p2 = Point { x: 10, y: 20 };
    let p3 = Point { x: 5, y: 5 };
    
    println!("p1 == p2: {}", p1 == p2);  // true ‚Äî –æ–¥–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
    println!("p1 == p3: {}", p1 == p3);  // false ‚Äî —Ä—ñ–∑–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
    println!("p1 != p3: {}", p1 != p3);  // true
}
```

### 22.7.2 –ß–æ–º—É "Partial"?

–ù–∞–∑–≤–∞ "Partial" (—á–∞—Å—Ç–∫–æ–≤–∏–π) –æ–∑–Ω–∞—á–∞—î, —â–æ –Ω–µ –≤—Å—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∏–ø—É –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω—ñ. –ö–ª–∞—Å–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ ‚Äî —á–∏—Å–ª–∞ –∑ –ø–ª–∞–≤–∞—é—á–æ—é —Ç–æ—á–∫–æ—é —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è NaN (Not a Number):

```rust
fn main() {
    let nan = f64::NAN;
    
    // –ó–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º IEEE 754, NaN –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—ñ—á–æ–º—É, –Ω–∞–≤—ñ—Ç—å —Å–æ–±—ñ!
    println!("NaN == NaN: {}", nan == nan);  // false!
    println!("NaN != NaN: {}", nan != nan);  // true!
    
    // –¢–æ–º—É f64 —Ä–µ–∞–ª—ñ–∑—É—î PartialEq, –∞–ª–µ –ù–ï Eq
    // –†—ñ–≤–Ω—ñ—Å—Ç—å –Ω–µ —î —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—é –¥–ª—è f64
}
```

### 22.7.3 Eq ‚Äî –ø–æ–≤–Ω–∞ —Ä—ñ–≤–Ω—ñ—Å—Ç—å

Eq ‚Äî —Ü–µ –º–∞—Ä–∫–µ—Ä–Ω–∏–π —Ç—Ä–µ–π—Ç (–±–µ–∑ –º–µ—Ç–æ–¥—ñ–≤), —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—ñ—Å—Ç—å: a == a –∑–∞–≤–∂–¥–∏ true.

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∏–ø—É —è–∫ –∫–ª—é—á–∞ `HashMap` –ø–æ—Ç—Ä—ñ–±–µ–Ω `Eq` (—Ä–∞–∑–æ–º –∑ `Hash`):

```rust
use std::collections::HashMap;

// –î–ª—è HashMap –ø–æ—Ç—Ä—ñ–±–Ω—ñ Eq + Hash
#[derive(Debug, PartialEq, Eq, Hash)]
struct AgentId {
    id: u32,
}

fn main() {
    let mut positions: HashMap<AgentId, (f64, f64)> = HashMap::new();
    
    positions.insert(AgentId { id: 1 }, (10.0, 20.0));
    positions.insert(AgentId { id: 2 }, (30.0, 40.0));
    
    if let Some(pos) = positions.get(&AgentId { id: 1 }) {
        println!("–ê–≥–µ–Ω—Ç 1 –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó {:?}", pos);
    }
}
```

### 22.7.4 –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è PartialEq

–Ü–Ω–æ–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –Ω–µ –≤—Å—ñ –ø–æ–ª—è. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–≤–∞ –∞–≥–µ–Ω—Ç–∏ –≤–≤–∞–∂–∞—é—Ç—å—Å—è —Ä—ñ–≤–Ω–∏–º–∏, —è–∫—â–æ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —ñ–Ω—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:

```rust
#[derive(Debug)]
struct Agent {
    id: String,
    battery: u8,
    position: (f64, f64),
}

// –ü–æ—Ä—ñ–≤–Ω—é—î–º–æ –¢–Ü–õ–¨–ö–ò –∑–∞ id
impl PartialEq for Agent {
    fn eq(&self, other: &Self) -> bool {
        self.id == other.id
    }
}

// Eq ‚Äî –º–∞—Ä–∫–µ—Ä–Ω–∏–π —Ç—Ä–µ–π—Ç, –ø–æ—Ä–æ–∂–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
impl Eq for Agent {}

fn main() {
    let agent1 = Agent {
        id: "SCOUT-001".to_string(),
        battery: 100,
        position: (0.0, 0.0),
    };
    
    let agent2 = Agent {
        id: "SCOUT-001".to_string(),
        battery: 50,              // –Ü–Ω—à–∞ –±–∞—Ç–∞—Ä–µ—è
        position: (100.0, 200.0), // –Ü–Ω—à–∞ –ø–æ–∑–∏—Ü—ñ—è
    };
    
    // –†—ñ–≤–Ω—ñ –∑–∞ id, —Ö–æ—á–∞ —ñ–Ω—à—ñ –ø–æ–ª—è —Ä—ñ–∑–Ω—ñ!
    println!("agent1 == agent2: {}", agent1 == agent2);  // true
}
```

---

## 22.8 –¢—Ä–µ–π—Ç Hash ‚Äî –¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ–π HashMap —Ç–∞ HashSet

### 22.8.1 –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è Hash

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∏–ø—É —è–∫ –∫–ª—é—á–∞ `HashMap` –∞–±–æ –µ–ª–µ–º–µ–Ω—Ç–∞ `HashSet` –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–≤–∞ —Ç—Ä–µ–π—Ç–∏:
- `Eq` ‚Äî –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∫–ª—é—á—ñ–≤
- `Hash` ‚Äî –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Ö–µ—à-–∑–Ω–∞—á–µ–Ω–Ω—è

–•–µ—à ‚Äî —Ü–µ —á–∏—Å–ª–æ, –æ–±—á–∏—Å–ª–µ–Ω–µ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–º—ñ—Å—Ç—É –∑–Ω–∞—á–µ–Ω–Ω—è. –û–¥–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤—ñ —Ö–µ—à—ñ.

```rust
use std::collections::HashMap;

#[derive(Debug, PartialEq, Eq, Hash)]
struct Coordinate {
    x: i32,
    y: i32,
}

fn main() {
    let mut map: HashMap<Coordinate, String> = HashMap::new();
    
    map.insert(Coordinate { x: 0, y: 0 }, "–ü–æ—á–∞—Ç–æ–∫".to_string());
    map.insert(Coordinate { x: 1, y: 1 }, "–î—ñ–∞–≥–æ–Ω–∞–ª—å".to_string());
    
    println!("{:?}", map.get(&Coordinate { x: 0, y: 0 }));
    // Some("–ü–æ—á–∞—Ç–æ–∫")
}
```

### 22.8.2 –ö—Ä–∏—Ç–∏—á–Ω–µ –ø—Ä–∞–≤–∏–ª–æ: —É–∑–≥–æ–¥–∂–µ–Ω—ñ—Å—Ç—å Hash —Ç–∞ Eq

–ü–†–ê–í–ò–õ–û: –Ø–∫—â–æ `a == b`, —Ç–æ `hash(a) == hash(b)`.

–ü–æ—Ä—É—à–µ–Ω–Ω—è —Ü—å–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ HashMap!

```rust
use std::hash::{Hash, Hasher};
use std::collections::HashMap;

#[derive(Debug)]
struct Key {
    id: u32,
    name: String,
}

// PartialEq –ø–æ—Ä—ñ–≤–Ω—é—î –¢–Ü–õ–¨–ö–ò id
impl PartialEq for Key {
    fn eq(&self, other: &Self) -> bool {
        self.id == other.id
    }
}

impl Eq for Key {}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: Hash –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—à—ñ –ø–æ–ª—è, –Ω—ñ–∂ eq()
// impl Hash for Key {
//     fn hash<H: Hasher>(&self, state: &mut H) {
//         self.id.hash(state);
//         self.name.hash(state);  // ‚Üê name –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ eq()!
//     }
// }

//  –ü–†–ê–í–ò–õ–¨–ù–û: Hash —Ç–∞ eq() –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤—ñ –ø–æ–ª—è
impl Hash for Key {
    fn hash<H: Hasher>(&self, state: &mut H) {
        self.id.hash(state);  // –¢—ñ–ª—å–∫–∏ id ‚Äî —è–∫ —É eq()
    }
}

fn main() {
    let mut map: HashMap<Key, String> = HashMap::new();
    
    let key1 = Key { id: 1, name: "Alpha".to_string() };
    let key2 = Key { id: 1, name: "Beta".to_string() };
    
    // key1 == key2 (–æ–¥–Ω–∞–∫–æ–≤–∏–π id)
    // hash(key1) == hash(key2) (–æ–¥–Ω–∞–∫–æ–≤—ñ —Ö–µ—à—ñ, –±–æ —Ö–µ—à —Ç—ñ–ª—å–∫–∏ –≤—ñ–¥ id)
    
    map.insert(key1, "–ü–µ—Ä—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è".to_string());
    
    // –ü–æ—à—É–∫ –∑–∞ key2 –∑–Ω–∞–π–¥–µ –∑–Ω–∞—á–µ–Ω–Ω—è, –±–æ key1 == key2
    println!("{:?}", map.get(&key2));
    // Some("–ü–µ—Ä—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è")
}
```

---

## 22.9 –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥: –∞–≥–µ–Ω—Ç –∑ —É—Å—ñ–º–∞ —Ç—Ä–µ–π—Ç–∞–º–∏

–ó–±–µ—Ä–µ–º–æ –≤—Å—ñ –∑–Ω–∞–Ω–Ω—è —Ä–∞–∑–æ–º —ñ —Å—Ç–≤–æ—Ä–∏–º–æ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —Ç–∏–ø Agent –∑ —É—Å—ñ–º–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ —Ç—Ä–µ–π—Ç–∞–º–∏ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–ª–µ–∫—Ü—ñ—è—Ö, –ª–æ–≥—É–≤–∞–Ω–Ω—ñ —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ.

```rust
use std::fmt;
use std::hash::{Hash, Hasher};
use std::collections::{HashMap, HashSet};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// POSITION ‚Äî Copy, –±–æ –º–∞–ª–µ–Ω—å–∫–∞ —Ç–∞ —á–∞—Å—Ç–æ –∫–æ–ø—ñ—é—î—Ç—å—Å—è
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

#[derive(Clone, Copy, PartialEq, Default)]
pub struct Position {
    pub x: f64,
    pub y: f64,
    pub z: f64,
}

impl Position {
    pub fn new(x: f64, y: f64, z: f64) -> Self {
        Self { x, y, z }
    }
}

impl fmt::Debug for Position {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(f, "Pos({:.1}, {:.1}, {:.1})", self.x, self.y, self.z)
    }
}

impl fmt::Display for Position {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(f, "({:.1}, {:.1}, {:.1})", self.x, self.y, self.z)
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AGENT STATE ‚Äî Clone –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, PartialEq –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

#[derive(Debug, Clone, PartialEq, Eq, Default)]
pub enum AgentState {
    #[default]
    Grounded,
    Flying,
    Charging,
    Emergency(String),
}

impl fmt::Display for AgentState {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        match self {
            AgentState::Grounded => write!(f, "–ù–∞ –∑–µ–º–ª—ñ"),
            AgentState::Flying => write!(f, "–£ –ø–æ–ª—å–æ—Ç—ñ"),
            AgentState::Charging => write!(f, "–ó–∞—Ä—è–¥–∂–∞—î—Ç—å—Å—è"),
            AgentState::Emergency(r) => write!(f, "–ê–≤–∞—Ä—ñ—è: {}", r),
        }
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AGENT ‚Äî Clone, –≤–ª–∞—Å–Ω—ñ PartialEq —Ç–∞ Hash (—Ç—ñ–ª—å–∫–∏ –∑–∞ id)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

#[derive(Clone)]
pub struct Agent {
    pub id: String,
    pub position: Position,
    pub battery: u8,
    pub state: AgentState,
}

impl Agent {
    pub fn new(id: &str) -> Self {
        Self {
            id: id.to_string(),
            position: Position::default(),
            battery: 100,
            state: AgentState::default(),
        }
    }
}

// –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –∑–∞ id
impl PartialEq for Agent {
    fn eq(&self, other: &Self) -> bool {
        self.id == other.id
    }
}

impl Eq for Agent {}

// Hash —Ç—ñ–ª—å–∫–∏ –∑–∞ id (—É–∑–≥–æ–¥–∂–µ–Ω–æ –∑ PartialEq!)
impl Hash for Agent {
    fn hash<H: Hasher>(&self, state: &mut H) {
        self.id.hash(state);
    }
}

impl Default for Agent {
    fn default() -> Self {
        Self::new("–ë–ï–ó–Ü–ú–ï–ù–ù–ò–ô")
    }
}

impl fmt::Debug for Agent {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        f.debug_struct("Agent")
            .field("id", &self.id)
            .field("position", &self.position)
            .field("battery", &self.battery)
            .field("state", &self.state)
            .finish()
    }
}

impl fmt::Display for Agent {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(
            f,
            "[{}] {} | –ü–æ–∑: {} | –ë–∞—Ç: {}%",
            self.id, self.state, self.position, self.battery
        )
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –î–ï–ú–û–ù–°–¢–†–ê–¶–Ü–Ø
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

fn main() {
    println!("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
    println!("‚ïë           –î–ï–ú–û–ù–°–¢–†–ê–¶–Ü–Ø –°–¢–ê–ù–î–ê–†–¢–ù–ò–• –¢–†–ï–ô–¢–Ü–í                   ‚ïë");
    println!("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n");
    
    // Debug —Ç–∞ Display
    println!("=== Debug —Ç–∞ Display ===");
    let agent = Agent::new("SCOUT-001");
    println!("Debug:   {:?}", agent);
    println!("Display: {}\n", agent);
    
    // Clone
    println!("=== Clone ===");
    let mut copy = agent.clone();
    copy.battery = 50;
    println!("–û—Ä–∏–≥—ñ–Ω–∞–ª: {}", agent);
    println!("–ö–æ–ø—ñ—è:    {}\n", copy);
    
    // Default
    println!("=== Default ===");
    let default_agent: Agent = Default::default();
    println!("Default: {}\n", default_agent);
    
    // PartialEq (–ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑–∞ id)
    println!("=== PartialEq ===");
    let agent1 = Agent::new("SCOUT-001");
    let agent2 = Agent::new("SCOUT-001");
    let agent3 = Agent::new("SCOUT-002");
    
    println!("agent1 == agent2: {}", agent1 == agent2);  // true
    println!("agent1 == agent3: {}\n", agent1 == agent3);  // false
    
    // Hash (–¥–ª—è HashMap)
    println!("=== Hash (HashMap) ===");
    let mut missions: HashMap<Agent, String> = HashMap::new();
    missions.insert(Agent::new("SCOUT-001"), "–ü–∞—Ç—Ä—É–ª—å".to_string());
    missions.insert(Agent::new("SCOUT-002"), "–†–æ–∑–≤—ñ–¥–∫–∞".to_string());
    
    for (agent, mission) in &missions {
        println!("{}: {}", agent.id, mission);
    }
    
    // HashSet ‚Äî –¥—É–±–ª—ñ–∫–∞—Ç–∏ —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è
    println!("\n=== HashSet ===");
    let mut active: HashSet<Agent> = HashSet::new();
    active.insert(Agent::new("SCOUT-001"));
    active.insert(Agent::new("SCOUT-002"));
    active.insert(Agent::new("SCOUT-001"));  // –î—É–±–ª—ñ–∫–∞—Ç –∑–∞ id!
    
    println!("–ê–∫—Ç–∏–≤–Ω–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤: {}", active.len());  // 2, –Ω–µ 3
    
    // Position Copy
    println!("\n=== Position Copy ===");
    let pos = Position::new(10.0, 20.0, 30.0);
    let pos2 = pos;  // Copy, –Ω–µ move
    println!("pos: {}, pos2: {}", pos, pos2);  // –û–±–∏–¥–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ
}
```

---

## 22.10 –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞

–ú–µ—Ç–∞: –ó–∞–∫—Ä—ñ–ø–∏—Ç–∏ –Ω–∞–≤–∏—á–∫–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ç—Ä–µ–π—Ç—ñ–≤ –¥–ª—è —Ç–∏–ø—ñ–≤ —Å–∏—Å—Ç–µ–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç–∞–º–∏.

### –ß–∞—Å—Ç–∏–Ω–∞ 1: Debug —Ç–∞ Display (3 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ç—Ä–µ–π—Ç–∏ Debug —Ç–∞ Display –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–æ–∫–∞–∑–∞–Ω—å —Å–µ–Ω—Å–æ—Ä–∞:

```rust
struct SensorReading {
    sensor_id: String,
    value: f64,
    unit: String,
    timestamp: u64,
}

// –û—á—ñ–∫—É–≤–∞–Ω–∏–π Debug: 
// SensorReading { sensor_id: "TEMP-01", value: 23.5, unit: "¬∞C", timestamp: 1705123456 }

// –û—á—ñ–∫—É–≤–∞–Ω–∏–π Display: 
// [TEMP-01] 23.5 ¬∞C @ 1705123456
```

### –ß–∞—Å—Ç–∏–Ω–∞ 2: Clone —Ç–∞ Default (3 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ Clone —Ç–∞ Default –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –º—ñ—Å—ñ—ó:

```rust
struct MissionConfig {
    name: String,
    waypoints: Vec<(f64, f64)>,
    max_duration: u32,        // —Å–µ–∫—É–Ω–¥–∏
    return_on_low_battery: bool,
}

// Default: 
// - name: "–ù–æ–≤–∞ –º—ñ—Å—ñ—è"
// - waypoints: –ø–æ—Ä–æ–∂–Ω—ñ–π –≤–µ–∫—Ç–æ—Ä
// - max_duration: 3600 (1 –≥–æ–¥–∏–Ω–∞)
// - return_on_low_battery: true
```

### –ß–∞—Å—Ç–∏–Ω–∞ 3: PartialEq, Eq, Hash (4 –±–∞–ª–∏)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ —Ö–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ –∞–≥–µ–Ω—Ç–∞:

```rust
struct Command {
    id: u64,
    command_type: String,
    parameters: Vec<String>,
    timestamp: u64,
}

// –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ hash –¢–Ü–õ–¨–ö–ò –∑–∞ id
// –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–π—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —è–∫ –∫–ª—é—á–∞ HashMap
```

–ö—Ä–∏—Ç–µ—Ä—ñ—ó –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è:

| –ö—Ä–∏—Ç–µ—Ä—ñ–π | –ë–∞–ª–∏ |
|----------|------|
| Debug —Ç–∞ Display | 3 |
| Clone —Ç–∞ Default | 3 |
| PartialEq, Eq, Hash | 4 |
| –ú–∞–∫—Å–∏–º—É–º | 10 |

---

## –ü—ñ–¥—Å—É–º–æ–∫

–£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—è –∑ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ—é –∫–æ–Ω—Ü–µ–ø—Ü—ñ—î—é —Ç—Ä–µ–π—Ç—ñ–≤ —É Rust:

–©–æ —Ç–∞–∫–µ —Ç—Ä–µ–π—Ç:
- –ú–µ—Ö–∞–Ω—ñ–∑–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç –º—ñ–∂ –∞–≤—Ç–æ—Ä–æ–º —Ç—Ä–µ–π—Ç–∞ —Ç–∞ –∞–≤—Ç–æ—Ä–æ–º —Ç–∏–ø—É
- –û—Å–Ω–æ–≤–∞ –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º—É –≤ Rust

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Ç—Ä–µ–π—Ç–∏ —Ç–∞ —ó—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:

| –¢—Ä–µ–π—Ç | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è | Derive? |
|-------|------------|---------|
| Debug | –í–∏–≤—ñ–¥ `{:?}` –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ |  –¢–∞–∫ |
| Display | –í–∏–≤—ñ–¥ `{}` –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ |  –¢—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É |
| Clone | –Ø–≤–Ω–µ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è `.clone()` |  –¢–∞–∫ |
| Copy | –ù–µ—è–≤–Ω–µ –ø–æ–±—ñ—Ç–æ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | –¢–∞–∫, –Ø–∫—â–æ –≤—Å—ñ –ø–æ–ª—è Copy |
| Default | –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |  –¢–∞–∫ (–Ω—É–ª—å–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è) |
| PartialEq | –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è `==` / `!=` |  –¢–∞–∫ |
| Eq | –ì–∞—Ä–∞–Ω—Ç—ñ—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç—ñ |  –¢–∞–∫ |
| Hash | –•–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è HashMap/HashSet |  –¢–∞–∫ |

–ö–ª—é—á–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞:
1. Debug ‚Äî –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ —á–µ—Ä–µ–∑ derive
2. Display ‚Äî —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É, –±–æ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
3. Copy ‚Äî —Ç—ñ–ª—å–∫–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∏–ø—ñ–≤ –±–µ–∑ heap-–¥–∞–Ω–∏—Ö (String, Vec)
4. Hash + Eq –º–∞—é—Ç—å –±—É—Ç–∏ —É–∑–≥–æ–¥–∂–µ–Ω—ñ: —è–∫—â–æ `a == b`, —Ç–æ `hash(a) == hash(b)`

---

## –ó–≤'—è–∑–æ–∫ –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —Ä–æ–∑–¥—ñ–ª–æ–º

–í–∏ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—è –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º–∏ —Ç—Ä–µ–π—Ç–∞–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Rust. –ê–ª–µ —Å–ø—Ä–∞–≤–∂–Ω—è —Å–∏–ª–∞ —Ç—Ä–µ–π—Ç—ñ–≤ —Ä–æ–∑–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ –≤–ª–∞—Å–Ω—ñ —Ç—Ä–µ–π—Ç–∏ –¥–ª—è –∞–±—Å—Ç—Ä–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —É –≤–∞—à—ñ–π –ø—Ä–µ–¥–º–µ—Ç–Ω—ñ–π –æ–±–ª–∞—Å—Ç—ñ.

–£ –†–æ–∑–¥—ñ–ª—ñ 23: –¢—Ä–µ–π—Ç–∏ ‚Äî –≤–ª–∞—Å–Ω—ñ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó –≤–∏ –¥—ñ–∑–Ω–∞—î—Ç–µ—Å—å:
- –Ø–∫ –ø—Ä–æ—î–∫—Ç—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ —Ç—Ä–µ–π—Ç–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ –∞–≥–µ–Ω—Ç—ñ–≤
- –ú–µ—Ç–æ–¥–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ç–∞ —ó—Ö –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è
- Associated types ‚Äî –ø–æ–≤'—è–∑–∞–Ω—ñ —Ç–∏–ø–∏ –≤ —Ç—Ä–µ–π—Ç–∞—Ö
- Trait objects —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º (`dyn Trait`)
- Orphan rule —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç—Ä–µ–π—Ç—ñ–≤
